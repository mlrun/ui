{
  "cat-vs-dog-classification-tf2-serving": {
    "metadata": {
      "name": "cat-vs-dog-classification-tf2-serving",
      "namespace": "default-tenant",
      "labels": {
        "mlrun/class": "remote",
        "nuclio.io/project-name": "cat-vs-dog-classification"
      },
      "annotations": {
        "nuclio.io/generated_by": "function generated from 01-09-2020"
      },
      "resourceVersion": "20154286"
    },
    "spec": {
      "handler": "tf2_serving:handler",
      "runtime": "python:3.6",
      "env": [
        {
          "name": "MODEL_CLASS",
          "value": "TFModel"
        },
        {
          "name": "ENABLE_EXPLAINER",
          "value": "False"
        },
        {
          "name": "V3IO_API",
          "value": "v3io-webapi.default-tenant.svc:8081"
        },
        {
          "name": "V3IO_USERNAME",
          "value": "admin"
        },
        {
          "name": "V3IO_ACCESS_KEY",
          "value": "b7242e47-a051-4ec3-8384-5f99a26c1451"
        },
        {
          "name": "IMAGE_HEIGHT",
          "value": "224"
        },
        {
          "name": "IMAGE_WIDTH",
          "value": "224"
        },
        {
          "name": "SERVING_MODEL_cat_vs_dog_tfv2",
          "value": "store://models/cat-vs-dog-classification/train_model:5a5db6e3-7cdd-4d33-971c-d2310b02387c"
        },
        {
          "name": "MLRUN_DEFAULT_PROJECT",
          "value": "cat-vs-dog-classification"
        },
        {
          "name": "MLRUN_DBPATH",
          "value": "http://mlrun-api:8080"
        },
        {
          "name": "MLRUN_NAMESPACE",
          "value": "default-tenant"
        }
      ],
      "resources": {},
      "imageHash": "1625573618372378075",
      "minReplicas": 1,
      "maxReplicas": 4,
      "triggers": {
        "http": {
          "class": "",
          "kind": "http",
          "name": "http",
          "maxWorkers": 8,
          "attributes": {
            "ingresses": {},
            "serviceType": "NodePort"
          }
        }
      },
      "volumes": [
        {
          "volume": {
            "name": "v3io",
            "flexVolume": {
              "driver": "v3io/fuse",
              "options": {
                "accessKey": "b7242e47-a051-4ec3-8384-5f99a26c1451"
              }
            }
          },
          "volumeMount": {
            "name": "v3io",
            "mountPath": "/v3io"
          }
        },
        {
          "volume": {
            "name": "v3io",
            "flexVolume": {
              "driver": "v3io/fuse",
              "options": {
                "accessKey": "b7242e47-a051-4ec3-8384-5f99a26c1451"
              }
            }
          },
          "volumeMount": {
            "name": "v3io",
            "mountPath": "/User",
            "subPath": "users/admin"
          }
        }
      ],
      "version": -1,
      "alias": "latest",
      "build": {
        "functionSourceCode": "IyBHZW5lcmF0ZWQgYnkgbnVjbGlvLmV4cG9ydC5OdWNsaW9FeHBvcnRlcgoKCgppbXBvcnQgd2FybmluZ3MKd2FybmluZ3Muc2ltcGxlZmlsdGVyKGFjdGlvbj0iaWdub3JlIiwgY2F0ZWdvcnk9RnV0dXJlV2FybmluZykKCmltcG9ydCBqc29uCmltcG9ydCBudW1weSBhcyBucAppbXBvcnQgcmVxdWVzdHMKZnJvbSB0ZW5zb3JmbG93IGltcG9ydCBrZXJhcwpmcm9tIHRlbnNvcmZsb3cua2VyYXMubW9kZWxzIGltcG9ydCBsb2FkX21vZGVsCmZyb20gdGVuc29yZmxvdy5rZXJhcy5wcmVwcm9jZXNzaW5nIGltcG9ydCBpbWFnZQpmcm9tIHRlbnNvcmZsb3cua2VyYXMucHJlcHJvY2Vzc2luZy5pbWFnZSBpbXBvcnQgbG9hZF9pbWcKZnJvbSBvcyBpbXBvcnQgZW52aXJvbiwgcGF0aApmcm9tIFBJTCBpbXBvcnQgSW1hZ2UKZnJvbSBpbyBpbXBvcnQgQnl0ZXNJTwpmcm9tIHVybGxpYi5yZXF1ZXN0IGltcG9ydCB1cmxvcGVuCmltcG9ydCBtbHJ1bgoKY2xhc3MgVEZNb2RlbChtbHJ1bi5ydW50aW1lcy5NTE1vZGVsU2VydmVyKToKICAgIGRlZiBfX2luaXRfXyhzZWxmLCBuYW1lOiBzdHIsIG1vZGVsX2Rpcjogc3RyKToKICAgICAgICBzdXBlcigpLl9faW5pdF9fKG5hbWUsIG1vZGVsX2RpcikKCiAgICAgICAgc2VsZi5JTUFHRV9XSURUSCA9IGludChlbnZpcm9uLmdldCgnSU1BR0VfV0lEVEgnLCAnMTI4JykpCiAgICAgICAgc2VsZi5JTUFHRV9IRUlHSFQgPSBpbnQoZW52aXJvbi5nZXQoJ0lNQUdFX0hFSUdIVCcsICcxMjgnKSkKICAgICAgICAKICAgICAgICB0cnk6CiAgICAgICAgICAgIHdpdGggb3BlbihlbnZpcm9uWydjbGFzc2VzX21hcCddLCAncicpIGFzIGY6CiAgICAgICAgICAgICAgICBzZWxmLmNsYXNzZXMgPSBqc29uLmxvYWQoZikKICAgICAgICBleGNlcHQ6CiAgICAgICAgICAgIHNlbGYuY2xhc3NlcyA9IE5vbmUKICAgICAgICAKICAgIGRlZiBsb2FkKHNlbGYpOgogICAgICAgIG1vZGVsX2ZpbGUsIGV4dHJhX2RhdGEgPSBzZWxmLmdldF9tb2RlbCgnLmg1JykKICAgICAgICBzZWxmLm1vZGVsID0gbG9hZF9tb2RlbChtb2RlbF9maWxlKQogICAgICAgIAogICAgZGVmIHByZXByb2Nlc3Moc2VsZiwgYm9keSk6CiAgICAgICAgdHJ5OgogICAgICAgICAgICBvdXRwdXQgPSB7J2luc3RhbmNlcyc6IFtdfQogICAgICAgICAgICBpbnN0YW5jZXMgPSBib2R5LmdldCgnaW5zdGFuY2VzJywgW10pCiAgICAgICAgICAgIGZvciBieXRlX2ltYWdlIGluIGluc3RhbmNlczoKICAgICAgICAgICAgICAgIGltZyA9IEltYWdlLm9wZW4oYnl0ZV9pbWFnZSkKICAgICAgICAgICAgICAgIGltZyA9IGltZy5yZXNpemUoKHNlbGYuSU1BR0VfV0lEVEgsIHNlbGYuSU1BR0VfSEVJR0hUKSkKCiAgICAgICAgICAgICAgICB4ID0gaW1hZ2UuaW1nX3RvX2FycmF5KGltZykKICAgICAgICAgICAgICAgIHggPSBucC5leHBhbmRfZGltcyh4LCBheGlzPTApCiAgICAgICAgICAgICAgICBvdXRwdXRbJ2luc3RhbmNlcyddLmFwcGVuZCh4KQogICAgICAgICAgICAKICAgICAgICAgICAgb3V0cHV0WydpbnN0YW5jZXMnXSA9IFtucC52c3RhY2sob3V0cHV0WydpbnN0YW5jZXMnXSldCiAgICAgICAgICAgIHJldHVybiBvdXRwdXQKICAgICAgICBleGNlcHQ6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbihmJ3JlY2VpdmVkOiB7Ym9keX0nKQogICAgICAgICAgICAKCiAgICBkZWYgcHJlZGljdChzZWxmLCBkYXRhKToKICAgICAgICBpbWFnZXMgPSBkYXRhLmdldCgnaW5zdGFuY2VzJywgW10pCgogICAgICAgIHByZWRpY3RlZF9wcm9iYWJpbGl0eSA9IHNlbGYubW9kZWwucHJlZGljdChpbWFnZXMpCgogICAgICAgIHJldHVybiBwcmVkaWN0ZWRfcHJvYmFiaWxpdHkKICAgICAgICAKICAgIGRlZiBwb3N0cHJvY2VzcyhzZWxmLCBwcmVkaWN0ZWRfcHJvYmFiaWxpdHkpOgogICAgICAgIGlmIHNlbGYuY2xhc3NlczoKICAgICAgICAgICAgcHJlZGljdGVkX2NsYXNzZXMgPSBucC5hcm91bmQocHJlZGljdGVkX3Byb2JhYmlsaXR5LCAxKS50b2xpc3QoKVswXQogICAgICAgICAgICBwcmVkaWN0ZWRfcHJvYmFiaWxpdGllcyA9IHByZWRpY3RlZF9wcm9iYWJpbGl0eS50b2xpc3QoKVswXQogICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgJ3ByZWRpY3Rpb24nOiBbc2VsZi5jbGFzc2VzW3N0cihpbnQoY2xzKSldIGZvciBjbHMgaW4gcHJlZGljdGVkX2NsYXNzZXNdLCAKICAgICAgICAgICAgICAgIGYne3NlbGYuY2xhc3Nlc1siMSJdfS1wcm9iYWJpbGl0eSc6IHByZWRpY3RlZF9wcm9iYWJpbGl0aWVzCiAgICAgICAgICAgIH0KICAgICAgICBlbHNlOgogICAgICAgICAgICByZXR1cm4gcHJlZGljdGVkX3Byb2JhYmlsaXR5LnRvbGlzdCgpWzBdCgoKZnJvbSBtbHJ1bi5ydW50aW1lcyBpbXBvcnQgbnVjbGlvX2luaXRfaG9vawpkZWYgaW5pdF9jb250ZXh0KGNvbnRleHQpOgogICAgbnVjbGlvX2luaXRfaG9vayhjb250ZXh0LCBnbG9iYWxzKCksICdzZXJ2aW5nJykKCmRlZiBoYW5kbGVyKGNvbnRleHQsIGV2ZW50KToKICAgIHJldHVybiBjb250ZXh0Lm1scnVuX2hhbmRsZXIoY29udGV4dCwgZXZlbnQpCg==",
        "noBaseImagesPull": true,
        "baseImage": "mlrun/mlrun:0.6.5-rc12",
        "commands": [
          "pip install tensorflow>=2.1",
          "pip install requests pillow"
        ],
        "offline": true,
        "codeEntryType": "sourceCode",
        "timestamp": 1625573793
      },
      "platform": {},
      "serviceType": "NodePort",
      "securityContext": {},
      "scaleToZero": {
        "scaleResources": [
          {
            "metricName": "nuclio_processor_handled_events_total",
            "windowSize": "10m",
            "threshold": 0
          }
        ]
      },
      "eventTimeout": ""
    },
    "status": {
      "state": "unhealthy",
      "message": "Function is not healthy",
      "httpPort": 32595,
      "scaleToZero": {
        "lastScaleEvent": "resourceUpdated",
        "lastScaleEventTime": "2021-07-06T12:16:45.139723276Z"
      }
    }
  },
  "churn-project-admin-churn-server": {
    "metadata": {
      "name": "churn-project-admin-churn-server",
      "namespace": "default-tenant",
      "labels": {
        "mlrun/class": "remote",
        "nuclio.io/project-name": "churn-project-admin"
      },
      "annotations": {
        "nuclio.io/generated_by": "function generated from /home/kali/functions/churn_server/churn_server.py"
      },
      "resourceVersion": "37858330"
    },
    "spec": {
      "handler": "churn_server:handler",
      "runtime": "python:3.6",
      "env": [
        {
          "name": "ENABLE_EXPLAINER",
          "value": "False"
        },
        {
          "name": "V3IO_API",
          "value": "v3io-webapi.default-tenant.svc:8081"
        },
        {
          "name": "V3IO_USERNAME",
          "value": "admin"
        },
        {
          "name": "V3IO_ACCESS_KEY",
          "value": "b7242e47-a051-4ec3-8384-5f99a26c1451"
        },
        {
          "name": "V3IO_FRAMESD",
          "value": "framesd:8081"
        },
        {
          "name": "INFERENCE_STREAM",
          "value": "users/admin/artifacts/customer-churn-prediction/model_stream"
        },
        {
          "name": "MLRUN_DEFAULT_PROJECT",
          "value": "churn-project-admin"
        },
        {
          "name": "MLRUN_DBPATH",
          "value": "http://mlrun-api:8080"
        },
        {
          "name": "MLRUN_NAMESPACE",
          "value": "default-tenant"
        },
        {
          "name": "SERVING_SPEC_ENV",
          "value": "{\"function_uri\": \"churn-project-admin/churn-server\", \"version\": \"v2\", \"parameters\": {}, \"graph\": {\"kind\": \"router\", \"routes\": {\"churn_server_v1\": {\"kind\": \"task\", \"class_name\": \"ChurnModel\", \"class_args\": {\"model_path\": \"store://models/churn-project-admin/current-state_model:eaae138e-439a-47fa-93c6-ba0fe1dc3b79\"}}}}, \"load_mode\": null, \"functions\": {}, \"graph_initializer\": null, \"error_stream\": null, \"track_models\": null, \"default_content_type\": null}"
        }
      ],
      "resources": {},
      "imageHash": "1630266906177186149",
      "minReplicas": 1,
      "maxReplicas": 4,
      "triggers": {
        "default-http": {
          "class": "",
          "kind": "http",
          "name": "default-http",
          "maxWorkers": 1,
          "attributes": {
            "serviceType": "NodePort"
          }
        }
      },
      "volumes": [
        {
          "volume": {
            "name": "v3io",
            "flexVolume": {
              "driver": "v3io/fuse",
              "options": {
                "accessKey": "b7242e47-a051-4ec3-8384-5f99a26c1451"
              }
            }
          },
          "volumeMount": {
            "name": "v3io",
            "mountPath": "/v3io"
          }
        },
        {
          "volume": {
            "name": "v3io",
            "flexVolume": {
              "driver": "v3io/fuse",
              "options": {
                "accessKey": "b7242e47-a051-4ec3-8384-5f99a26c1451"
              }
            }
          },
          "volumeMount": {
            "name": "v3io",
            "mountPath": "/User",
            "subPath": "users/admin"
          }
        }
      ],
      "version": -1,
      "alias": "latest",
      "build": {
        "functionSourceCode": "IyBHZW5lcmF0ZWQgYnkgbnVjbGlvLmV4cG9ydC5OdWNsaW9FeHBvcnRlcgoKaW1wb3J0IG51bXB5IGFzIG5wCmZyb20gY2xvdWRwaWNrbGUgaW1wb3J0IGxvYWQKCgppbXBvcnQgbWxydW4KCgpjbGFzcyBDaHVybk1vZGVsKG1scnVuLnNlcnZpbmcuVjJNb2RlbFNlcnZlcik6CiAgICBkZWYgbG9hZChzZWxmKToKICAgICAgICAiIiIKICAgICAgICBsb2FkIG11bHRpcGxlIG1vZGVscyBpbiBuZXN0ZWQgZm9sZGVycywgY2h1cm4gbW9kZWwgb25seQogICAgICAgICIiIgogICAgICAgIGNsZl9tb2RlbF9maWxlLCBleHRyYV9kYXRhID0gc2VsZi5nZXRfbW9kZWwoIi5wa2wiKQogICAgICAgIHNlbGYubW9kZWwgPSBsb2FkKG9wZW4oc3RyKGNsZl9tb2RlbF9maWxlKSwgInJiIikpCiAgICAgICAgaWYgImNveCIgaW4gZXh0cmFfZGF0YS5rZXlzKCk6CiAgICAgICAgICAgIGNveF9tb2RlbF9maWxlID0gZXh0cmFfZGF0YVsiY294Il0KICAgICAgICAgICAgc2VsZi5jb3hfbW9kZWwgPSBsb2FkKG9wZW4oc3RyKGNveF9tb2RlbF9maWxlKSwgInJiIikpCiAgICAgICAgICAgIGlmICJjb3gva20iIGluIGV4dHJhX2RhdGEua2V5cygpOgogICAgICAgICAgICAgICAga21fbW9kZWxfZmlsZSA9IGV4dHJhX2RhdGFbImNveC9rbSJdCiAgICAgICAgICAgICAgICBzZWxmLmttX21vZGVsID0gbG9hZChvcGVuKHN0cihrbV9tb2RlbF9maWxlKSwgInJiIikpCgogICAgZGVmIHByZWRpY3Qoc2VsZiwgYm9keSk6CiAgICAgICAgdHJ5OgogICAgICAgICAgICBmZWF0cyA9IG5wLmFzYXJyYXkoYm9keVsiaW5zdGFuY2VzIl0sIGR0eXBlPW5wLmZsb2F0MzIpLnJlc2hhcGUoLTEsIDIzKQogICAgICAgICAgICByZXN1bHQgPSBzZWxmLm1vZGVsLnByZWRpY3QoZmVhdHMsIHZhbGlkYXRlX2ZlYXR1cmVzPUZhbHNlKQogICAgICAgICAgICByZXR1cm4gcmVzdWx0LnRvbGlzdCgpCiAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAgICByYWlzZSBFeGNlcHRpb24oIkZhaWxlZCB0byBwcmVkaWN0ICVzIiAlIGUpCgoKZnJvbSBtbHJ1bi5ydW50aW1lcyBpbXBvcnQgbnVjbGlvX2luaXRfaG9vawoKCmRlZiBpbml0X2NvbnRleHQoY29udGV4dCk6CiAgICBudWNsaW9faW5pdF9ob29rKGNvbnRleHQsIGdsb2JhbHMoKSwgInNlcnZpbmdfdjIiKQoKCmRlZiBoYW5kbGVyKGNvbnRleHQsIGV2ZW50KToKICAgIHJldHVybiBjb250ZXh0Lm1scnVuX2hhbmRsZXIoY29udGV4dCwgZXZlbnQpCgpmcm9tIG1scnVuLnJ1bnRpbWVzIGltcG9ydCBudWNsaW9faW5pdF9ob29rCmRlZiBpbml0X2NvbnRleHQoY29udGV4dCk6CiAgICBudWNsaW9faW5pdF9ob29rKGNvbnRleHQsIGdsb2JhbHMoKSwgJ3NlcnZpbmdfdjInKQoKZGVmIGhhbmRsZXIoY29udGV4dCwgZXZlbnQpOgogICAgcmV0dXJuIGNvbnRleHQubWxydW5faGFuZGxlcihjb250ZXh0LCBldmVudCkK",
        "noBaseImagesPull": true,
        "baseImage": "mlrun/ml-models:0.7.0-rc11",
        "offline": true,
        "codeEntryType": "sourceCode",
        "timestamp": 1630267041
      },
      "platform": {},
      "serviceType": "NodePort",
      "securityContext": {},
      "scaleToZero": {
        "scaleResources": [
          {
            "metricName": "nuclio_processor_handled_events_total",
            "windowSize": "10m",
            "threshold": 0
          }
        ]
      },
      "eventTimeout": ""
    },
    "status": {
      "state": "ready"
    }
  },
  "churn-project-admin-churn-server-latest": {
    "metadata": {
      "name": "churn-project-admin-churn-server-latest",
      "namespace": "default-tenant",
      "labels": {
        "author": "Iguazio",
        "framework": "churn",
        "mlrun/class": "serving",
        "nuclio.io/project-name": "churn-project-admin",
        "nuclio.io/tag": "latest"
      },
      "annotations": {
        "nuclio.io/generated_by": "function generated from /home/kali/functions/churn_server/churn_server.py"
      },
      "resourceVersion": "29807920"
    },
    "spec": {
      "handler": "churn_server:handler",
      "runtime": "python:3.6",
      "env": [
        {
          "name": "ENABLE_EXPLAINER",
          "value": "False"
        },
        {
          "name": "V3IO_API",
          "value": "v3io-webapi.default-tenant.svc:8081"
        },
        {
          "name": "V3IO_USERNAME",
          "value": "admin"
        },
        {
          "name": "V3IO_ACCESS_KEY",
          "value": "b7242e47-a051-4ec3-8384-5f99a26c1451"
        },
        {
          "name": "V3IO_FRAMESD",
          "value": "framesd:8081"
        },
        {
          "name": "INFERENCE_STREAM",
          "value": "users/admin/artifacts/customer-churn-prediction/model_stream"
        },
        {
          "name": "MLRUN_DEFAULT_PROJECT",
          "value": "churn-project-admin"
        },
        {
          "name": "MLRUN_DBPATH",
          "value": "./"
        },
        {
          "name": "MLRUN_NAMESPACE",
          "value": "default-tenant"
        },
        {
          "name": "SERVING_SPEC_ENV",
          "value": "{\"function_uri\": \"churn-project-admin/churn-server:latest\", \"version\": \"v2\", \"parameters\": {}, \"graph\": {\"kind\": \"router\", \"routes\": {\"churn_server_v1\": {\"kind\": \"task\", \"class_name\": \"ChurnModel\", \"class_args\": {\"model_path\": \"store://models/churn-project-admin/current-state_model:eaae138e-439a-47fa-93c6-ba0fe1dc3b79\"}}, \"data_clean_model\": {\"kind\": \"task\", \"class_name\": \"ChurnModel\", \"class_args\": {\"model_path\": \"store://models/churn-project-admin/data_clean_model#0:latest@cbe8504d4efe4d40a0815acca24ce345\", \"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\": \"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\"}}}}, \"load_mode\": null, \"functions\": {}, \"graph_initializer\": null, \"error_stream\": null, \"track_models\": null, \"default_content_type\": null}"
        },
        {
          "name": "MLRUN_K8S_SECRET__SF",
          "valueFrom": {
            "secretKeyRef": {
              "name": "mlrun-project-secrets-churn-project-admin",
              "key": "sf"
            }
          }
        }
      ],
      "resources": {},
      "imageHash": "1634649015305924156",
      "minReplicas": 1,
      "maxReplicas": 4,
      "triggers": {
        "default-http": {
          "class": "",
          "kind": "http",
          "name": "default-http",
          "maxWorkers": 1,
          "attributes": {
            "serviceType": "NodePort"
          }
        }
      },
      "volumes": [
        {
          "volume": {
            "name": "v3io",
            "flexVolume": {
              "driver": "v3io/fuse",
              "options": {
                "accessKey": "b7242e47-a051-4ec3-8384-5f99a26c1451"
              }
            }
          },
          "volumeMount": {
            "name": "v3io",
            "mountPath": "/v3io"
          }
        },
        {
          "volume": {
            "name": "v3io",
            "flexVolume": {
              "driver": "v3io/fuse",
              "options": {
                "accessKey": "b7242e47-a051-4ec3-8384-5f99a26c1451"
              }
            }
          },
          "volumeMount": {
            "name": "v3io",
            "mountPath": "/User",
            "subPath": "users/admin"
          }
        }
      ],
      "alias": "latest",
      "build": {
        "functionSourceCode": "IyBHZW5lcmF0ZWQgYnkgbnVjbGlvLmV4cG9ydC5OdWNsaW9FeHBvcnRlcgoKaW1wb3J0IG51bXB5IGFzIG5wCmZyb20gY2xvdWRwaWNrbGUgaW1wb3J0IGxvYWQKCgppbXBvcnQgbWxydW4KCgpjbGFzcyBDaHVybk1vZGVsKG1scnVuLnNlcnZpbmcuVjJNb2RlbFNlcnZlcik6CiAgICBkZWYgbG9hZChzZWxmKToKICAgICAgICAiIiIKICAgICAgICBsb2FkIG11bHRpcGxlIG1vZGVscyBpbiBuZXN0ZWQgZm9sZGVycywgY2h1cm4gbW9kZWwgb25seQogICAgICAgICIiIgogICAgICAgIGNsZl9tb2RlbF9maWxlLCBleHRyYV9kYXRhID0gc2VsZi5nZXRfbW9kZWwoIi5wa2wiKQogICAgICAgIHNlbGYubW9kZWwgPSBsb2FkKG9wZW4oc3RyKGNsZl9tb2RlbF9maWxlKSwgInJiIikpCiAgICAgICAgaWYgImNveCIgaW4gZXh0cmFfZGF0YS5rZXlzKCk6CiAgICAgICAgICAgIGNveF9tb2RlbF9maWxlID0gZXh0cmFfZGF0YVsiY294Il0KICAgICAgICAgICAgc2VsZi5jb3hfbW9kZWwgPSBsb2FkKG9wZW4oc3RyKGNveF9tb2RlbF9maWxlKSwgInJiIikpCiAgICAgICAgICAgIGlmICJjb3gva20iIGluIGV4dHJhX2RhdGEua2V5cygpOgogICAgICAgICAgICAgICAga21fbW9kZWxfZmlsZSA9IGV4dHJhX2RhdGFbImNveC9rbSJdCiAgICAgICAgICAgICAgICBzZWxmLmttX21vZGVsID0gbG9hZChvcGVuKHN0cihrbV9tb2RlbF9maWxlKSwgInJiIikpCgogICAgZGVmIHByZWRpY3Qoc2VsZiwgYm9keSk6CiAgICAgICAgdHJ5OgogICAgICAgICAgICBmZWF0cyA9IG5wLmFzYXJyYXkoYm9keVsiaW5zdGFuY2VzIl0sIGR0eXBlPW5wLmZsb2F0MzIpLnJlc2hhcGUoLTEsIDIzKQogICAgICAgICAgICByZXN1bHQgPSBzZWxmLm1vZGVsLnByZWRpY3QoZmVhdHMsIHZhbGlkYXRlX2ZlYXR1cmVzPUZhbHNlKQogICAgICAgICAgICByZXR1cm4gcmVzdWx0LnRvbGlzdCgpCiAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAgICByYWlzZSBFeGNlcHRpb24oIkZhaWxlZCB0byBwcmVkaWN0ICVzIiAlIGUpCgoKZnJvbSBtbHJ1bi5ydW50aW1lcyBpbXBvcnQgbnVjbGlvX2luaXRfaG9vawoKCmRlZiBpbml0X2NvbnRleHQoY29udGV4dCk6CiAgICBudWNsaW9faW5pdF9ob29rKGNvbnRleHQsIGdsb2JhbHMoKSwgInNlcnZpbmdfdjIiKQoKCmRlZiBoYW5kbGVyKGNvbnRleHQsIGV2ZW50KToKICAgIHJldHVybiBjb250ZXh0Lm1scnVuX2hhbmRsZXIoY29udGV4dCwgZXZlbnQpCgpmcm9tIG1scnVuLnJ1bnRpbWVzIGltcG9ydCBudWNsaW9faW5pdF9ob29rCmRlZiBpbml0X2NvbnRleHQoY29udGV4dCk6CiAgICBudWNsaW9faW5pdF9ob29rKGNvbnRleHQsIGdsb2JhbHMoKSwgJ3NlcnZpbmdfdjInKQoKZGVmIGhhbmRsZXIoY29udGV4dCwgZXZlbnQpOgogICAgcmV0dXJuIGNvbnRleHQubWxydW5faGFuZGxlcihjb250ZXh0LCBldmVudCkK",
        "noBaseImagesPull": true,
        "baseImage": "mlrun/ml-models:0.8.0-rc7",
        "offline": true,
        "codeEntryType": "sourceCode",
        "timestamp": 1634649015
      },
      "platform": {},
      "serviceType": "NodePort",
      "securityContext": {},
      "scaleToZero": {
        "scaleResources": [
          {
            "metricName": "nuclio_processor_handled_events_total",
            "windowSize": "10m",
            "threshold": 0
          }
        ]
      },
      "eventTimeout": ""
    },
    "status": {
      "state": "error",
      "message": "Traceback (most recent call last):\n  File \"/opt/conda/lib/python3.7/site-packages/mlrun/datastore/datastore.py\", line 141, in get_store_artifact\n    url, db=self._get_db(), secrets=self._secrets, project=project\n  File \"/opt/conda/lib/python3.7/site-packages/mlrun/datastore/store_resources.py\", line 152, in get_store_resource\n    key, project=project, tag=tag or uid, iter=iteration\n  File \"/opt/conda/lib/python3.7/site-packages/mlrun/db/filedb.py\", line 225, in read_artifact\n    raise RunDBError(key)\nmlrun.db.base.RunDBError: current-state_model\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/opt/conda/lib/python3.7/site-packages/mlrun/serving/v2_serving.py\", line 96, in _load_and_update_state\n    self.load()\n  File \"/opt/nuclio/churn_server.py\", line 15, in load\n    clf_model_file, extra_data = self.get_model(\".pkl\")\n  File \"/opt/conda/lib/python3.7/site-packages/mlrun/serving/v2_serving.py\", line 164, in get_model\n    self.model_path, suffix\n  File \"/opt/conda/lib/python3.7/site-packages/mlrun/artifacts/model.py\", line 200, in get_model\n    model_spec, target = store_manager.get_store_artifact(model_dir)\n  File \"/opt/conda/lib/python3.7/site-packages/mlrun/datastore/datastore.py\", line 144, in get_store_artifact\n    raise OSError(f\"artifact {url} not found, {exc}\")\nOSError: artifact store://models/churn-project-admin/current-state_model:eaae138e-439a-47fa-93c6-ba0fe1dc3b79 not found, current-state_model\n [worker_id=\"0\"]\nException raised while running init_context [worker_id=\"0\"]\nCaught unhandled exception while initializing [err=\"failed to load model churn_server_v1, artifact store://models/churn-project-admin/current-state_model:eaae138e-439a-47fa-93c6-ba0fe1dc3b79 not found, current-state_model\" || traceback=\"Traceback (most recent call last):\n  File \"/opt/conda/lib/python3.7/site-packages/mlrun/datastore/datastore.py\", line 141, in get_store_artifact\n    url, db=self._get_db(), secrets=self._secrets, project=project\n  File \"/opt/conda/lib/python3.7/site-packages/mlrun/datastore/store_resources.py\", line 152, in get_store_resource\n    key, project=project, tag=tag or uid, iter=iteration\n  File \"/opt/conda/lib/python3.7/site-packages/mlrun/db/filedb.py\", line 225, in read_artifact\n    raise RunDBError(key)\nmlrun.db.base.RunDBError: current-state_model\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/opt/conda/lib/python3.7/site-packages/mlrun/serving/v2_serving.py\", line 96, in _load_and_update_state\n    self.load()\n  File \"/opt/nuclio/churn_server.py\", line 15, in load\n    clf_model_file, extra_data = self.get_model(\".pkl\")\n  File \"/opt/conda/lib/python3.7/site-packages/mlrun/serving/v2_serving.py\", line 164, in get_model\n    self.model_path, suffix\n  File \"/opt/conda/lib/python3.7/site-packages/mlrun/artifacts/model.py\", line 200, in get_model\n    model_spec, target = store_manager.get_store_artifact(model_dir)\n  File \"/opt/conda/lib/python3.7/site-packages/mlrun/datastore/datastore.py\", line 144, in get_store_artifact\n    raise OSError(f\"artifact {url} not found, {exc}\")\nOSError: artifact store://models/churn-project-admin/current-state_model:eaae138e-439a-47fa-93c6-ba0fe1dc3b79 not found, current-state_model\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/opt/nuclio/_nuclio_wrapper.py\", line 350, in run_wrapper\n    args.trigger_name)\n  File \"/opt/nuclio/_nuclio_wrapper.py\", line 80, in __init__\n    getattr(entrypoint_module, 'init_context')(self._context)\n  File \"/opt/nuclio/churn_server.py\", line 45, in init_context\n    nuclio_init_hook(context, globals(), 'serving_v2')\n  File \"/opt/conda/lib/python3.7/site-packages/mlrun/runtimes/nuclio.py\", line 31, in nuclio_init_hook\n    v2_serving_init(context, data)\n  File \"/opt/conda/lib/python3.7/site-packages/mlrun/serving/server.py\", line 286, in v2_serving_init\n    serving_handler = server.init_object(namespace or get_caller_globals())\n  File \"/opt/conda/lib/python3.7/site-packages/mlrun/serving/server.py\", line 172, in init_object\n    self.graph.init_object(self.context, namespace, self.load_mode, reset=True)\n  File \"/opt/conda/lib/python3.7/site-packages/mlrun/serving/states.py\", line 550, in init_object\n    route.init_object(context, namespace, mode, reset=reset)\n  File \"/opt/conda/lib/python3.7/site-packages/mlrun/serving/states.py\", line 403, in init_object\n    self._post_init(mode)\n  File \"/opt/conda/lib/python3.7/site-packages/mlrun/serving/states.py\", line 428, in _post_init\n    self._object.post_init(mode)\n  File \"/opt/conda/lib/python3.7/site-packages/mlrun/serving/v2_serving.py\", line 112, in post_init\n    self._load_and_update_state()\n  File \"/opt/conda/lib/python3.7/site-packages/mlrun/serving/v2_serving.py\", line 100, in _load_and_update_state\n    raise RuntimeError(f\"failed to load model {self.name}, {exc}\")\nRuntimeError: failed to load model churn_server_v1, artifact store://models/churn-project-admin/current-state_model:eaae138e-439a-47fa-93c6-ba0fe1dc3b79 not found, current-state_model\n\" || worker_id=\"0\"]"
    }
  },
  "churn-project-admin-test-m-2": {
    "metadata": {
      "name": "churn-project-admin-test-m-2",
      "namespace": "default-tenant",
      "labels": {
        "mlrun/class": "serving",
        "nuclio.io/project-name": "churn-project-admin"
      },
      "resourceVersion": "19944591"
    },
    "spec": {
      "handler": "main:handler",
      "runtime": "python:3.6",
      "env": [
        {
          "name": "MLRUN_DEFAULT_PROJECT",
          "value": "churn-project-admin"
        },
        {
          "name": "MLRUN_DBPATH",
          "value": "./"
        },
        {
          "name": "MLRUN_NAMESPACE",
          "value": "default-tenant"
        },
        {
          "name": "SERVING_SPEC_ENV",
          "value": "{\"function_uri\": \"churn-project-admin/test-m-2\", \"version\": \"v2\", \"parameters\": {}, \"graph\": {}, \"load_mode\": null, \"functions\": {}, \"graph_initializer\": null, \"error_stream\": null, \"track_models\": null, \"default_content_type\": null}"
        }
      ],
      "resources": {},
      "imageHash": "1631715627572092213",
      "minReplicas": 1,
      "maxReplicas": 4,
      "triggers": {
        "default-http": {
          "class": "",
          "kind": "http",
          "name": "default-http",
          "maxWorkers": 1,
          "attributes": {
            "serviceType": "NodePort"
          }
        }
      },
      "alias": "latest",
      "build": {
        "functionSourceCode": "ZnJvbSBjbG91ZHBpY2tsZSBpbXBvcnQgbG9hZAppbXBvcnQgbnVtcHkgYXMgbnAKZnJvbSB0eXBpbmcgaW1wb3J0IExpc3QKaW1wb3J0IG1scnVuCgpjbGFzcyBDbGFzc2lmaWVyTW9kZWwobWxydW4uc2VydmluZy5WMk1vZGVsU2VydmVyKToKICAgIGRlZiBsb2FkKHNlbGYpOgogICAgICAgICIiImxvYWQgYW5kIGluaXRpYWxpemUgdGhlIG1vZGVsIGFuZC9vciBvdGhlciBlbGVtZW50cyIiIgogICAgICAgIG1vZGVsX2ZpbGUsIGV4dHJhX2RhdGEgPSBzZWxmLmdldF9tb2RlbCgnLnBrbCcpCiAgICAgICAgc2VsZi5tb2RlbCA9IGxvYWQob3Blbihtb2RlbF9maWxlLCAncmInKSkKCiAgICBkZWYgcHJlZGljdChzZWxmLCBib2R5OiBkaWN0KSAtPiBMaXN0OgogICAgICAgICIiIkdlbmVyYXRlIG1vZGVsIHByZWRpY3Rpb25zIGZyb20gc2FtcGxlLiIiIgogICAgICAgIGZlYXRzID0gbnAuYXNhcnJheShib2R5WydpbnB1dHMnXSkKICAgICAgICByZXN1bHQ6IG5wLm5kYXJyYXkgPSBzZWxmLm1vZGVsLnByZWRpY3QoZmVhdHMpCiAgICAgICAgcmV0dXJuIHJlc3VsdC50b2xpc3QoKQ==",
        "noBaseImagesPull": true,
        "baseImage": "mlrun/mlrun:unstable",
        "offline": true,
        "codeEntryType": "sourceCode",
        "timestamp": 1631715627
      },
      "platform": {},
      "serviceType": "NodePort",
      "securityContext": {},
      "scaleToZero": {
        "scaleResources": [
          {
            "metricName": "nuclio_processor_handled_events_total",
            "windowSize": "10m",
            "threshold": 0
          }
        ]
      },
      "eventTimeout": ""
    },
    "status": {
      "state": "error",
      "message": "Handler not found [handler=\"main:handler\" || worker_id=\"0\"]\nCaught unhandled exception while initializing [err=\"module 'main' has no attribute 'handler'\" || traceback=\"Traceback (most recent call last):\n  File \"/opt/nuclio/_nuclio_wrapper.py\", line 350, in run_wrapper\n    args.trigger_name)\n  File \"/opt/nuclio/_nuclio_wrapper.py\", line 57, in __init__\n    self._entrypoint = self._load_entrypoint_from_handler(handler)\n  File \"/opt/nuclio/_nuclio_wrapper.py\", line 164, in _load_entrypoint_from_handler\n    entrypoint_address = getattr(module, entrypoint)\nAttributeError: module 'main' has no attribute 'handler'\n\" || worker_id=\"0\"]"
    }
  },
  "churn-project-admin-testm-3": {
    "metadata": {
      "name": "churn-project-admin-testm-3",
      "namespace": "default-tenant",
      "labels": {
        "mlrun/class": "serving",
        "nuclio.io/project-name": "churn-project-admin"
      },
      "resourceVersion": "19945156"
    },
    "spec": {
      "handler": "main:handler",
      "runtime": "python:3.6",
      "env": [
        {
          "name": "MLRUN_DEFAULT_PROJECT",
          "value": "churn-project-admin"
        },
        {
          "name": "MLRUN_DBPATH",
          "value": "./"
        },
        {
          "name": "MLRUN_NAMESPACE",
          "value": "default-tenant"
        },
        {
          "name": "SERVING_SPEC_ENV",
          "value": "{\"function_uri\": \"churn-project-admin/testm-3\", \"version\": \"v2\", \"parameters\": {}, \"graph\": {}, \"load_mode\": null, \"functions\": {}, \"graph_initializer\": null, \"error_stream\": null, \"track_models\": null, \"default_content_type\": null}"
        }
      ],
      "resources": {},
      "imageHash": "1631715775617595685",
      "minReplicas": 1,
      "maxReplicas": 4,
      "triggers": {
        "default-http": {
          "class": "",
          "kind": "http",
          "name": "default-http",
          "maxWorkers": 1,
          "attributes": {
            "serviceType": "NodePort"
          }
        }
      },
      "alias": "latest",
      "build": {
        "functionSourceCode": "ZnJvbSBjbG91ZHBpY2tsZSBpbXBvcnQgbG9hZAppbXBvcnQgbnVtcHkgYXMgbnAKZnJvbSB0eXBpbmcgaW1wb3J0IExpc3QKaW1wb3J0IG1scnVuCgpjbGFzcyBDbGFzc2lmaWVyTW9kZWwobWxydW4uc2VydmluZy5WMk1vZGVsU2VydmVyKToKICAgIGRlZiBsb2FkKHNlbGYpOgogICAgICAgICIiImxvYWQgYW5kIGluaXRpYWxpemUgdGhlIG1vZGVsIGFuZC9vciBvdGhlciBlbGVtZW50cyIiIgogICAgICAgIG1vZGVsX2ZpbGUsIGV4dHJhX2RhdGEgPSBzZWxmLmdldF9tb2RlbCgnLnBrbCcpCiAgICAgICAgc2VsZi5tb2RlbCA9IGxvYWQob3Blbihtb2RlbF9maWxlLCAncmInKSkKCiAgICBkZWYgcHJlZGljdChzZWxmLCBib2R5OiBkaWN0KSAtPiBMaXN0OgogICAgICAgICIiIkdlbmVyYXRlIG1vZGVsIHByZWRpY3Rpb25zIGZyb20gc2FtcGxlLiIiIgogICAgICAgIGZlYXRzID0gbnAuYXNhcnJheShib2R5WydpbnB1dHMnXSkKICAgICAgICByZXN1bHQ6IG5wLm5kYXJyYXkgPSBzZWxmLm1vZGVsLnByZWRpY3QoZmVhdHMpCiAgICAgICAgcmV0dXJuIHJlc3VsdC50b2xpc3QoKQ==",
        "noBaseImagesPull": true,
        "baseImage": "mlrun/mlrun:unstable",
        "offline": true,
        "codeEntryType": "sourceCode",
        "timestamp": 1631715775
      },
      "platform": {},
      "serviceType": "NodePort",
      "securityContext": {},
      "scaleToZero": {
        "scaleResources": [
          {
            "metricName": "nuclio_processor_handled_events_total",
            "windowSize": "10m",
            "threshold": 0
          }
        ]
      },
      "eventTimeout": ""
    },
    "status": {
      "state": "error",
      "message": "Handler not found [handler=\"main:handler\" || worker_id=\"0\"]\nCaught unhandled exception while initializing [err=\"module 'main' has no attribute 'handler'\" || traceback=\"Traceback (most recent call last):\n  File \"/opt/nuclio/_nuclio_wrapper.py\", line 350, in run_wrapper\n    args.trigger_name)\n  File \"/opt/nuclio/_nuclio_wrapper.py\", line 57, in __init__\n    self._entrypoint = self._load_entrypoint_from_handler(handler)\n  File \"/opt/nuclio/_nuclio_wrapper.py\", line 164, in _load_entrypoint_from_handler\n    entrypoint_address = getattr(module, entrypoint)\nAttributeError: module 'main' has no attribute 'handler'\n\" || worker_id=\"0\"]"
    }
  },
  "default-d": {
    "metadata": {
      "name": "default-d",
      "namespace": "default-tenant",
      "labels": {
        "mlrun/class": "serving",
        "nuclio.io/project-name": "default",
        "mlrun__type": "mlrun__model-monitoring-application"
      },
      "resourceVersion": "30099716"
    },
    "spec": {
      "handler": "main:handler",
      "runtime": "python:3.6",
      "env": [
        {
          "name": "MLRUN_DEFAULT_PROJECT",
          "value": "default"
        },
        {
          "name": "MLRUN_DBPATH",
          "value": "./"
        },
        {
          "name": "MLRUN_NAMESPACE",
          "value": "default-tenant"
        },
        {
          "name": "MLRUN_AUTH_SESSION",
          "value": "$generate"
        },
        {
          "name": "SERVING_SPEC_ENV",
          "value": "{\"function_uri\": \"default/d\", \"version\": \"v2\", \"parameters\": {}, \"graph\": {}, \"load_mode\": null, \"functions\": {}, \"graph_initializer\": null, \"error_stream\": null, \"track_models\": null, \"default_content_type\": null}"
        },
        {
          "name": "MLRUN_K8S_SECRET__123",
          "valueFrom": {
            "secretKeyRef": {
              "name": "mlrun-project-secrets-default",
              "key": "123"
            }
          }
        },
        {
          "name": "MLRUN_K8S_SECRET__2",
          "valueFrom": {
            "secretKeyRef": {
              "name": "mlrun-project-secrets-default",
              "key": "2"
            }
          }
        },
        {
          "name": "MLRUN_K8S_SECRET__A",
          "valueFrom": {
            "secretKeyRef": {
              "name": "mlrun-project-secrets-default",
              "key": "a"
            }
          }
        },
        {
          "name": "MLRUN_K8S_SECRET__B",
          "valueFrom": {
            "secretKeyRef": {
              "name": "mlrun-project-secrets-default",
              "key": "b"
            }
          }
        }
      ],
      "resources": {},
      "imageHash": "1634733876259467536",
      "minReplicas": 1,
      "maxReplicas": 4,
      "triggers": {
        "default-http": {
          "class": "",
          "kind": "http",
          "name": "default-http",
          "maxWorkers": 1,
          "attributes": {
            "serviceType": "NodePort"
          }
        }
      },
      "alias": "latest",
      "build": {
        "functionSourceCode": "ZnJvbSBjbG91ZHBpY2tsZSBpbXBvcnQgbG9hZAppbXBvcnQgbnVtcHkgYXMgbnAKZnJvbSB0eXBpbmcgaW1wb3J0IExpc3QKaW1wb3J0IG1scnVuCgpjbGFzcyBDbGFzc2lmaWVyTW9kZWwobWxydW4uc2VydmluZy5WMk1vZGVsU2VydmVyKToKICAgIGRlZiBsb2FkKHNlbGYpOgogICAgICAgICIiImxvYWQgYW5kIGluaXRpYWxpemUgdGhlIG1vZGVsIGFuZC9vciBvdGhlciBlbGVtZW50cyIiIgogICAgICAgIG1vZGVsX2ZpbGUsIGV4dHJhX2RhdGEgPSBzZWxmLmdldF9tb2RlbCgnLnBrbCcpCiAgICAgICAgc2VsZi5tb2RlbCA9IGxvYWQob3Blbihtb2RlbF9maWxlLCAncmInKSkKCiAgICBkZWYgcHJlZGljdChzZWxmLCBib2R5OiBkaWN0KSAtPiBMaXN0OgogICAgICAgICIiIkdlbmVyYXRlIG1vZGVsIHByZWRpY3Rpb25zIGZyb20gc2FtcGxlLiIiIgogICAgICAgIGZlYXRzID0gbnAuYXNhcnJheShib2R5WydpbnB1dHMnXSkKICAgICAgICByZXN1bHQ6IG5wLm5kYXJyYXkgPSBzZWxmLm1vZGVsLnByZWRpY3QoZmVhdHMpCiAgICAgICAgcmV0dXJuIHJlc3VsdC50b2xpc3QoKQ==",
        "noBaseImagesPull": true,
        "baseImage": "mlrun/mlrun:0.8.0-rc7",
        "offline": true,
        "codeEntryType": "sourceCode",
        "timestamp": 1634733876
      },
      "platform": {},
      "serviceType": "NodePort",
      "securityContext": {},
      "scaleToZero": {
        "scaleResources": [
          {
            "metricName": "nuclio_processor_handled_events_total",
            "windowSize": "10m",
            "threshold": 0
          }
        ]
      },
      "eventTimeout": ""
    },
    "status": {
      "state": "error",
      "message": "Handler not found [handler=\"main:handler\" || worker_id=\"0\"]\nCaught unhandled exception while initializing [err=\"module 'main' has no attribute 'handler'\" || traceback=\"Traceback (most recent call last):\n  File \"/opt/nuclio/_nuclio_wrapper.py\", line 350, in run_wrapper\n    args.trigger_name)\n  File \"/opt/nuclio/_nuclio_wrapper.py\", line 57, in __init__\n    self._entrypoint = self._load_entrypoint_from_handler(handler)\n  File \"/opt/nuclio/_nuclio_wrapper.py\", line 164, in _load_entrypoint_from_handler\n    entrypoint_address = getattr(module, entrypoint)\nAttributeError: module 'main' has no attribute 'handler'\n\" || worker_id=\"0\"]"
    }
  },
  "default-das": {
    "metadata": {
      "name": "default-das",
      "namespace": "default-tenant",
      "labels": {
        "mlrun/class": "serving",
        "nuclio.io/project-name": "default"
      },
      "resourceVersion": "23622892"
    },
    "spec": {
      "handler": "main:handler",
      "runtime": "python:3.6",
      "env": [
        {
          "name": "MLRUN_DEFAULT_PROJECT",
          "value": "default"
        },
        {
          "name": "MLRUN_DBPATH",
          "value": "http://mlrun-api:8080"
        },
        {
          "name": "MLRUN_NAMESPACE",
          "value": "default-tenant"
        },
        {
          "name": "SERVING_SPEC_ENV",
          "value": "{\"function_uri\": \"default/das\", \"version\": \"v2\", \"parameters\": {\"a\": \"bdsa\", \"ehhh\": \"dsa\"}, \"graph\": {}, \"load_mode\": null, \"functions\": {}, \"graph_initializer\": null, \"error_stream\": null, \"track_models\": null, \"default_content_type\": null}"
        }
      ],
      "resources": {},
      "imageHash": "1632823584115322276",
      "minReplicas": 1,
      "maxReplicas": 4,
      "triggers": {
        "default-http": {
          "class": "",
          "kind": "http",
          "name": "default-http",
          "maxWorkers": 1,
          "attributes": {
            "serviceType": "NodePort"
          }
        }
      },
      "alias": "latest",
      "build": {
        "functionSourceCode": "ZnJvbSBjbG91ZHBpY2tsZSBpbXBvcnQgbG9hZAppbXBvcnQgbnVtcHkgYXMgbnAKZnJvbSB0eXBpbmcgaW1wb3J0IExpc3QKaW1wb3J0IG1scnVuCgpjbGFzcyBDbGFzc2lmaWVyTW9kZWwobWxydW4uc2VydmluZy5WMk1vZGVsU2VydmVyKToKICAgIGRlZiBsb2FkKHNlbGYpOgogICAgICAgICIiImxvYWQgYW5kIGluaXRpYWxpemUgdGhlIG1vZGVsIGFuZC9vciBvdGhlciBlbGVtZW50cyIiIgogICAgICAgIG1vZGVsX2ZpbGUsIGV4dHJhX2RhdGEgPSBzZWxmLmdldF9tb2RlbCgnLnBrbCcpCiAgICAgICAgc2VsZi5tb2RlbCA9IGxvYWQob3Blbihtb2RlbF9maWxlLCAncmInKSkKCiAgICBkZWYgcHJlZGljdChzZWxmLCBib2R5OiBkaWN0KSAtPiBMaXN0OgogICAgICAgICIiIkdlbmVyYXRlIG1vZGVsIHByZWRpY3Rpb25zIGZyb20gc2FtcGxlLiIiIgogICAgICAgIGZlYXRzID0gbnAuYXNhcnJheShib2R5WydpbnB1dHMnXSkKICAgICAgICByZXN1bHQ6IG5wLm5kYXJyYXkgPSBzZWxmLm1vZGVsLnByZWRpY3QoZmVhdHMpCiAgICAgICAgcmV0dXJuIHJlc3VsdC50b2xpc3QoKQ==",
        "noBaseImagesPull": true,
        "baseImage": "mlrun/mlrun:unstable",
        "offline": true,
        "codeEntryType": "sourceCode",
        "timestamp": 1632823584
      },
      "platform": {},
      "serviceType": "NodePort",
      "securityContext": {},
      "scaleToZero": {
        "scaleResources": [
          {
            "metricName": "nuclio_processor_handled_events_total",
            "windowSize": "10m",
            "threshold": 0
          }
        ]
      },
      "eventTimeout": ""
    },
    "status": {
      "state": "error",
      "message": "> 2021-09-28 10:06:33,679 [warning] Unable to parse server or client version. Assuming compatible: {'server_version': 'unstable', 'client_version': 'unstable'}\nHandler not found [handler=\"main:handler\" || worker_id=\"0\"]\nCaught unhandled exception while initializing [err=\"module 'main' has no attribute 'handler'\" || traceback=\"Traceback (most recent call last):\n  File \"/opt/nuclio/_nuclio_wrapper.py\", line 350, in run_wrapper\n    args.trigger_name)\n  File \"/opt/nuclio/_nuclio_wrapper.py\", line 57, in __init__\n    self._entrypoint = self._load_entrypoint_from_handler(handler)\n  File \"/opt/nuclio/_nuclio_wrapper.py\", line 164, in _load_entrypoint_from_handler\n    entrypoint_address = getattr(module, entrypoint)\nAttributeError: module 'main' has no attribute 'handler'\n\" || worker_id=\"0\"]"
    }
  },
  "default-ds": {
    "metadata": {
      "name": "default-ds",
      "namespace": "default-tenant",
      "labels": {
        "mlrun/class": "serving",
        "nuclio.io/project-name": "default"
      },
      "resourceVersion": "23312008"
    },
    "spec": {
      "handler": "main:handler",
      "runtime": "python:3.6",
      "env": [
        {
          "name": "MLRUN_DEFAULT_PROJECT",
          "value": "default"
        },
        {
          "name": "MLRUN_DBPATH",
          "value": "http://mlrun-api:8080"
        },
        {
          "name": "MLRUN_NAMESPACE",
          "value": "default-tenant"
        },
        {
          "name": "SERVING_SPEC_ENV",
          "value": "{\"function_uri\": \"default/ds\", \"version\": \"v2\", \"parameters\": {}, \"graph\": {}, \"load_mode\": null, \"functions\": {}, \"graph_initializer\": null, \"error_stream\": null, \"track_models\": null, \"default_content_type\": null}"
        }
      ],
      "resources": {},
      "imageHash": "1632730457878661802",
      "minReplicas": 1,
      "maxReplicas": 4,
      "triggers": {
        "default-http": {
          "class": "",
          "kind": "http",
          "name": "default-http",
          "maxWorkers": 1,
          "attributes": {
            "serviceType": "NodePort"
          }
        }
      },
      "alias": "latest",
      "build": {
        "functionSourceCode": "ZnJvbSBjbG91ZHBpY2tsZSBpbXBvcnQgbG9hZAppbXBvcnQgbnVtcHkgYXMgbnAKZnJvbSB0eXBpbmcgaW1wb3J0IExpc3QKaW1wb3J0IG1scnVuCgpjbGFzcyBDbGFzc2lmaWVyTW9kZWwobWxydW4uc2VydmluZy5WMk1vZGVsU2VydmVyKToKICAgIGRlZiBsb2FkKHNlbGYpOgogICAgICAgICIiImxvYWQgYW5kIGluaXRpYWxpemUgdGhlIG1vZGVsIGFuZC9vciBvdGhlciBlbGVtZW50cyIiIgogICAgICAgIG1vZGVsX2ZpbGUsIGV4dHJhX2RhdGEgPSBzZWxmLmdldF9tb2RlbCgnLnBrbCcpCiAgICAgICAgc2VsZi5tb2RlbCA9IGxvYWQob3Blbihtb2RlbF9maWxlLCAncmInKSkKCiAgICBkZWYgcHJlZGljdChzZWxmLCBib2R5OiBkaWN0KSAtPiBMaXN0OgogICAgICAgICIiIkdlbmVyYXRlIG1vZGVsIHByZWRpY3Rpb25zIGZyb20gc2FtcGxlLiIiIgogICAgICAgIGZlYXRzID0gbnAuYXNhcnJheShib2R5WydpbnB1dHMnXSkKICAgICAgICByZXN1bHQ6IG5wLm5kYXJyYXkgPSBzZWxmLm1vZGVsLnByZWRpY3QoZmVhdHMpCiAgICAgICAgcmV0dXJuIHJlc3VsdC50b2xpc3QoKQ==",
        "noBaseImagesPull": true,
        "baseImage": "mlrun/mlrun:unstable",
        "offline": true,
        "codeEntryType": "sourceCode",
        "timestamp": 1632730457
      },
      "platform": {},
      "serviceType": "NodePort",
      "securityContext": {},
      "scaleToZero": {
        "scaleResources": [
          {
            "metricName": "nuclio_processor_handled_events_total",
            "windowSize": "10m",
            "threshold": 0
          }
        ]
      },
      "eventTimeout": ""
    },
    "status": {
      "state": "error",
      "message": "> 2021-09-27 08:14:26,903 [warning] Unable to parse server or client version. Assuming compatible: {'server_version': 'unstable', 'client_version': 'unstable'}\nHandler not found [handler=\"main:handler\" || worker_id=\"0\"]\nCaught unhandled exception while initializing [err=\"module 'main' has no attribute 'handler'\" || traceback=\"Traceback (most recent call last):\n  File \"/opt/nuclio/_nuclio_wrapper.py\", line 350, in run_wrapper\n    args.trigger_name)\n  File \"/opt/nuclio/_nuclio_wrapper.py\", line 57, in __init__\n    self._entrypoint = self._load_entrypoint_from_handler(handler)\n  File \"/opt/nuclio/_nuclio_wrapper.py\", line 164, in _load_entrypoint_from_handler\n    entrypoint_address = getattr(module, entrypoint)\nAttributeError: module 'main' has no attribute 'handler'\n\" || worker_id=\"0\"]"
    }
  },
  "default-efrt": {
    "metadata": {
      "name": "default-efrt",
      "namespace": "default-tenant",
      "labels": {
        "mlrun/class": "serving",
        "nuclio.io/project-name": "default"
      },
      "resourceVersion": "23641783"
    },
    "spec": {
      "handler": "main:handler",
      "runtime": "python:3.6",
      "env": [
        {
          "name": "MLRUN_DEFAULT_PROJECT",
          "value": "default"
        },
        {
          "name": "MLRUN_DBPATH",
          "value": "http://mlrun-api:8080"
        },
        {
          "name": "MLRUN_NAMESPACE",
          "value": "default-tenant"
        },
        {
          "name": "SERVING_SPEC_ENV",
          "value": "{\"function_uri\": \"default/efrt\", \"version\": \"v2\", \"parameters\": {}, \"graph\": {}, \"load_mode\": null, \"functions\": {}, \"graph_initializer\": null, \"error_stream\": null, \"track_models\": null, \"default_content_type\": null}"
        }
      ],
      "resources": {},
      "imageHash": "1632829201725201063",
      "minReplicas": 1,
      "maxReplicas": 4,
      "triggers": {
        "default-http": {
          "class": "",
          "kind": "http",
          "name": "default-http",
          "maxWorkers": 1,
          "attributes": {
            "serviceType": "NodePort"
          }
        }
      },
      "alias": "latest",
      "build": {
        "functionSourceCode": "ZnJvbSBjbG91ZHBpY2tsZSBpbXBvcnQgbG9hZAppbXBvcnQgbnVtcHkgYXMgbnAKZnJvbSB0eXBpbmcgaW1wb3J0IExpc3QKaW1wb3J0IG1scnVuCgpjbGFzcyBDbGFzc2lmaWVyTW9kZWwobWxydW4uc2VydmluZy5WMk1vZGVsU2VydmVyKToKICAgIGRlZiBsb2FkKHNlbGYpOgogICAgICAgICIiImxvYWQgYW5kIGluaXRpYWxpemUgdGhlIG1vZGVsIGFuZC9vciBvdGhlciBlbGVtZW50cyIiIgogICAgICAgIG1vZGVsX2ZpbGUsIGV4dHJhX2RhdGEgPSBzZWxmLmdldF9tb2RlbCgnLnBrbCcpCiAgICAgICAgc2VsZi5tb2RlbCA9IGxvYWQob3Blbihtb2RlbF9maWxlLCAncmInKSkKCiAgICBkZWYgcHJlZGljdChzZWxmLCBib2R5OiBkaWN0KSAtPiBMaXN0OgogICAgICAgICIiIkdlbmVyYXRlIG1vZGVsIHByZWRpY3Rpb25zIGZyb20gc2FtcGxlLiIiIgogICAgICAgIGZlYXRzID0gbnAuYXNhcnJheShib2R5WydpbnB1dHMnXSkKICAgICAgICByZXN1bHQ6IG5wLm5kYXJyYXkgPSBzZWxmLm1vZGVsLnByZWRpY3QoZmVhdHMpCiAgICAgICAgcmV0dXJuIHJlc3VsdC50b2xpc3QoKQ==",
        "noBaseImagesPull": true,
        "baseImage": "mlrun/mlrun:unstable",
        "offline": true,
        "codeEntryType": "sourceCode",
        "timestamp": 1632829201
      },
      "platform": {},
      "serviceType": "NodePort",
      "securityContext": {},
      "scaleToZero": {
        "scaleResources": [
          {
            "metricName": "nuclio_processor_handled_events_total",
            "windowSize": "10m",
            "threshold": 0
          }
        ]
      },
      "eventTimeout": ""
    },
    "status": {
      "state": "error",
      "message": "> 2021-09-28 11:40:10,904 [warning] Unable to parse server or client version. Assuming compatible: {'server_version': 'unstable', 'client_version': 'unstable'}\nHandler not found [handler=\"main:handler\" || worker_id=\"0\"]\nCaught unhandled exception while initializing [err=\"module 'main' has no attribute 'handler'\" || traceback=\"Traceback (most recent call last):\n  File \"/opt/nuclio/_nuclio_wrapper.py\", line 350, in run_wrapper\n    args.trigger_name)\n  File \"/opt/nuclio/_nuclio_wrapper.py\", line 57, in __init__\n    self._entrypoint = self._load_entrypoint_from_handler(handler)\n  File \"/opt/nuclio/_nuclio_wrapper.py\", line 164, in _load_entrypoint_from_handler\n    entrypoint_address = getattr(module, entrypoint)\nAttributeError: module 'main' has no attribute 'handler'\n\" || worker_id=\"0\"]"
    }
  },
  "default-erann-serving": {
    "metadata": {
      "name": "default-erann-serving",
      "namespace": "default-tenant",
      "labels": {
        "mlrun/class": "serving",
        "nuclio.io/project-name": "default"
      },
      "resourceVersion": "19944957"
    },
    "spec": {
      "handler": "main:handler",
      "runtime": "python:3.6",
      "env": [
        {
          "name": "MLRUN_DEFAULT_PROJECT",
          "value": "default"
        },
        {
          "name": "MLRUN_DBPATH",
          "value": "./"
        },
        {
          "name": "MLRUN_NAMESPACE",
          "value": "default-tenant"
        },
        {
          "name": "SERVING_SPEC_ENV",
          "value": "{\"function_uri\": \"default/erann-serving\", \"version\": \"v2\", \"parameters\": {}, \"graph\": {}, \"load_mode\": null, \"functions\": {}, \"graph_initializer\": null, \"error_stream\": null, \"track_models\": null, \"default_content_type\": null}"
        }
      ],
      "resources": {},
      "imageHash": "1631715730956998887",
      "minReplicas": 1,
      "maxReplicas": 4,
      "triggers": {
        "default-http": {
          "class": "",
          "kind": "http",
          "name": "default-http",
          "maxWorkers": 1,
          "attributes": {
            "serviceType": "NodePort"
          }
        }
      },
      "alias": "latest",
      "build": {
        "functionSourceCode": "ZnJvbSBjbG91ZHBpY2tsZSBpbXBvcnQgbG9hZAppbXBvcnQgbnVtcHkgYXMgbnAKZnJvbSB0eXBpbmcgaW1wb3J0IExpc3QKaW1wb3J0IG1scnVuCgpjbGFzcyBDbGFzc2lmaWVyTW9kZWwobWxydW4uc2VydmluZy5WMk1vZGVsU2VydmVyKToKICAgIGRlZiBsb2FkKHNlbGYpOgogICAgICAgICIiImxvYWQgYW5kIGluaXRpYWxpemUgdGhlIG1vZGVsIGFuZC9vciBvdGhlciBlbGVtZW50cyIiIgogICAgICAgIG1vZGVsX2ZpbGUsIGV4dHJhX2RhdGEgPSBzZWxmLmdldF9tb2RlbCgnLnBrbCcpCiAgICAgICAgc2VsZi5tb2RlbCA9IGxvYWQob3Blbihtb2RlbF9maWxlLCAncmInKSkKCiAgICBkZWYgcHJlZGljdChzZWxmLCBib2R5OiBkaWN0KSAtPiBMaXN0OgogICAgICAgICIiIkdlbmVyYXRlIG1vZGVsIHByZWRpY3Rpb25zIGZyb20gc2FtcGxlLiIiIgogICAgICAgIGZlYXRzID0gbnAuYXNhcnJheShib2R5WydpbnB1dHMnXSkKICAgICAgICByZXN1bHQ6IG5wLm5kYXJyYXkgPSBzZWxmLm1vZGVsLnByZWRpY3QoZmVhdHMpCiAgICAgICAgcmV0dXJuIHJlc3VsdC50b2xpc3QoKQ==",
        "noBaseImagesPull": true,
        "baseImage": "mlrun/mlrun:unstable",
        "offline": true,
        "codeEntryType": "sourceCode",
        "timestamp": 1631715730
      },
      "platform": {},
      "serviceType": "NodePort",
      "securityContext": {},
      "scaleToZero": {
        "scaleResources": [
          {
            "metricName": "nuclio_processor_handled_events_total",
            "windowSize": "10m",
            "threshold": 0
          }
        ]
      },
      "eventTimeout": ""
    },
    "status": {
      "state": "error",
      "message": "Handler not found [handler=\"main:handler\" || worker_id=\"0\"]\nCaught unhandled exception while initializing [err=\"module 'main' has no attribute 'handler'\" || traceback=\"Traceback (most recent call last):\n  File \"/opt/nuclio/_nuclio_wrapper.py\", line 350, in run_wrapper\n    args.trigger_name)\n  File \"/opt/nuclio/_nuclio_wrapper.py\", line 57, in __init__\n    self._entrypoint = self._load_entrypoint_from_handler(handler)\n  File \"/opt/nuclio/_nuclio_wrapper.py\", line 164, in _load_entrypoint_from_handler\n    entrypoint_address = getattr(module, entrypoint)\nAttributeError: module 'main' has no attribute 'handler'\n\" || worker_id=\"0\"]"
    }
  },
  "fsdemo-admin-ingest": {
    "metadata": {
      "name": "fsdemo-admin-ingest",
      "namespace": "default-tenant",
      "labels": {
        "mlrun/class": "serving",
        "nuclio.io/project-name": "fsdemo-admin"
      },
      "annotations": {
        "nuclio.io/generated_by": "function generated from https://github.com/mlrun/mlrun.git#4b8d0f942a52aebf5a50c430bbdb8b3823af87ed:ingest.ipynb"
      },
      "resourceVersion": "37858326"
    },
    "spec": {
      "handler": "01-ingest-datasources:handler",
      "runtime": "python:3.6",
      "env": [
        {
          "name": "V3IO_API",
          "value": "v3io-webapi.default-tenant.svc:8081"
        },
        {
          "name": "V3IO_USERNAME",
          "value": "admin"
        },
        {
          "name": "V3IO_ACCESS_KEY",
          "value": "b7242e47-a051-4ec3-8384-5f99a26c1451"
        },
        {
          "name": "V3IO_FRAMESD",
          "value": "framesd:8081"
        },
        {
          "name": "MLRUN_DEFAULT_PROJECT",
          "value": "fsdemo-admin"
        },
        {
          "name": "MLRUN_DBPATH",
          "value": "http://mlrun-api:8080"
        },
        {
          "name": "MLRUN_NAMESPACE",
          "value": "default-tenant"
        },
        {
          "name": "SERVING_SPEC_ENV",
          "value": "{\"function_uri\": \"fsdemo-admin/ingest\", \"version\": \"v2\", \"parameters\": {\"infer_options\": 0, \"featureset\": \"store://feature-sets/fsdemo-admin/early_sense\", \"source\": {\"kind\": \"http\", \"key_field\": \"patient_id\", \"time_field\": \"timestamp\", \"online\": true}}, \"graph\": {\"steps\": {\"DropColumns\": {\"kind\": \"task\", \"class_name\": \"DropColumns\", \"class_args\": {\"columns\": [\"hr_is_error\", \"rr_is_error\", \"spo2_is_error\", \"movements_is_error\", \"turn_count_is_error\", \"is_in_bed_is_error\"]}}, \"RenameColumns\": {\"kind\": \"task\", \"class_name\": \"RenameColumns\", \"class_args\": {\"mapping\": {\"bad\": \"bed\"}}, \"after\": [\"DropColumns\"]}, \"Aggregates\": {\"kind\": \"task\", \"class_name\": \"storey.AggregateByKey\", \"class_args\": {\"aggregates\": [{\"name\": \"hr_h\", \"column\": \"hr\", \"operations\": [\"avg\", \"max\", \"min\"], \"windows\": [\"1h\"]}, {\"name\": \"hr_d\", \"column\": \"hr\", \"operations\": [\"avg\", \"max\", \"min\"], \"windows\": [\"1d\"]}, {\"name\": \"rr_h\", \"column\": \"rr\", \"operations\": [\"avg\", \"max\", \"min\"], \"windows\": [\"1h\"]}, {\"name\": \"rr_d\", \"column\": \"rr\", \"operations\": [\"avg\", \"max\", \"min\"], \"windows\": [\"1d\"]}, {\"name\": \"spo2_h\", \"column\": \"spo2\", \"operations\": [\"avg\", \"max\", \"min\"], \"windows\": [\"1h\"]}, {\"name\": \"spo2_d\", \"column\": \"spo2\", \"operations\": [\"avg\", \"max\", \"min\"], \"windows\": [\"1d\"]}, {\"name\": \"movements_h\", \"column\": \"movements\", \"operations\": [\"avg\", \"max\", \"min\"], \"windows\": [\"1h\"]}, {\"name\": \"movements_d\", \"column\": \"movements\", \"operations\": [\"avg\", \"max\", \"min\"], \"windows\": [\"1d\"]}, {\"name\": \"turn_count_h\", \"column\": \"turn_count\", \"operations\": [\"avg\", \"max\", \"min\"], \"windows\": [\"1h\"]}, {\"name\": \"turn_count_d\", \"column\": \"turn_count\", \"operations\": [\"avg\", \"max\", \"min\"], \"windows\": [\"1d\"]}, {\"name\": \"in_bed_h\", \"column\": \"is_in_bed\", \"operations\": [\"avg\"], \"windows\": [\"1h\"]}, {\"name\": \"in_bed_d\", \"column\": \"is_in_bed\", \"operations\": [\"avg\"], \"windows\": [\"1d\"]}], \"table\": \".\"}, \"after\": [\"RenameColumns\"]}}}, \"load_mode\": null, \"functions\": {}, \"graph_initializer\": \"mlrun.feature_store.ingestion.featureset_initializer\", \"error_stream\": null, \"track_models\": null, \"default_content_type\": null}"
        }
      ],
      "resources": {},
      "imageHash": "1630266432207181178",
      "minReplicas": 1,
      "maxReplicas": 4,
      "triggers": {
        "default-http": {
          "class": "",
          "kind": "http",
          "name": "default-http",
          "maxWorkers": 1,
          "attributes": {
            "serviceType": "NodePort"
          }
        }
      },
      "volumes": [
        {
          "volume": {
            "name": "v3io",
            "flexVolume": {
              "driver": "v3io/fuse",
              "options": {
                "accessKey": "b7242e47-a051-4ec3-8384-5f99a26c1451"
              }
            }
          },
          "volumeMount": {
            "name": "v3io",
            "mountPath": "/v3io"
          }
        },
        {
          "volume": {
            "name": "v3io",
            "flexVolume": {
              "driver": "v3io/fuse",
              "options": {
                "accessKey": "b7242e47-a051-4ec3-8384-5f99a26c1451"
              }
            }
          },
          "volumeMount": {
            "name": "v3io",
            "mountPath": "/User",
            "subPath": "users/admin"
          }
        }
      ],
      "version": -1,
      "alias": "latest",
      "build": {
        "functionSourceCode": "IyBHZW5lcmF0ZWQgYnkgbnVjbGlvLmV4cG9ydC5OdWNsaW9FeHBvcnRlcgoKaW1wb3J0IGpzb24KaW1wb3J0IHN0b3JleQpmcm9tIHR5cGluZyBpbXBvcnQgTGlzdCwgRGljdAoKCmNsYXNzIERyb3BDb2x1bW5zKHN0b3JleS5NYXBDbGFzcyk6CiAgICBkZWYgX19pbml0X18oc2VsZiwgY29sdW1uczogTGlzdFtzdHJdLCAqKmt3YXJncyk6CiAgICAgICAgc3VwZXIoKS5fX2luaXRfXygqKmt3YXJncykKICAgICAgICBzZWxmLmNvbHVtbnMgPSBjb2x1bW5zCgogICAgZGVmIGRvKHNlbGYsIGV2ZW50KToKICAgICAgICBmb3IgY29sIGluIHNlbGYuY29sdW1uczoKICAgICAgICAgICAgaWYgY29sIGluIGV2ZW50OgogICAgICAgICAgICAgICAgZGVsIGV2ZW50W2NvbF0KICAgICAgICByZXR1cm4gZXZlbnQKCiAgICBkZWYgdG9fZGljdChzZWxmKToKICAgICAgICByZXR1cm4gewogICAgICAgICAgICAiY2xhc3NfbmFtZSI6ICJEcm9wQ29sdW1ucyIsCiAgICAgICAgICAgICJuYW1lIjogc2VsZi5uYW1lIG9yICJEcm9wQ29sdW1ucyIsCiAgICAgICAgICAgICJjbGFzc19hcmdzIjogewogICAgICAgICAgICAgICAgImNvbHVtbnMiOiBzZWxmLmNvbHVtbnMKICAgICAgICAgICAgfSwKICAgICAgICB9CgpjbGFzcyBSZW5hbWVDb2x1bW5zKHN0b3JleS5NYXBDbGFzcyk6CiAgICBkZWYgX19pbml0X18oc2VsZiwgbWFwcGluZzogRGljdFtzdHIsIHN0cl0sICoqa3dhcmdzKToKICAgICAgICBzdXBlcigpLl9faW5pdF9fKCoqa3dhcmdzKQogICAgICAgIHNlbGYubWFwcGluZyA9IG1hcHBpbmcKCiAgICBkZWYgZG8oc2VsZiwgZXZlbnQpOgogICAgICAgIGZvciBvbGRfY29sLCBuZXdfY29sIGluIHNlbGYubWFwcGluZy5pdGVtcygpOgogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICBldmVudFtuZXdfY29sXSA9IGV2ZW50LnBvcChvbGRfY29sKQogICAgICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAgICAgICBwcmludChmJ3tvbGRfY29sfSBkb2VzbnQgZXhpc3QnKQogICAgICAgIHJldHVybiBldmVudAoKICAgIGRlZiB0b19kaWN0KHNlbGYpOgogICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICJjbGFzc19uYW1lIjogIlJlbmFtZUNvbHVtbnMiLAogICAgICAgICAgICAibmFtZSI6IHNlbGYubmFtZSBvciAiUmVuYW1lQ29sdW1ucyIsCiAgICAgICAgICAgICJjbGFzc19hcmdzIjogeyJtYXBwaW5nIjogc2VsZi5tYXBwaW5nfSwKICAgICAgICB9CgoKZnJvbSBtbHJ1bi5ydW50aW1lcyBpbXBvcnQgbnVjbGlvX2luaXRfaG9vawpkZWYgaW5pdF9jb250ZXh0KGNvbnRleHQpOgogICAgbnVjbGlvX2luaXRfaG9vayhjb250ZXh0LCBnbG9iYWxzKCksICdzZXJ2aW5nX3YyJykKCmRlZiBoYW5kbGVyKGNvbnRleHQsIGV2ZW50KToKICAgIHJldHVybiBjb250ZXh0Lm1scnVuX2hhbmRsZXIoY29udGV4dCwgZXZlbnQpCg==",
        "noBaseImagesPull": true,
        "baseImage": "mlrun/mlrun:0.7.0-rc11",
        "offline": true,
        "codeEntryType": "sourceCode",
        "timestamp": 1630266485
      },
      "platform": {},
      "serviceType": "NodePort",
      "securityContext": {},
      "scaleToZero": {
        "scaleResources": [
          {
            "metricName": "nuclio_processor_handled_events_total",
            "windowSize": "10m",
            "threshold": 0
          }
        ]
      },
      "eventTimeout": ""
    },
    "status": {
      "state": "ready"
    }
  },
  "getting-started-tutorial-admin-serving": {
    "metadata": {
      "name": "getting-started-tutorial-admin-serving",
      "namespace": "default-tenant",
      "labels": {
        "mlrun/class": "serving",
        "nuclio.io/project-name": "getting-started-tutorial-admin"
      },
      "annotations": {
        "nuclio.io/generated_by": "function generated from /User/demos/getting-started-tutorial/03-model-serving.ipynb"
      },
      "resourceVersion": "37858327"
    },
    "spec": {
      "handler": "03-model-serving:handler",
      "runtime": "python:3.6",
      "env": [
        {
          "name": "V3IO_API",
          "value": "v3io-webapi.default-tenant.svc:8081"
        },
        {
          "name": "V3IO_USERNAME",
          "value": "admin"
        },
        {
          "name": "V3IO_ACCESS_KEY",
          "value": "b7242e47-a051-4ec3-8384-5f99a26c1451"
        },
        {
          "name": "V3IO_FRAMESD",
          "value": "framesd:8081"
        },
        {
          "name": "MLRUN_DEFAULT_PROJECT",
          "value": "getting-started-tutorial-admin"
        },
        {
          "name": "MLRUN_DBPATH",
          "value": "http://mlrun-api:8080"
        },
        {
          "name": "MLRUN_NAMESPACE",
          "value": "default-tenant"
        },
        {
          "name": "SERVING_SPEC_ENV",
          "value": "{\"function_uri\": \"getting-started-tutorial-admin/serving\", \"version\": \"v2\", \"parameters\": {}, \"graph\": {\"kind\": \"router\", \"full_event\": true, \"routes\": {\"my_model\": {\"kind\": \"task\", \"class_name\": \"ClassifierModel\", \"class_args\": {\"model_path\": \"store://getting-started-tutorial-admin/train-iris-train_iris_model\"}, \"full_event\": true}, \"cleaned_data_v1\": {\"kind\": \"task\", \"class_name\": \"ClassifierModel\", \"class_args\": {\"model_path\": \"store://models/getting-started-tutorial-admin/train_model:dd5972cb-cbc2-4998-ab0e-705dba1b307d\"}}}}, \"load_mode\": null, \"functions\": {}, \"graph_initializer\": null, \"error_stream\": null, \"track_models\": null, \"default_content_type\": null}"
        }
      ],
      "resources": {},
      "imageHash": "1630300735648837606",
      "minReplicas": 1,
      "maxReplicas": 4,
      "triggers": {
        "default-http": {
          "class": "",
          "kind": "http",
          "name": "default-http",
          "maxWorkers": 1,
          "attributes": {
            "serviceType": "NodePort"
          }
        }
      },
      "volumes": [
        {
          "volume": {
            "name": "v3io",
            "flexVolume": {
              "driver": "v3io/fuse",
              "options": {
                "accessKey": "b7242e47-a051-4ec3-8384-5f99a26c1451"
              }
            }
          },
          "volumeMount": {
            "name": "v3io",
            "mountPath": "/v3io"
          }
        },
        {
          "volume": {
            "name": "v3io",
            "flexVolume": {
              "driver": "v3io/fuse",
              "options": {
                "accessKey": "b7242e47-a051-4ec3-8384-5f99a26c1451"
              }
            }
          },
          "volumeMount": {
            "name": "v3io",
            "mountPath": "/User",
            "subPath": "users/admin"
          }
        }
      ],
      "version": -1,
      "alias": "latest",
      "build": {
        "functionSourceCode": "IyBHZW5lcmF0ZWQgYnkgbnVjbGlvLmV4cG9ydC5OdWNsaW9FeHBvcnRlcgoKZnJvbSBjbG91ZHBpY2tsZSBpbXBvcnQgbG9hZAppbXBvcnQgbnVtcHkgYXMgbnAKZnJvbSB0eXBpbmcgaW1wb3J0IExpc3QKaW1wb3J0IG1scnVuCgpjbGFzcyBDbGFzc2lmaWVyTW9kZWwobWxydW4uc2VydmluZy5WMk1vZGVsU2VydmVyKToKICAgIGRlZiBsb2FkKHNlbGYpOgogICAgICAgICIiImxvYWQgYW5kIGluaXRpYWxpemUgdGhlIG1vZGVsIGFuZC9vciBvdGhlciBlbGVtZW50cyIiIgogICAgICAgIG1vZGVsX2ZpbGUsIGV4dHJhX2RhdGEgPSBzZWxmLmdldF9tb2RlbCgnLnBrbCcpCiAgICAgICAgc2VsZi5tb2RlbCA9IGxvYWQob3Blbihtb2RlbF9maWxlLCAncmInKSkKCiAgICBkZWYgcHJlZGljdChzZWxmLCBib2R5OiBkaWN0KSAtPiBMaXN0OgogICAgICAgICIiIkdlbmVyYXRlIG1vZGVsIHByZWRpY3Rpb25zIGZyb20gc2FtcGxlLiIiIgogICAgICAgIGZlYXRzID0gbnAuYXNhcnJheShib2R5WydpbnB1dHMnXSkKICAgICAgICByZXN1bHQ6IG5wLm5kYXJyYXkgPSBzZWxmLm1vZGVsLnByZWRpY3QoZmVhdHMpCiAgICAgICAgcmV0dXJuIHJlc3VsdC50b2xpc3QoKQoKCmZyb20gbWxydW4ucnVudGltZXMgaW1wb3J0IG51Y2xpb19pbml0X2hvb2sKZGVmIGluaXRfY29udGV4dChjb250ZXh0KToKICAgIG51Y2xpb19pbml0X2hvb2soY29udGV4dCwgZ2xvYmFscygpLCAnc2VydmluZ192MicpCgpkZWYgaGFuZGxlcihjb250ZXh0LCBldmVudCk6CiAgICByZXR1cm4gY29udGV4dC5tbHJ1bl9oYW5kbGVyKGNvbnRleHQsIGV2ZW50KQo=",
        "noBaseImagesPull": true,
        "baseImage": "mlrun/mlrun:0.7.0-rc11",
        "offline": true,
        "codeEntryType": "sourceCode",
        "timestamp": 1630300738
      },
      "platform": {},
      "serviceType": "NodePort",
      "securityContext": {},
      "scaleToZero": {
        "scaleResources": [
          {
            "metricName": "nuclio_processor_handled_events_total",
            "windowSize": "10m",
            "threshold": 0
          }
        ]
      },
      "eventTimeout": ""
    },
    "status": {
      "state": "ready"
    }
  },
  "model-deployment-pipeline-admin-event-handler": {
    "metadata": {
      "name": "model-deployment-pipeline-admin-event-handler",
      "namespace": "default-tenant",
      "labels": {
        "mlrun/class": "remote",
        "nuclio.io/project-name": "model-deployment-pipeline-admin"
      },
      "annotations": {
        "nuclio.io/generated_by": "function generated from functions/event-handler.ipynb"
      },
      "resourceVersion": "37857020"
    },
    "spec": {
      "handler": "event-handler:handler",
      "runtime": "python:3.6",
      "env": [
        {
          "name": "V3IO_API",
          "value": "v3io-webapi.default-tenant.svc:8081"
        },
        {
          "name": "V3IO_ACCESS_KEY",
          "value": "b7242e47-a051-4ec3-8384-5f99a26c1451"
        },
        {
          "name": "PARQUET_SINK_FLAG",
          "value": "true"
        },
        {
          "name": "STREAM_SINK_FLAG",
          "value": "true"
        },
        {
          "name": "PARQUET_TARGET_PATH",
          "value": "/User/examples/model-deployment-pipeline/data/events-pq"
        },
        {
          "name": "PARQUET_BATCH_SIZE",
          "value": "8192"
        },
        {
          "name": "TS_KEY",
          "value": "event_time"
        },
        {
          "name": "TS_FORMAT",
          "value": "%Y-%m-%d %H:%M:%S.%f"
        },
        {
          "name": "CONTAINER",
          "value": "users"
        },
        {
          "name": "OUTPUT_STREAM_PATH",
          "value": "admin/examples/model-deployment-pipeline/data/incoming-events-stream"
        },
        {
          "name": "PARTITION_ATTR",
          "value": "user_id"
        },
        {
          "name": "V3IO_USERNAME",
          "value": "admin"
        },
        {
          "name": "V3IO_FRAMESD",
          "value": "framesd:8081"
        },
        {
          "name": "MLRUN_DEFAULT_PROJECT",
          "value": "model-deployment-pipeline-admin"
        },
        {
          "name": "MLRUN_DBPATH",
          "value": "http://mlrun-api:8080"
        },
        {
          "name": "MLRUN_NAMESPACE",
          "value": "default-tenant"
        }
      ],
      "resources": {},
      "imageHash": "1630267638295236446",
      "minReplicas": 1,
      "maxReplicas": 1,
      "triggers": {
        "default-http": {
          "class": "",
          "kind": "http",
          "name": "default-http",
          "maxWorkers": 1,
          "attributes": {
            "serviceType": "NodePort"
          }
        },
        "serving_stream": {
          "class": "",
          "kind": "v3ioStream",
          "name": "serving_stream",
          "maxWorkers": 10,
          "url": "http://v3io-webapi:8081/users/admin/examples/model-deployment-pipeline/data/generated-stream@eh",
          "password": "b7242e47-a051-4ec3-8384-5f99a26c1451",
          "attributes": {
            "pollingIntervalMs": 500,
            "readBatchSize": 64,
            "seekTo": "earliest"
          }
        }
      },
      "volumes": [
        {
          "volume": {
            "name": "v3io",
            "flexVolume": {
              "driver": "v3io/fuse",
              "options": {
                "accessKey": "b7242e47-a051-4ec3-8384-5f99a26c1451"
              }
            }
          },
          "volumeMount": {
            "name": "v3io",
            "mountPath": "/v3io"
          }
        },
        {
          "volume": {
            "name": "v3io",
            "flexVolume": {
              "driver": "v3io/fuse",
              "options": {
                "accessKey": "b7242e47-a051-4ec3-8384-5f99a26c1451"
              }
            }
          },
          "volumeMount": {
            "name": "v3io",
            "mountPath": "/User",
            "subPath": "users/admin"
          }
        }
      ],
      "version": -1,
      "alias": "latest",
      "build": {
        "functionSourceCode": "IyBHZW5lcmF0ZWQgYnkgbnVjbGlvLmV4cG9ydC5OdWNsaW9FeHBvcnRlcgoKaW1wb3J0IG9zCmltcG9ydCBwYW5kYXMgYXMgcGQKaW1wb3J0IGpzb24KaW1wb3J0IGRhdGV0aW1lCmZyb20gZGF0ZXRpbWUgaW1wb3J0IGRhdGV0aW1lCmltcG9ydCB2M2lvLmRhdGFwbGFuZQoKZGVmIGluaXRfY29udGV4dChjb250ZXh0KToKICAgIHNldGF0dHIoY29udGV4dCwgJ3N0cmVhbV9zaW5rX2ZsYWcnLCBvcy5nZXRlbnYoJ1NUUkVBTV9TSU5LX0ZMQUcnKSkKICAgIHNldGF0dHIoY29udGV4dCwgJ3BhcnF1ZXRfc2lua19mbGFnJywgb3MuZ2V0ZW52KCdQQVJRVUVUX1NJTktfRkxBRycpKQoKICAgIGlmIGNvbnRleHQucGFycXVldF9zaW5rX2ZsYWcubG93ZXIoKSA9PSAndHJ1ZSc6CiAgICAgICAgc2V0YXR0cihjb250ZXh0LCAnYmF0Y2gnLCBbXSkKICAgICAgICBzZXRhdHRyKGNvbnRleHQsICdiYXRjaF9zaXplJywgaW50KG9zLmdldGVudignUEFSUVVFVF9CQVRDSF9TSVpFJywgMTAyNCkpKQoKICAgICAgICBzZXRhdHRyKGNvbnRleHQsICd0aW1lc3RhbXBfa2V5Jywgb3MuZ2V0ZW52KCdUU19LRVknKSkKICAgICAgICBzZXRhdHRyKGNvbnRleHQsICd0aW1lc3RhbXBfZm9ybWF0Jywgb3MuZ2V0ZW52KCdUU19GT1JNQVQnLCAnJVktJW0tJWQgJUg6JU06JVMuJWYnKSkKCiAgICAgICAgc2V0YXR0cihjb250ZXh0LCAncHFfcGFydGl0aW9ucycsIFsncHFfeWVhcicsICdwcV9tb250aCcsICdwcV9kYXknLCAncHFfaG91ciddKQoKICAgICAgICBzZXRhdHRyKGNvbnRleHQsICd0YXJnZXRfcGF0aCcsIG9zLmdldGVudignUEFSUVVFVF9UQVJHRVRfUEFUSCcpKQogICAgICAgIG9zLm1ha2VkaXJzKGNvbnRleHQudGFyZ2V0X3BhdGgsIGV4aXN0X29rPVRydWUpCgogICAgICAgIGZlYXR1cmVzID0gb3MuZ2V0ZW52KCdGRUFUVVJFUycpCiAgICAgICAgaWYgZmVhdHVyZXMgaXMgbm90IE5vbmU6CiAgICAgICAgICAgIGZlYXR1cmVzID0gZmVhdHVyZXMuc3BsaXQoJywnKQogICAgICAgIHNldGF0dHIoY29udGV4dCwgJ2ZlYXR1cmVzJywgZmVhdHVyZXMpCgogICAgICAgIHByZWRpY3Rpb25zID0gb3MuZ2V0ZW52KCdQUkVESUNUSU9OUycpCiAgICAgICAgaWYgcHJlZGljdGlvbnMgaXMgbm90IE5vbmU6CiAgICAgICAgICAgIHByZWRpY3Rpb25zID0gcHJlZGljdGlvbnMuc3BsaXQoJywnKQogICAgICAgIHNldGF0dHIoY29udGV4dCwgJ3ByZWRpY3Rpb25zJywgcHJlZGljdGlvbnMpCgogICAgaWYgY29udGV4dC5zdHJlYW1fc2lua19mbGFnLmxvd2VyKCkgPT0gJ3RydWUnOgogICAgICAgIHYzaW9fYWNjZXNzX2tleSA9IG9zLmdldGVudignVjNJT19BQ0NFU1NfS0VZJykKICAgICAgICBjb250YWluZXIgPSBvcy5nZXRlbnYoJ0NPTlRBSU5FUicpCiAgICAgICAgb3V0cHV0X3N0cmVhbV9wYXRoID0gb3MuZ2V0ZW52KCdPVVRQVVRfU1RSRUFNX1BBVEgnKQogICAgICAgIHBhcnRpdGlvbl9hdHRyID0gb3MuZ2V0ZW52KCdQQVJUSVRJT05fQVRUUicpCiAgICAgICAgdjNpb19hcGkgPSBvcy5nZXRlbnYoJ1YzSU9fQVBJJykKICAgICAgICB2M2lvX2NsaWVudCA9IHYzaW8uZGF0YXBsYW5lLkNsaWVudChlbmRwb2ludD12M2lvX2FwaSwgYWNjZXNzX2tleT12M2lvX2FjY2Vzc19rZXkpCgogICAgICAgIHNldGF0dHIoY29udGV4dCwgJ3YzaW9fY2xpZW50JywgdjNpb19jbGllbnQpCiAgICAgICAgc2V0YXR0cihjb250ZXh0LCAncGFydGl0aW9uX2F0dHInLCBwYXJ0aXRpb25fYXR0cikKICAgICAgICBzZXRhdHRyKGNvbnRleHQsICdjb250YWluZXInLCBjb250YWluZXIpCiAgICAgICAgc2V0YXR0cihjb250ZXh0LCAnb3V0cHV0X3N0cmVhbV9wYXRoJywgb3V0cHV0X3N0cmVhbV9wYXRoKQogICAgcGFzcwoKZGVmIGhhbmRsZXIoY29udGV4dCwgZXZlbnQpOgogICAgaWYgdHlwZShldmVudC5ib2R5KSBpcyBkaWN0OgogICAgICAgIGV2ZW50X2RpY3QgPSBldmVudC5ib2R5CiAgICBlbHNlOgogICAgICAgIGV2ZW50X2RpY3QgPSBqc29uLmxvYWRzKGV2ZW50LmJvZHkpCgogICAgY29udGV4dC5sb2dnZXIuaW5mb193aXRoKCdHb3QgaW52b2tlZCcsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJpZ2dlcl9raW5kPWV2ZW50LnRyaWdnZXIua2luZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudF9ib2R5PWV2ZW50X2RpY3QpCgogICAgaWYgY29udGV4dC5zdHJlYW1fc2lua19mbGFnLmxvd2VyKCkgPT0gJ3RydWUnOgogICAgICAgIHN0cmVhbV9zaW5rX2hhbmRsZXIoY29udGV4dCwgZXZlbnRfZGljdCkKICAgIGlmIGNvbnRleHQucGFycXVldF9zaW5rX2ZsYWcubG93ZXIoKSA9PSAndHJ1ZSc6CiAgICAgICAgcGFycXVldF9zaW5rX2hhbmRsZXIoY29udGV4dCwgZXZlbnRfZGljdCkKICAgIHBhc3MKCgpkZWYgc3RyZWFtX3NpbmtfaGFuZGxlcihjb250ZXh0LCBldmVudCk6CiAgICBwYXJ0aXRpb25fa2V5ID0gZXZlbnQuZ2V0KGNvbnRleHQucGFydGl0aW9uX2F0dHIpCiAgICByZWNvcmQgPSBldmVudF90b19yZWNvcmQoZXZlbnQsIHBhcnRpdGlvbl9rZXkpCiAgICAKICAgIHJlc3AgPSBjb250ZXh0LnYzaW9fY2xpZW50LnN0cmVhbS5wdXRfcmVjb3Jkcyhjb250YWluZXI9Y29udGV4dC5jb250YWluZXIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RyZWFtX3BhdGg9Y29udGV4dC5vdXRwdXRfc3RyZWFtX3BhdGgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVjb3Jkcz1bcmVjb3JkXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByYWlzZV9mb3Jfc3RhdHVzPXYzaW8uZGF0YXBsYW5lLlJhaXNlRm9yU3RhdHVzLm5ldmVyKQoKICAgIGNvbnRleHQubG9nZ2VyLmluZm9fd2l0aCgnU2VudCBldmVudCB0byBzdHJlYW0nLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlY29yZD1yZWNvcmQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2Vfc3RhdHVzPXJlc3Auc3RhdHVzX2NvZGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2VfYm9keT1yZXNwLmJvZHkuZGVjb2RlKCd1dGYtOCcpKQogICAgcGFzcwoKCmRlZiBldmVudF90b19yZWNvcmQoZXZlbnRfZGljdCwgcGFydGl0aW9uX2tleSk6CiAgICBldmVudF9zdHIgPSBqc29uLmR1bXBzKGV2ZW50X2RpY3QpCiAgICByZXR1cm4geydkYXRhJzogZXZlbnRfc3RyLCAncGFydGl0aW9uX2tleSc6IHN0cihwYXJ0aXRpb25fa2V5KX0KCgpkZWYgcGFycXVldF9zaW5rX2hhbmRsZXIoY29udGV4dCwgZXZlbnQpOgogICAgaWYgY29udGV4dC5mZWF0dXJlcyBpcyBub3QgTm9uZSBhbmQgY29udGV4dC5wcmVkaWN0aW9ucyBpcyBub3QgTm9uZToKICAgICAgICBldmVudCA9IGZsYXR0ZW5faW5mZXJlbmNlX2V2ZW50KGNvbnRleHQsIGV2ZW50KQoKICAgIGV2ZW50X3dpdGhfdGltZV9wYXJ0aXRpb25zID0gYWRkX3RpbWVfcGFydGl0aW9uX2F0dHJpYnV0ZXMoY29udGV4dCwgZXZlbnQpCgogICAgY29udGV4dC5iYXRjaC5hcHBlbmQoZXZlbnRfd2l0aF90aW1lX3BhcnRpdGlvbnMpCgogICAgaWYgY29udGV4dC5iYXRjaF9zaXplID09IGxlbihjb250ZXh0LmJhdGNoKToKICAgICAgICB3cml0dGVuX3JlY29yZHMgPSB3cml0ZV9iYXRjaChjb250ZXh0KQogICAgICAgIGNvbnRleHQubG9nZ2VyLmluZm9fd2l0aCgnV3JpdHRlbiBiYXRjaCcsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFdyaXR0ZW50X3JlY29yZHM9d3JpdHRlbl9yZWNvcmRzKQogICAgcGFzcwoKCmRlZiBmbGF0dGVuX2luZmVyZW5jZV9ldmVudChjb250ZXh0LCBldmVudCk6CiAgICBmZWF0dXJlX3ZhbHVlcyA9IGV2ZW50WydyZXF1ZXN0J11bJ2luc3RhbmNlcyddWzBdCiAgICBldmVudC51cGRhdGUoemlwKGNvbnRleHQuZmVhdHVyZXMsIGZlYXR1cmVfdmFsdWVzKSkKCiAgICBwcmVkaWN0aW9uX3ZhbHVlcyA9IGV2ZW50WydyZXNwJ10KICAgIGV2ZW50LnVwZGF0ZSh6aXAoY29udGV4dC5wcmVkaWN0aW9ucywgcHJlZGljdGlvbl92YWx1ZXMpKQoKICAgIHJldHVybiBldmVudAoKCmRlZiBhZGRfdGltZV9wYXJ0aXRpb25fYXR0cmlidXRlcyhjb250ZXh0LCBldmVudCk6CiAgICBpZiBoYXNhdHRyKGNvbnRleHQsICd0aW1lc3RhbXBfa2V5JykgYW5kIGV2ZW50LmdldChjb250ZXh0LnRpbWVzdGFtcF9rZXkpIGlzIG5vdCBOb25lOgogICAgICAgIGR0X29iamVjdCA9IGRhdGV0aW1lLnN0cnB0aW1lKGV2ZW50W2NvbnRleHQudGltZXN0YW1wX2tleV0sIGNvbnRleHQudGltZXN0YW1wX2Zvcm1hdCkKICAgIGVsc2U6CiAgICAgICAgZHRfb2JqZWN0ID0gZGF0ZXRpbWUubm93KCkKCiAgICBldmVudFsncHFfeWVhciddID0gZHRfb2JqZWN0LnN0cmZ0aW1lKCclWScpCiAgICBldmVudFsncHFfbW9udGgnXSA9IGR0X29iamVjdC5zdHJmdGltZSgnJW0nKQogICAgZXZlbnRbJ3BxX2RheSddID0gZHRfb2JqZWN0LnN0cmZ0aW1lKCclZCcpCiAgICBldmVudFsncHFfaG91ciddID0gZHRfb2JqZWN0LnN0cmZ0aW1lKCclSCcpCgogICAgcmV0dXJuIGV2ZW50CgoKZGVmIHdyaXRlX2JhdGNoKGNvbnRleHQpOgogICAgZGYgPSBwZC5EYXRhRnJhbWUuZnJvbV9yZWNvcmRzKGNvbnRleHQuYmF0Y2gpCiAgICBkZi50b19wYXJxdWV0KHBhdGg9Y29udGV4dC50YXJnZXRfcGF0aCwgcGFydGl0aW9uX2NvbHM9Y29udGV4dC5wcV9wYXJ0aXRpb25zKQogICAgY29udGV4dC5iYXRjaCA9IFtdCiAgICByZXR1cm4gbGVuKGRmLmluZGV4KQoK",
        "noBaseImagesPull": true,
        "baseImage": "mlrun/mlrun:0.7.0-rc11",
        "offline": true,
        "codeEntryType": "sourceCode",
        "timestamp": 1630267645
      },
      "platform": {},
      "readinessTimeoutSeconds": 200,
      "serviceType": "NodePort",
      "securityContext": {},
      "scaleToZero": {
        "scaleResources": [
          {
            "metricName": "nuclio_processor_handled_events_total",
            "windowSize": "10m",
            "threshold": 0
          }
        ]
      },
      "eventTimeout": ""
    },
    "status": {
      "state": "ready",
      "httpPort": 31666,
      "scaleToZero": {
        "lastScaleEvent": "resourceUpdated",
        "lastScaleEventTime": "2021-08-29T20:07:31.64815038Z"
      }
    }
  },
  "model-deployment-pipeline-admin-inference-logger": {
    "metadata": {
      "name": "model-deployment-pipeline-admin-inference-logger",
      "namespace": "default-tenant",
      "labels": {
        "mlrun/class": "remote",
        "nuclio.io/project-name": "model-deployment-pipeline-admin"
      },
      "annotations": {
        "nuclio.io/generated_by": "function generated from functions/event-handler.ipynb"
      },
      "resourceVersion": "37857012"
    },
    "spec": {
      "handler": "event-handler:handler",
      "runtime": "python:3.6",
      "env": [
        {
          "name": "V3IO_API",
          "value": "v3io-webapi.default-tenant.svc:8081"
        },
        {
          "name": "V3IO_ACCESS_KEY",
          "value": "b7242e47-a051-4ec3-8384-5f99a26c1451"
        },
        {
          "name": "PARQUET_SINK_FLAG",
          "value": "true"
        },
        {
          "name": "STREAM_SINK_FLAG",
          "value": "false"
        },
        {
          "name": "PARQUET_TARGET_PATH",
          "value": "/User/examples/model-deployment-pipeline/data/inference-pq"
        },
        {
          "name": "PARQUET_BATCH_SIZE",
          "value": "8192"
        },
        {
          "name": "TS_KEY",
          "value": "when"
        },
        {
          "name": "TS_FORMAT",
          "value": "%Y-%m-%d %H:%M:%S.%f"
        },
        {
          "name": "FEATURES",
          "value": "socioeconomic_idx,purchase_sum,purchase_mean,purchase_count,purchase_var,bet_sum,bet_mean,bet_count,bet_var,win_sum,win_mean,win_count,win_var"
        },
        {
          "name": "PREDICTIONS",
          "value": "about_to_churn"
        },
        {
          "name": "CONTAINER",
          "value": "users"
        },
        {
          "name": "V3IO_USERNAME",
          "value": "admin"
        },
        {
          "name": "V3IO_FRAMESD",
          "value": "framesd:8081"
        },
        {
          "name": "MLRUN_DEFAULT_PROJECT",
          "value": "model-deployment-pipeline-admin"
        },
        {
          "name": "MLRUN_DBPATH",
          "value": "http://mlrun-api:8080"
        },
        {
          "name": "MLRUN_NAMESPACE",
          "value": "default-tenant"
        }
      ],
      "resources": {},
      "imageHash": "1630267703352275032",
      "minReplicas": 1,
      "maxReplicas": 1,
      "triggers": {
        "default-http": {
          "class": "",
          "kind": "http",
          "name": "default-http",
          "maxWorkers": 1,
          "attributes": {
            "serviceType": "NodePort"
          }
        },
        "inference_stream": {
          "class": "",
          "kind": "v3ioStream",
          "name": "inference_stream",
          "maxWorkers": 10,
          "url": "http://v3io-webapi:8081/users/admin/examples/model-deployment-pipeline/data/inference-stream@il",
          "password": "b7242e47-a051-4ec3-8384-5f99a26c1451",
          "attributes": {
            "pollingIntervalMs": 500,
            "readBatchSize": 64,
            "seekTo": "earliest"
          }
        }
      },
      "volumes": [
        {
          "volume": {
            "name": "v3io",
            "flexVolume": {
              "driver": "v3io/fuse",
              "options": {
                "accessKey": "b7242e47-a051-4ec3-8384-5f99a26c1451"
              }
            }
          },
          "volumeMount": {
            "name": "v3io",
            "mountPath": "/v3io"
          }
        },
        {
          "volume": {
            "name": "v3io",
            "flexVolume": {
              "driver": "v3io/fuse",
              "options": {
                "accessKey": "b7242e47-a051-4ec3-8384-5f99a26c1451"
              }
            }
          },
          "volumeMount": {
            "name": "v3io",
            "mountPath": "/User",
            "subPath": "users/admin"
          }
        }
      ],
      "version": -1,
      "alias": "latest",
      "build": {
        "functionSourceCode": "IyBHZW5lcmF0ZWQgYnkgbnVjbGlvLmV4cG9ydC5OdWNsaW9FeHBvcnRlcgoKaW1wb3J0IG9zCmltcG9ydCBwYW5kYXMgYXMgcGQKaW1wb3J0IGpzb24KaW1wb3J0IGRhdGV0aW1lCmZyb20gZGF0ZXRpbWUgaW1wb3J0IGRhdGV0aW1lCmltcG9ydCB2M2lvLmRhdGFwbGFuZQoKZGVmIGluaXRfY29udGV4dChjb250ZXh0KToKICAgIHNldGF0dHIoY29udGV4dCwgJ3N0cmVhbV9zaW5rX2ZsYWcnLCBvcy5nZXRlbnYoJ1NUUkVBTV9TSU5LX0ZMQUcnKSkKICAgIHNldGF0dHIoY29udGV4dCwgJ3BhcnF1ZXRfc2lua19mbGFnJywgb3MuZ2V0ZW52KCdQQVJRVUVUX1NJTktfRkxBRycpKQoKICAgIGlmIGNvbnRleHQucGFycXVldF9zaW5rX2ZsYWcubG93ZXIoKSA9PSAndHJ1ZSc6CiAgICAgICAgc2V0YXR0cihjb250ZXh0LCAnYmF0Y2gnLCBbXSkKICAgICAgICBzZXRhdHRyKGNvbnRleHQsICdiYXRjaF9zaXplJywgaW50KG9zLmdldGVudignUEFSUVVFVF9CQVRDSF9TSVpFJywgMTAyNCkpKQoKICAgICAgICBzZXRhdHRyKGNvbnRleHQsICd0aW1lc3RhbXBfa2V5Jywgb3MuZ2V0ZW52KCdUU19LRVknKSkKICAgICAgICBzZXRhdHRyKGNvbnRleHQsICd0aW1lc3RhbXBfZm9ybWF0Jywgb3MuZ2V0ZW52KCdUU19GT1JNQVQnLCAnJVktJW0tJWQgJUg6JU06JVMuJWYnKSkKCiAgICAgICAgc2V0YXR0cihjb250ZXh0LCAncHFfcGFydGl0aW9ucycsIFsncHFfeWVhcicsICdwcV9tb250aCcsICdwcV9kYXknLCAncHFfaG91ciddKQoKICAgICAgICBzZXRhdHRyKGNvbnRleHQsICd0YXJnZXRfcGF0aCcsIG9zLmdldGVudignUEFSUVVFVF9UQVJHRVRfUEFUSCcpKQogICAgICAgIG9zLm1ha2VkaXJzKGNvbnRleHQudGFyZ2V0X3BhdGgsIGV4aXN0X29rPVRydWUpCgogICAgICAgIGZlYXR1cmVzID0gb3MuZ2V0ZW52KCdGRUFUVVJFUycpCiAgICAgICAgaWYgZmVhdHVyZXMgaXMgbm90IE5vbmU6CiAgICAgICAgICAgIGZlYXR1cmVzID0gZmVhdHVyZXMuc3BsaXQoJywnKQogICAgICAgIHNldGF0dHIoY29udGV4dCwgJ2ZlYXR1cmVzJywgZmVhdHVyZXMpCgogICAgICAgIHByZWRpY3Rpb25zID0gb3MuZ2V0ZW52KCdQUkVESUNUSU9OUycpCiAgICAgICAgaWYgcHJlZGljdGlvbnMgaXMgbm90IE5vbmU6CiAgICAgICAgICAgIHByZWRpY3Rpb25zID0gcHJlZGljdGlvbnMuc3BsaXQoJywnKQogICAgICAgIHNldGF0dHIoY29udGV4dCwgJ3ByZWRpY3Rpb25zJywgcHJlZGljdGlvbnMpCgogICAgaWYgY29udGV4dC5zdHJlYW1fc2lua19mbGFnLmxvd2VyKCkgPT0gJ3RydWUnOgogICAgICAgIHYzaW9fYWNjZXNzX2tleSA9IG9zLmdldGVudignVjNJT19BQ0NFU1NfS0VZJykKICAgICAgICBjb250YWluZXIgPSBvcy5nZXRlbnYoJ0NPTlRBSU5FUicpCiAgICAgICAgb3V0cHV0X3N0cmVhbV9wYXRoID0gb3MuZ2V0ZW52KCdPVVRQVVRfU1RSRUFNX1BBVEgnKQogICAgICAgIHBhcnRpdGlvbl9hdHRyID0gb3MuZ2V0ZW52KCdQQVJUSVRJT05fQVRUUicpCiAgICAgICAgdjNpb19hcGkgPSBvcy5nZXRlbnYoJ1YzSU9fQVBJJykKICAgICAgICB2M2lvX2NsaWVudCA9IHYzaW8uZGF0YXBsYW5lLkNsaWVudChlbmRwb2ludD12M2lvX2FwaSwgYWNjZXNzX2tleT12M2lvX2FjY2Vzc19rZXkpCgogICAgICAgIHNldGF0dHIoY29udGV4dCwgJ3YzaW9fY2xpZW50JywgdjNpb19jbGllbnQpCiAgICAgICAgc2V0YXR0cihjb250ZXh0LCAncGFydGl0aW9uX2F0dHInLCBwYXJ0aXRpb25fYXR0cikKICAgICAgICBzZXRhdHRyKGNvbnRleHQsICdjb250YWluZXInLCBjb250YWluZXIpCiAgICAgICAgc2V0YXR0cihjb250ZXh0LCAnb3V0cHV0X3N0cmVhbV9wYXRoJywgb3V0cHV0X3N0cmVhbV9wYXRoKQogICAgcGFzcwoKZGVmIGhhbmRsZXIoY29udGV4dCwgZXZlbnQpOgogICAgaWYgdHlwZShldmVudC5ib2R5KSBpcyBkaWN0OgogICAgICAgIGV2ZW50X2RpY3QgPSBldmVudC5ib2R5CiAgICBlbHNlOgogICAgICAgIGV2ZW50X2RpY3QgPSBqc29uLmxvYWRzKGV2ZW50LmJvZHkpCgogICAgY29udGV4dC5sb2dnZXIuaW5mb193aXRoKCdHb3QgaW52b2tlZCcsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJpZ2dlcl9raW5kPWV2ZW50LnRyaWdnZXIua2luZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudF9ib2R5PWV2ZW50X2RpY3QpCgogICAgaWYgY29udGV4dC5zdHJlYW1fc2lua19mbGFnLmxvd2VyKCkgPT0gJ3RydWUnOgogICAgICAgIHN0cmVhbV9zaW5rX2hhbmRsZXIoY29udGV4dCwgZXZlbnRfZGljdCkKICAgIGlmIGNvbnRleHQucGFycXVldF9zaW5rX2ZsYWcubG93ZXIoKSA9PSAndHJ1ZSc6CiAgICAgICAgcGFycXVldF9zaW5rX2hhbmRsZXIoY29udGV4dCwgZXZlbnRfZGljdCkKICAgIHBhc3MKCgpkZWYgc3RyZWFtX3NpbmtfaGFuZGxlcihjb250ZXh0LCBldmVudCk6CiAgICBwYXJ0aXRpb25fa2V5ID0gZXZlbnQuZ2V0KGNvbnRleHQucGFydGl0aW9uX2F0dHIpCiAgICByZWNvcmQgPSBldmVudF90b19yZWNvcmQoZXZlbnQsIHBhcnRpdGlvbl9rZXkpCiAgICAKICAgIHJlc3AgPSBjb250ZXh0LnYzaW9fY2xpZW50LnN0cmVhbS5wdXRfcmVjb3Jkcyhjb250YWluZXI9Y29udGV4dC5jb250YWluZXIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RyZWFtX3BhdGg9Y29udGV4dC5vdXRwdXRfc3RyZWFtX3BhdGgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVjb3Jkcz1bcmVjb3JkXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByYWlzZV9mb3Jfc3RhdHVzPXYzaW8uZGF0YXBsYW5lLlJhaXNlRm9yU3RhdHVzLm5ldmVyKQoKICAgIGNvbnRleHQubG9nZ2VyLmluZm9fd2l0aCgnU2VudCBldmVudCB0byBzdHJlYW0nLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlY29yZD1yZWNvcmQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2Vfc3RhdHVzPXJlc3Auc3RhdHVzX2NvZGUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2VfYm9keT1yZXNwLmJvZHkuZGVjb2RlKCd1dGYtOCcpKQogICAgcGFzcwoKCmRlZiBldmVudF90b19yZWNvcmQoZXZlbnRfZGljdCwgcGFydGl0aW9uX2tleSk6CiAgICBldmVudF9zdHIgPSBqc29uLmR1bXBzKGV2ZW50X2RpY3QpCiAgICByZXR1cm4geydkYXRhJzogZXZlbnRfc3RyLCAncGFydGl0aW9uX2tleSc6IHN0cihwYXJ0aXRpb25fa2V5KX0KCgpkZWYgcGFycXVldF9zaW5rX2hhbmRsZXIoY29udGV4dCwgZXZlbnQpOgogICAgaWYgY29udGV4dC5mZWF0dXJlcyBpcyBub3QgTm9uZSBhbmQgY29udGV4dC5wcmVkaWN0aW9ucyBpcyBub3QgTm9uZToKICAgICAgICBldmVudCA9IGZsYXR0ZW5faW5mZXJlbmNlX2V2ZW50KGNvbnRleHQsIGV2ZW50KQoKICAgIGV2ZW50X3dpdGhfdGltZV9wYXJ0aXRpb25zID0gYWRkX3RpbWVfcGFydGl0aW9uX2F0dHJpYnV0ZXMoY29udGV4dCwgZXZlbnQpCgogICAgY29udGV4dC5iYXRjaC5hcHBlbmQoZXZlbnRfd2l0aF90aW1lX3BhcnRpdGlvbnMpCgogICAgaWYgY29udGV4dC5iYXRjaF9zaXplID09IGxlbihjb250ZXh0LmJhdGNoKToKICAgICAgICB3cml0dGVuX3JlY29yZHMgPSB3cml0ZV9iYXRjaChjb250ZXh0KQogICAgICAgIGNvbnRleHQubG9nZ2VyLmluZm9fd2l0aCgnV3JpdHRlbiBiYXRjaCcsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFdyaXR0ZW50X3JlY29yZHM9d3JpdHRlbl9yZWNvcmRzKQogICAgcGFzcwoKCmRlZiBmbGF0dGVuX2luZmVyZW5jZV9ldmVudChjb250ZXh0LCBldmVudCk6CiAgICBmZWF0dXJlX3ZhbHVlcyA9IGV2ZW50WydyZXF1ZXN0J11bJ2luc3RhbmNlcyddWzBdCiAgICBldmVudC51cGRhdGUoemlwKGNvbnRleHQuZmVhdHVyZXMsIGZlYXR1cmVfdmFsdWVzKSkKCiAgICBwcmVkaWN0aW9uX3ZhbHVlcyA9IGV2ZW50WydyZXNwJ10KICAgIGV2ZW50LnVwZGF0ZSh6aXAoY29udGV4dC5wcmVkaWN0aW9ucywgcHJlZGljdGlvbl92YWx1ZXMpKQoKICAgIHJldHVybiBldmVudAoKCmRlZiBhZGRfdGltZV9wYXJ0aXRpb25fYXR0cmlidXRlcyhjb250ZXh0LCBldmVudCk6CiAgICBpZiBoYXNhdHRyKGNvbnRleHQsICd0aW1lc3RhbXBfa2V5JykgYW5kIGV2ZW50LmdldChjb250ZXh0LnRpbWVzdGFtcF9rZXkpIGlzIG5vdCBOb25lOgogICAgICAgIGR0X29iamVjdCA9IGRhdGV0aW1lLnN0cnB0aW1lKGV2ZW50W2NvbnRleHQudGltZXN0YW1wX2tleV0sIGNvbnRleHQudGltZXN0YW1wX2Zvcm1hdCkKICAgIGVsc2U6CiAgICAgICAgZHRfb2JqZWN0ID0gZGF0ZXRpbWUubm93KCkKCiAgICBldmVudFsncHFfeWVhciddID0gZHRfb2JqZWN0LnN0cmZ0aW1lKCclWScpCiAgICBldmVudFsncHFfbW9udGgnXSA9IGR0X29iamVjdC5zdHJmdGltZSgnJW0nKQogICAgZXZlbnRbJ3BxX2RheSddID0gZHRfb2JqZWN0LnN0cmZ0aW1lKCclZCcpCiAgICBldmVudFsncHFfaG91ciddID0gZHRfb2JqZWN0LnN0cmZ0aW1lKCclSCcpCgogICAgcmV0dXJuIGV2ZW50CgoKZGVmIHdyaXRlX2JhdGNoKGNvbnRleHQpOgogICAgZGYgPSBwZC5EYXRhRnJhbWUuZnJvbV9yZWNvcmRzKGNvbnRleHQuYmF0Y2gpCiAgICBkZi50b19wYXJxdWV0KHBhdGg9Y29udGV4dC50YXJnZXRfcGF0aCwgcGFydGl0aW9uX2NvbHM9Y29udGV4dC5wcV9wYXJ0aXRpb25zKQogICAgY29udGV4dC5iYXRjaCA9IFtdCiAgICByZXR1cm4gbGVuKGRmLmluZGV4KQoK",
        "noBaseImagesPull": true,
        "baseImage": "mlrun/mlrun:0.7.0-rc11",
        "offline": true,
        "codeEntryType": "sourceCode",
        "timestamp": 1630267708
      },
      "platform": {},
      "readinessTimeoutSeconds": 200,
      "serviceType": "NodePort",
      "securityContext": {},
      "scaleToZero": {
        "scaleResources": [
          {
            "metricName": "nuclio_processor_handled_events_total",
            "windowSize": "10m",
            "threshold": 0
          }
        ]
      },
      "eventTimeout": ""
    },
    "status": {
      "state": "ready",
      "httpPort": 30243,
      "scaleToZero": {
        "lastScaleEvent": "resourceUpdated",
        "lastScaleEventTime": "2021-08-29T20:08:34.178576589Z"
      }
    }
  },
  "model-deployment-pipeline-admin-model-server": {
    "metadata": {
      "name": "model-deployment-pipeline-admin-model-server",
      "namespace": "default-tenant",
      "labels": {
        "mlrun/class": "remote",
        "nuclio.io/project-name": "model-deployment-pipeline-admin"
      },
      "annotations": {
        "nuclio.io/generated_by": "function generated from /Users/hediingber/iguazio/misc-workspace/mlrun/functions/model_server/model_server.ipynb"
      },
      "resourceVersion": "37858340"
    },
    "spec": {
      "handler": "model_server:handler",
      "runtime": "python:3.6",
      "env": [
        {
          "name": "MODEL_CLASS",
          "value": "ClassifierModel"
        },
        {
          "name": "V3IO_API",
          "value": "v3io-webapi.default-tenant.svc:8081"
        },
        {
          "name": "V3IO_USERNAME",
          "value": "admin"
        },
        {
          "name": "V3IO_ACCESS_KEY",
          "value": "b7242e47-a051-4ec3-8384-5f99a26c1451"
        },
        {
          "name": "V3IO_FRAMESD",
          "value": "framesd:8081"
        },
        {
          "name": "SERVING_MODEL_my_model",
          "value": "/User/demos/model-deployment-pipeline/assets/model.pkl"
        },
        {
          "name": "INFERENCE_STREAM",
          "value": "users/admin/examples/model-deployment-pipeline/data/inference-stream"
        },
        {
          "name": "MLRUN_DEFAULT_PROJECT",
          "value": "model-deployment-pipeline-admin"
        },
        {
          "name": "MLRUN_DBPATH",
          "value": "http://mlrun-api:8080"
        },
        {
          "name": "MLRUN_NAMESPACE",
          "value": "default-tenant"
        }
      ],
      "resources": {},
      "imageHash": "1630267671719758893",
      "minReplicas": 1,
      "maxReplicas": 1,
      "triggers": {
        "default-http": {
          "class": "",
          "kind": "http",
          "name": "default-http",
          "maxWorkers": 1,
          "attributes": {
            "serviceType": "NodePort"
          }
        },
        "serving_stream": {
          "class": "",
          "kind": "v3ioStream",
          "name": "serving_stream",
          "maxWorkers": 10,
          "url": "http://v3io-webapi:8081/users/admin/examples/model-deployment-pipeline/data/serving-stream@ms",
          "password": "b7242e47-a051-4ec3-8384-5f99a26c1451",
          "attributes": {
            "pollingIntervalMs": 500,
            "readBatchSize": 64,
            "seekTo": "earliest"
          }
        }
      },
      "volumes": [
        {
          "volume": {
            "name": "v3io",
            "flexVolume": {
              "driver": "v3io/fuse",
              "options": {
                "accessKey": "b7242e47-a051-4ec3-8384-5f99a26c1451"
              }
            }
          },
          "volumeMount": {
            "name": "v3io",
            "mountPath": "/v3io"
          }
        },
        {
          "volume": {
            "name": "v3io",
            "flexVolume": {
              "driver": "v3io/fuse",
              "options": {
                "accessKey": "b7242e47-a051-4ec3-8384-5f99a26c1451"
              }
            }
          },
          "volumeMount": {
            "name": "v3io",
            "mountPath": "/User",
            "subPath": "users/admin"
          }
        }
      ],
      "version": -1,
      "alias": "latest",
      "build": {
        "functionSourceCode": "IyBHZW5lcmF0ZWQgYnkgbnVjbGlvLmV4cG9ydC5OdWNsaW9FeHBvcnRlcgoKaW1wb3J0IG1scnVuCgpmcm9tIGNsb3VkcGlja2xlIGltcG9ydCBsb2FkCmZyb20gdHlwaW5nIGltcG9ydCBMaXN0CmZyb20gZGF0ZXRpbWUgaW1wb3J0IGRhdGV0aW1lCmZyb20gc2tsZWFybi5kYXRhc2V0cyBpbXBvcnQgbG9hZF9pcmlzCgppbXBvcnQgd2FybmluZ3MKd2FybmluZ3MuZmlsdGVyd2FybmluZ3MoJ2lnbm9yZScpCgppbXBvcnQgb3MKaW1wb3J0IG51bXB5IGFzIG5wCgpjbGFzcyBDbGFzc2lmaWVyTW9kZWwobWxydW4ucnVudGltZXMuTUxNb2RlbFNlcnZlcik6CiAgICBkZWYgbG9hZChzZWxmKToKICAgICAgICAiIiJMb2FkIG1vZGVsIGZyb20gc3RvcmFnZS4iIiIKICAgICAgICBtb2RlbF9maWxlLCBleHRyYV9kYXRhID0gc2VsZi5nZXRfbW9kZWwoJy5wa2wnKQogICAgICAgIHNlbGYubW9kZWwgPSBsb2FkKG9wZW4obW9kZWxfZmlsZSwgJ3JiJykpCgogICAgZGVmIHByZWRpY3Qoc2VsZiwgYm9keTogZGljdCkgLT4gTGlzdDoKICAgICAgICAiIiJHZW5lcmF0ZSBtb2RlbCBwcmVkaWN0aW9ucyBmcm9tIHNhbXBsZS4KICAgICAgICAKICAgICAgICA6cGFyYW0gYm9keSA6IEEgZGljdCBvZiBvYnNlcnZhdGlvbnMsIGVhY2ggb2Ygd2hpY2ggaXMgYW4gMS1kaW1lbnNpb25hbCBmZWF0dXJlIHZlY3Rvci4KICAgICAgICAgICAgCiAgICAgICAgUmV0dXJucyBtb2RlbCBwcmVkaWN0aW9ucyBhcyBhIGBMaXN0YCwgb25lIGZvciBlYWNoIHJvdyBpbiB0aGUgYGJvZHlgIGlucHV0IGBMaXN0YC4KICAgICAgICAiIiIKICAgICAgICB0cnk6CiAgICAgICAgICAgIGZlYXRzID0gbnAuYXNhcnJheShib2R5WydpbnN0YW5jZXMnXSkKICAgICAgICAgICAgcmVzdWx0OiBucC5uZGFycmF5ID0gc2VsZi5tb2RlbC5wcmVkaWN0KGZlYXRzKQogICAgICAgICAgICByZXNwID0gcmVzdWx0LnRvbGlzdCgpCiAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgICAgICByYWlzZSBFeGNlcHRpb24oZiJGYWlsZWQgdG8gcHJlZGljdCB7ZX0iKQogICAgICAgIAogICAgICAgIHJldHVybiByZXNwCgoKZnJvbSBtbHJ1bi5ydW50aW1lcyBpbXBvcnQgbnVjbGlvX2luaXRfaG9vawpkZWYgaW5pdF9jb250ZXh0KGNvbnRleHQpOgogICAgbnVjbGlvX2luaXRfaG9vayhjb250ZXh0LCBnbG9iYWxzKCksICdzZXJ2aW5nJykKCmRlZiBoYW5kbGVyKGNvbnRleHQsIGV2ZW50KToKICAgIHJldHVybiBjb250ZXh0Lm1scnVuX2hhbmRsZXIoY29udGV4dCwgZXZlbnQpCg==",
        "noBaseImagesPull": true,
        "baseImage": "mlrun/mlrun:0.7.0-rc11",
        "offline": true,
        "codeEntryType": "sourceCode",
        "timestamp": 1630267678
      },
      "platform": {},
      "readinessTimeoutSeconds": 200,
      "serviceType": "NodePort",
      "securityContext": {},
      "scaleToZero": {
        "scaleResources": [
          {
            "metricName": "nuclio_processor_handled_events_total",
            "windowSize": "10m",
            "threshold": 0
          }
        ]
      },
      "eventTimeout": ""
    },
    "status": {
      "state": "ready",
      "httpPort": 30135,
      "scaleToZero": {
        "lastScaleEvent": "resourceUpdated",
        "lastScaleEventTime": "2021-08-29T20:08:09.714635613Z"
      }
    }
  },
  "model-deployment-pipeline-admin-stream-to-features": {
    "metadata": {
      "name": "model-deployment-pipeline-admin-stream-to-features",
      "namespace": "default-tenant",
      "labels": {
        "mlrun/class": "remote",
        "nuclio.io/project-name": "model-deployment-pipeline-admin"
      },
      "annotations": {
        "nuclio.io/generated_by": "function generated from functions/stream-to-features.ipynb"
      },
      "resourceVersion": "37856994"
    },
    "spec": {
      "handler": "stream-to-features:handler",
      "runtime": "python:3.6",
      "env": [
        {
          "name": "V3IO_API",
          "value": "v3io-webapi.default-tenant.svc:8081"
        },
        {
          "name": "V3IO_ACCESS_KEY",
          "value": "b7242e47-a051-4ec3-8384-5f99a26c1451"
        },
        {
          "name": "FEATURE_TABLE_PATH",
          "value": "admin/examples/model-deployment-pipeline/data/feature-table"
        },
        {
          "name": "SERVING_EVENTS",
          "value": "bet,win"
        },
        {
          "name": "FEATURE_LIST",
          "value": "socioeconomic_idx,purchase_sum,purchase_mean,purchase_count,purchase_var,bet_sum,bet_mean,bet_count,bet_var,win_sum,win_mean,win_count,win_var"
        },
        {
          "name": "CONTAINER",
          "value": "users"
        },
        {
          "name": "OUTPUT_STREAM_PATH",
          "value": "admin/examples/model-deployment-pipeline/data/serving-stream"
        },
        {
          "name": "PARTITION_ATTR",
          "value": "user_id"
        },
        {
          "name": "ENRICHMENT_TABLE_PATH",
          "value": "admin/examples/model-deployment-pipeline/data/enrichment-table"
        },
        {
          "name": "ENRICHMENT_KEY",
          "value": "postcode"
        },
        {
          "name": "MLRUN_DEFAULT_PROJECT",
          "value": "model-deployment-pipeline-admin"
        },
        {
          "name": "MLRUN_DBPATH",
          "value": "http://mlrun-api:8080"
        },
        {
          "name": "MLRUN_NAMESPACE",
          "value": "default-tenant"
        }
      ],
      "resources": {},
      "imageHash": "1630267658515268958",
      "minReplicas": 1,
      "maxReplicas": 1,
      "triggers": {
        "default-http": {
          "class": "",
          "kind": "http",
          "name": "default-http",
          "maxWorkers": 1,
          "attributes": {
            "serviceType": "NodePort"
          }
        },
        "serving_stream": {
          "class": "",
          "kind": "v3ioStream",
          "name": "serving_stream",
          "maxWorkers": 10,
          "url": "http://v3io-webapi:8081/users/admin/examples/model-deployment-pipeline/data/incoming-events-stream@stf",
          "password": "b7242e47-a051-4ec3-8384-5f99a26c1451",
          "attributes": {
            "pollingIntervalMs": 500,
            "readBatchSize": 64,
            "seekTo": "earliest"
          }
        }
      },
      "version": -1,
      "alias": "latest",
      "build": {
        "functionSourceCode": "IyBHZW5lcmF0ZWQgYnkgbnVjbGlvLmV4cG9ydC5OdWNsaW9FeHBvcnRlcgoKaW1wb3J0IG9zCmltcG9ydCBqc29uCmltcG9ydCBudW1weSBhcyBucApmcm9tIHYzaW8gaW1wb3J0IGRhdGFwbGFuZSwgY29tbW9uCmZyb20gZGF0ZXRpbWUgaW1wb3J0IGRhdGV0aW1lCgpkZWYgaW5pdF9jb250ZXh0KGNvbnRleHQpOgogICAgdjNpb19hY2Nlc3Nfa2V5ID0gb3MuZ2V0ZW52KCdWM0lPX0FDQ0VTU19LRVknKQogICAgY29udGFpbmVyID0gb3MuZ2V0ZW52KCdDT05UQUlORVInKQogICAgZmVhdHVyZV90YWJsZV9wYXRoID0gb3MuZ2V0ZW52KCdGRUFUVVJFX1RBQkxFX1BBVEgnKQogICAgZmVhdHVyZV9saXN0ID0gW3Yuc3RyaXAoKSBmb3IgdiBpbiBvcy5nZXRlbnYoJ0ZFQVRVUkVfTElTVCcpLnNwbGl0KCcsJyldCiAgICBzZXJ2aW5nX2V2ZW50cyA9IFt2LnN0cmlwKCkgZm9yIHYgaW4gb3MuZ2V0ZW52KCdTRVJWSU5HX0VWRU5UUycpLnNwbGl0KCcsJyldCiAgICBvdXRwdXRfc3RyZWFtX3BhdGggPSBvcy5nZXRlbnYoJ09VVFBVVF9TVFJFQU1fUEFUSCcpICAgIAogICAgcGFydGl0aW9uX2F0dHIgPSBvcy5nZXRlbnYoJ1BBUlRJVElPTl9BVFRSJykKICAgIGVucmljaG1lbnRfdGFibGVfcGF0aCA9IG9zLmdldGVudignRU5SSUNITUVOVF9UQUJMRV9QQVRIJykKICAgIGVucmljaG1lbnRfa2V5ID0gb3MuZ2V0ZW52KCdFTlJJQ0hNRU5UX0tFWScpCiAgICAKICAgIHYzaW9fY2xpZW50ID0gZGF0YXBsYW5lLkNsaWVudChlbmRwb2ludD0naHR0cDovL3YzaW8td2ViYXBpOjgwODEnLCBhY2Nlc3Nfa2V5PXYzaW9fYWNjZXNzX2tleSkKICAgIAogICAgZXZlbnRfaGFuZGxlcnMgPSB7J3JlZ2lzdHJhdGlvbic6IHByb2Nlc3NfcmVnaXN0cmF0aW9uLAogICAgICAgICAgICAgICAgICAgICAgJ3B1cmNoYXNlJzogcHJvY2Vzc19wdXJjaGFzZSwKICAgICAgICAgICAgICAgICAgICAgICdiZXQnOiBwcm9jZXNzX2JldCwKICAgICAgICAgICAgICAgICAgICAgICd3aW4nOiBwcm9jZXNzX3dpbn0KICAgIAogICAgc2V0YXR0cihjb250ZXh0LCAndjNpb19jbGllbnQnLCB2M2lvX2NsaWVudCkKICAgIHNldGF0dHIoY29udGV4dCwgJ2NvbnRhaW5lcicsIGNvbnRhaW5lcikKICAgIHNldGF0dHIoY29udGV4dCwgJ2ZlYXR1cmVfdGFibGVfcGF0aCcsIGZlYXR1cmVfdGFibGVfcGF0aCkKICAgIHNldGF0dHIoY29udGV4dCwgJ2ZlYXR1cmVfbGlzdCcsIGZlYXR1cmVfbGlzdCkKICAgIHNldGF0dHIoY29udGV4dCwgJ3NlcnZpbmdfZXZlbnRzJywgc2VydmluZ19ldmVudHMpCiAgICBzZXRhdHRyKGNvbnRleHQsICdvdXRwdXRfc3RyZWFtX3BhdGgnLCBvdXRwdXRfc3RyZWFtX3BhdGgpCiAgICBzZXRhdHRyKGNvbnRleHQsICdwYXJ0aXRpb25fYXR0cicsIHBhcnRpdGlvbl9hdHRyKQogICAgc2V0YXR0cihjb250ZXh0LCAnZXZlbnRfaGFuZGxlcnMnLCBldmVudF9oYW5kbGVycykKICAgIHNldGF0dHIoY29udGV4dCwgJ2VucmljaG1lbnRfdGFibGVfcGF0aCcsIGVucmljaG1lbnRfdGFibGVfcGF0aCkKICAgIHNldGF0dHIoY29udGV4dCwgJ2VucmljaG1lbnRfa2V5JywgZW5yaWNobWVudF9rZXkpCiAgICBwYXNzCgpkZWYgaGFuZGxlcihjb250ZXh0LCBldmVudCk6CiAgICBpZiB0eXBlKGV2ZW50LmJvZHkpIGlzIGRpY3Q6CiAgICAgICAgZXZlbnRfZGljdCA9IGV2ZW50LmJvZHkKICAgIGVsc2U6CiAgICAgICAgZXZlbnRfZGljdCA9IGpzb24ubG9hZHMoZXZlbnQuYm9keSkKICAgICAgICAKICAgIGlmIGlzX3JlbGV2YW50X2V2ZW50KGNvbnRleHQsIGV2ZW50X2RpY3QpOgogICAgICAgIGV2ZW50X3R5cGUgPSBnZXRfZXZlbnRfdHlwZShldmVudF9kaWN0KQogICAgICAgIGNvbnRleHQubG9nZ2VyLmluZm8oZidJbmNvbWluZyBldmVudCB0eXBlOiB7ZXZlbnRfdHlwZX0nKQogICAgICAgIAogICAgICAgIHByb2Nlc3NfZnVuYyA9IGNvbnRleHQuZXZlbnRfaGFuZGxlcnMuZ2V0KGV2ZW50X3R5cGUpCiAgICAgICAgY29udGV4dC5sb2dnZXIuaW5mbyhmJ1Byb2Nlc3NpbmcgZXZlbnQge2V2ZW50X2RpY3R9JykKICAgICAgICByZXNwb25zZSA9IHByb2Nlc3NfZnVuYyhjb250ZXh0LCBldmVudF9kaWN0KQogICAgICAgIGNvbnRleHQubG9nZ2VyLmluZm8oZidGaW5pc2hlZCBwcm9jZXNzaW5nIHdpdGggc3RhdHVzOiB7cmVzcG9uc2Uuc3RhdHVzX2NvZGV9IC0gYW5kIHJlc3BvbnNlIGJvZHk6IHtyZXNwb25zZS5ib2R5fSAsIGV2ZW50OiB7ZXZlbnRfZGljdH0nKQogICAgICAgIGlmIGV2ZW50X3R5cGUgaW4gY29udGV4dC5zZXJ2aW5nX2V2ZW50cyBhbmQgKDIwMCA8PSByZXNwb25zZS5zdGF0dXNfY29kZSA8IDMwMCkgOgogICAgICAgICAgICBjb250ZXh0LmxvZ2dlci5pbmZvKGYnc2VuZGluZyBldmVudCBmb3Igc2VydmluZycpCiAgICAgICAgICAgIHdyaXRlX3RvX291dHB1dF9zdHJlYW0oY29udGV4dCwgZXZlbnRfZGljdCkKICAgIGVsc2U6CiAgICAgICAgY29udGV4dC5sb2dnZXIuaW5mbyhmJ05vdCByZWxldmFudCBldmVudCcpCiAgICBwYXNzCgogICAgICAgIApkZWYgZ2V0X2V2ZW50X3R5cGUoZXZlbnQpOgogICAgcmV0dXJuIGV2ZW50WydldmVudF90eXBlJ10KCgpkZWYgaXNfcmVsZXZhbnRfZXZlbnQoY29udGV4dCwgZXZlbnQpOgogICAgcmV0dXJuIGdldF9ldmVudF90eXBlKGV2ZW50KSBpbiBjb250ZXh0LmV2ZW50X2hhbmRsZXJzCiAgICAgICAgCmRlZiBnZXRfZmVhdHVyZXMoY29udGV4dCwgZXZlbnQpOgogICAgdXNlcl9pZCA9IGV2ZW50Wyd1c2VyX2lkJ10KICAgIGZlYXR1cmVzX2xpc3QgPSBjb250ZXh0LmZlYXR1cmVfbGlzdAogICAgcmVzcCA9IGNvbnRleHQudjNpb19jbGllbnQua3YuZ2V0KGNvbnRhaW5lcj1jb250ZXh0LmNvbnRhaW5lciwgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFibGVfcGF0aD1jb250ZXh0LmZlYXR1cmVfdGFibGVfcGF0aCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk9c3RyKHVzZXJfaWQpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJhaXNlX2Zvcl9zdGF0dXM9ZGF0YXBsYW5lLlJhaXNlRm9yU3RhdHVzLm5ldmVyKQogICAgCiAgICBmZWF0X2xpc3QgPSBbcmVzcC5vdXRwdXQuaXRlbS5nZXQoZmVhdCkgZm9yIGZlYXQgaW4gZmVhdHVyZXNfbGlzdF0KICAgIGZlYXRfbGlzdCA9IFswIGlmIHYgaXMgTm9uZSBlbHNlIHYgZm9yIHYgaW4gZmVhdF9saXN0XQogICAgcmV0dXJuIGpzb24uZHVtcHMoeyd1c2VyX2lkJzogdXNlcl9pZCwgJ2luc3RhbmNlcyc6IG5wLmFycmF5KGZlYXRfbGlzdCkucmVzaGFwZSgxLC0xKS50b2xpc3QoKX0pCgoKZGVmIHdyaXRlX3RvX291dHB1dF9zdHJlYW0oY29udGV4dCwgZXZlbnQpOgogICAgcGFydGl0aW9uX2tleSA9IGV2ZW50LmdldChjb250ZXh0LnBhcnRpdGlvbl9hdHRyKSAgICAKICAgIGRhdGEgPSBnZXRfZmVhdHVyZXMoY29udGV4dCwgZXZlbnQpCiAgICAKICAgIHJlY29yZCA9IHsncGFydGl0aW9uX2tleSc6IHN0cihwYXJ0aXRpb25fa2V5KSwgJ2RhdGEnOiBkYXRhIH0KICAgIHJlc3AgPSBjb250ZXh0LnYzaW9fY2xpZW50LnN0cmVhbS5wdXRfcmVjb3Jkcyhjb250YWluZXI9Y29udGV4dC5jb250YWluZXIsIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cmVhbV9wYXRoPWNvbnRleHQub3V0cHV0X3N0cmVhbV9wYXRoLCAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWNvcmRzPVtyZWNvcmRdLCAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByYWlzZV9mb3Jfc3RhdHVzPWRhdGFwbGFuZS5SYWlzZUZvclN0YXR1cy5uZXZlcikKICAgIGNvbnRleHQubG9nZ2VyLmluZm8oZidTZW50IGZlYXR1cmVzIGZvciB1c2VyOiB7ZXZlbnRbInVzZXJfaWQiXX0gdG8gc2VydmluZyBzdHJlYW0nKQogICAgY29udGV4dC5sb2dnZXIuZGVidWcoZidGZWF0dXJlIHZhbHVlczoge2RhdGF9JykKCgpkZWYgZXZlbnRfdGltZV90b190cyhldmVudF90aW1lKToKICAgIGR0ID0gZGF0ZXRpbWUuc3RycHRpbWUoZXZlbnRfdGltZSwnJVktJW0tJWQgJUg6JU06JVMuJWYnKQogICAgcmV0dXJuIGRhdGV0aW1lLnRpbWVzdGFtcChkdCkKCgpkZWYgZ2V0X3N1bV9jb3VudF9tZWFuX3Zhcl9leHByKGZlYXR1cmU6IHN0ciwgY3VycmVudF92YWx1ZSk6CiAgICBzdW1fc3RyID0gZiJTRVQge2ZlYXR1cmV9X3N1bT0gaWZfbm90X2V4aXN0cyh7ZmVhdHVyZX1fc3VtLCAwKSArIHtjdXJyZW50X3ZhbHVlfTsiCiAgICBjb3VudF9zdHIgPSBmIlNFVCB7ZmVhdHVyZX1fY291bnQ9IGlmX25vdF9leGlzdHMoe2ZlYXR1cmV9X2NvdW50LCAwKSArIDE7IgogICAgZGVsdGFfc3RyID0gZiJTRVQge2ZlYXR1cmV9X2RlbHRhPSB7Y3VycmVudF92YWx1ZX0gLSBpZl9ub3RfZXhpc3RzKHtmZWF0dXJlfV9tZWFuLCAwKTsiCiAgICBtZWFuX3N0ciA9IGYiU0VUIHtmZWF0dXJlfV9tZWFuPSBpZl9ub3RfZXhpc3RzKHtmZWF0dXJlfV9tZWFuLCAwKSArICh7ZmVhdHVyZX1fZGVsdGEgLyB7ZmVhdHVyZX1fY291bnQpOyIKICAgIG0yX3N0ciA9IGYiU0VUIHtmZWF0dXJlfV9tMj0gaWZfbm90X2V4aXN0cyh7ZmVhdHVyZX1fbTIsIDApICsgKHtmZWF0dXJlfV9kZWx0YSAqICh7Y3VycmVudF92YWx1ZX0gLSB7ZmVhdHVyZX1fbWVhbikpOyIKICAgIHZhcl9zdHIgPSBmIlNFVCB7ZmVhdHVyZX1fdmFyPSB7ZmVhdHVyZX1fbTIgLyAobWF4KDIsIHtmZWF0dXJlfV9jb3VudCktMSkgOyIKICAgIGV4cHJlc3Npb24gPSBzdW1fc3RyICsgY291bnRfc3RyICsgZGVsdGFfc3RyICsgbWVhbl9zdHIgKyBtMl9zdHIgKyB2YXJfc3RyCiAgICByZXR1cm4gZXhwcmVzc2lvbgoKCmRlZiB1cGRhdGVfZmVhdHVyZXMoY29udGV4dCwgdXNlcl9pZCwgZXhwcmVzc2lvbiwgY29uZGl0aW9uKToKICAgIHJldHVybiBjb250ZXh0LnYzaW9fY2xpZW50Lmt2LnVwZGF0ZShjb250YWluZXI9Y29udGV4dC5jb250YWluZXIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFibGVfcGF0aD1jb250ZXh0LmZlYXR1cmVfdGFibGVfcGF0aCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk9c3RyKHVzZXJfaWQpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbmRpdGlvbj1jb25kaXRpb24sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhwcmVzc2lvbj1leHByZXNzaW9uLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJhaXNlX2Zvcl9zdGF0dXM9ZGF0YXBsYW5lLlJhaXNlRm9yU3RhdHVzLm5ldmVyKQoKCmRlZiBlbnJpY2hfZXZlbnQoY29udGV4dCwgZXZlbnQpOgogICAgaWYgY29udGV4dC5lbnJpY2htZW50X2tleSBpbiBldmVudDoKICAgICAgICBlbnJpY2htZW50X2tleV92YWx1ZSA9IGV2ZW50W2NvbnRleHQuZW5yaWNobWVudF9rZXldCiAgICAgICAgcmVzcCA9IGNvbnRleHQudjNpb19jbGllbnQua3YuZ2V0KGNvbnRhaW5lcj1jb250ZXh0LmNvbnRhaW5lciwgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYmxlX3BhdGg9Y29udGV4dC5lbnJpY2htZW50X3RhYmxlX3BhdGgsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleT1zdHIoZW5yaWNobWVudF9rZXlfdmFsdWUpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByYWlzZV9mb3Jfc3RhdHVzPWRhdGFwbGFuZS5SYWlzZUZvclN0YXR1cy5uZXZlcikKICAgICAgICBpZiAyMDAgPD0gcmVzcC5zdGF0dXNfY29kZSA8PSAyOTk6CiAgICAgICAgICAgIGVucmljaGVkX2V2ZW50ID0gZGljdChldmVudCwgKipyZXNwLm91dHB1dC5pdGVtKQogICAgICAgICAgICBjb250ZXh0LmxvZ2dlci5pbmZvX3dpdGgoJ0V2ZW50IHdhcyBlbnJpY2hlZCcsIGVucmljaGVkX2V2ZW50PWVucmljaGVkX2V2ZW50KQogICAgICAgICAgICByZXR1cm4gZW5yaWNoZWRfZXZlbnQKICAgICAgICBlbHNlOgogICAgICAgICAgICBjb250ZXh0LmxvZ2dlci5kZWJ1Z193aXRoKCJDb3VsZG4ndCBlbnJpY2ggZXZlbnQiLCAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbnJpY2htZW50X2tleV92YWx1ZT1lbnJpY2htZW50X2tleV92YWx1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZV9zdGF0dXM9cmVzcC5zdGF0dXNfY29kZSwgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2VfYm9keT1yZXNwLmJvZHkuZGVjb2RlKCd1dGYtOCcpKQogICAgICAgICAgICByZXR1cm4gZXZlbnQKICAgIGVsc2U6CiAgICAgICAgcmV0dXJuIGV2ZW50CgoKZGVmIHByb2Nlc3NfcmVnaXN0cmF0aW9uKGNvbnRleHQsIGV2ZW50KToKICAgIHVzZXJfaWQgPSBldmVudFsndXNlcl9pZCddCiAgICAKICAgIGV2ZW50ID0gZW5yaWNoX2V2ZW50KGNvbnRleHQsIGV2ZW50KQogICAgCiAgICBmZWF0dXJlcyA9IHsndXNlcl9pZCc6IGV2ZW50Wyd1c2VyX2lkJ10sCiAgICAgICAgICAgICAgICdyZWdpc3RyYXRpb25fZGF0ZSc6IGV2ZW50WydldmVudF90aW1lJ10sCiAgICAgICAgICAgICAgICdkYXRlX29mX2JpcnRoJzogZXZlbnRbJ2RhdGVfb2ZfYmlydGgnXSwKICAgICAgICAgICAgICAgJ3NvY2lvZWNvbm9taWNfaWR4JzogIGV2ZW50Wydzb2Npb2Vjb25vbWljX2lkeCddLAogICAgICAgICAgICAgICAnYWZmaWxpYXRlX3VybCc6IGV2ZW50WydhZmZpbGlhdGVfdXJsJ10sCiAgICAgICAgICAgICAgICdsYWJlbCc6IGV2ZW50WydsYWJlbCddfQogICAgCiAgICByZXNwb25zZSA9IGNvbnRleHQudjNpb19jbGllbnQua3YucHV0KGNvbnRhaW5lcj1jb250ZXh0LmNvbnRhaW5lciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFibGVfcGF0aD1jb250ZXh0LmZlYXR1cmVfdGFibGVfcGF0aCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2V5PXN0cih1c2VyX2lkKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlcz1mZWF0dXJlcywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmFpc2VfZm9yX3N0YXR1cz1kYXRhcGxhbmUuUmFpc2VGb3JTdGF0dXMubmV2ZXIpCiAgICByZXR1cm4gcmVzcG9uc2UKCgpkZWYgcHJvY2Vzc19wdXJjaGFzZShjb250ZXh0LCBldmVudCk6CiAgICB1c2VyX2lkID0gZXZlbnRbJ3VzZXJfaWQnXQogICAgZXZlbnRfdGltZSA9IGV2ZW50WydldmVudF90aW1lJ10KICAgIGV2ZW50X3RzID0gZXZlbnRfdGltZV90b190cyhldmVudF90aW1lKQogICAgCiAgICBwdXJjaGFzZV9hbW91bnQgPSBldmVudFsnYW1vdW50J10KCiAgICBmaXJzdF9wdXJjaGFzZV90c19zdHIgPSBmIlNFVCBmaXJzdF9wdXJjaGFzZV90cz1pZl9ub3RfZXhpc3RzKGZpcnN0X3B1cmNoYXNlX3RzLCB7ZXZlbnRfdHN9KTsiCiAgICBzdW1fY291bnRfbWVhbl92YXJfZXhwciA9IGdldF9zdW1fY291bnRfbWVhbl92YXJfZXhwcigncHVyY2hhc2UnLCBwdXJjaGFzZV9hbW91bnQpCiAgICAKICAgIGV4cHJlc3Npb24gPSBmaXJzdF9wdXJjaGFzZV90c19zdHIgKyBzdW1fY291bnRfbWVhbl92YXJfZXhwcgogICAgY29uZGl0aW9uID0gZiJleGlzdHMocmVnaXN0cmF0aW9uX2RhdGUpIEFORCAoTk9UIGV4aXN0cyhmaXJzdF9wdXJjaGFzZV90cykgT1IgZmlyc3RfcHVyY2hhc2VfdHMgPj0gKHtldmVudF90c30gLSA4NjQwMCApKSIKICAgIAogICAgcmV0dXJuIHVwZGF0ZV9mZWF0dXJlcyhjb250ZXh0LCB1c2VyX2lkLCBleHByZXNzaW9uLCBjb25kaXRpb24pCgoKZGVmIHByb2Nlc3NfYmV0KGNvbnRleHQsIGV2ZW50KToKICAgIHVzZXJfaWQgPSBldmVudFsndXNlcl9pZCddCiAgICBldmVudF90aW1lID0gZXZlbnRbJ2V2ZW50X3RpbWUnXQogICAgZXZlbnRfdHMgPSBldmVudF90aW1lX3RvX3RzKGV2ZW50X3RpbWUpCiAgICAKICAgIGJldF9hbW91bnQgPSBldmVudFsnYmV0X2Ftb3VudCddCgogICAgc3VtX2NvdW50X21lYW5fdmFyX2V4cHIgPSBnZXRfc3VtX2NvdW50X21lYW5fdmFyX2V4cHIoJ2JldCcsIGJldF9hbW91bnQpCiAgICAKICAgIGV4cHJlc3Npb24gPSBzdW1fY291bnRfbWVhbl92YXJfZXhwcgogICAgY29uZGl0aW9uID0gZiJmaXJzdF9wdXJjaGFzZV90cyA+PSAoe2V2ZW50X3RzfSAtIDg2NDAwICkiCiAgICAKICAgIHJldHVybiB1cGRhdGVfZmVhdHVyZXMoY29udGV4dCwgdXNlcl9pZCwgZXhwcmVzc2lvbiwgY29uZGl0aW9uKQoKCmRlZiBwcm9jZXNzX3dpbihjb250ZXh0LCBldmVudCk6CiAgICB1c2VyX2lkID0gZXZlbnRbJ3VzZXJfaWQnXQogICAgZXZlbnRfdGltZSA9IGV2ZW50WydldmVudF90aW1lJ10KICAgIGV2ZW50X3RzID0gZXZlbnRfdGltZV90b190cyhldmVudF90aW1lKQogICAgCiAgICB3aW5fYW1vdW50ID0gZXZlbnRbJ3dpbl9hbW91bnQnXQoKICAgIHN1bV9jb3VudF9tZWFuX3Zhcl9leHByID0gZ2V0X3N1bV9jb3VudF9tZWFuX3Zhcl9leHByKCd3aW4nLCB3aW5fYW1vdW50KQogICAgCiAgICBleHByZXNzaW9uID0gc3VtX2NvdW50X21lYW5fdmFyX2V4cHIKICAgIGNvbmRpdGlvbiA9IGYiZmlyc3RfcHVyY2hhc2VfdHMgPj0gKHtldmVudF90c30gLSA4NjQwMCApIgogICAgCiAgICByZXR1cm4gdXBkYXRlX2ZlYXR1cmVzKGNvbnRleHQsIHVzZXJfaWQsIGV4cHJlc3Npb24sIGNvbmRpdGlvbikKCg==",
        "noBaseImagesPull": true,
        "baseImage": "mlrun/mlrun:0.7.0-rc11",
        "offline": true,
        "codeEntryType": "sourceCode",
        "timestamp": 1630267665
      },
      "platform": {},
      "readinessTimeoutSeconds": 200,
      "serviceType": "NodePort",
      "securityContext": {},
      "scaleToZero": {
        "scaleResources": [
          {
            "metricName": "nuclio_processor_handled_events_total",
            "windowSize": "10m",
            "threshold": 0
          }
        ]
      },
      "eventTimeout": ""
    },
    "status": {
      "state": "ready",
      "httpPort": 31071,
      "scaleToZero": {
        "lastScaleEvent": "resourceUpdated",
        "lastScaleEventTime": "2021-08-29T20:07:49.086921904Z"
      }
    }
  },
  "network-operations-admin-concept-drift-streaming": {
    "metadata": {
      "name": "network-operations-admin-concept-drift-streaming",
      "namespace": "default-tenant",
      "labels": {
        "mlrun/class": "remote",
        "nuclio.io/project-name": "network-operations-admin"
      },
      "annotations": {
        "nuclio.io/generated_by": "function generated from https://github.com/daniels290813/functions.git#55a79c32be5d233cc11efcf40cd3edbe309bfdef:/home/kali/functions/concept_drift_streaming/concept_drift_streaming.py"
      },
      "resourceVersion": "37858333"
    },
    "spec": {
      "handler": "concept_drift_streaming:handler",
      "runtime": "python:3.6",
      "env": [
        {
          "name": "eddm_model_path",
          "value": "/User/demos/network-operations/artifacts/models/eddm.pkl"
        },
        {
          "name": "pagehinkley_model_path",
          "value": "/User/demos/network-operations/artifacts/models/pagehinkley.pkl"
        },
        {
          "name": "ddm_model_path",
          "value": "/User/demos/network-operations/artifacts/models/ddm.pkl"
        },
        {
          "name": "label_col",
          "value": "is_error"
        },
        {
          "name": "prediction_col",
          "value": "predictions"
        },
        {
          "name": "drift_stream",
          "value": "/User/demos/network-operations/streaming/drift_stream"
        },
        {
          "name": "tsdb_table",
          "value": "/User/demos/network-operations/streaming/drift_tsdb"
        },
        {
          "name": "pagehinkley_threshold",
          "value": "10"
        },
        {
          "name": "ddm_warning_level",
          "value": "2"
        },
        {
          "name": "ddm_out_control",
          "value": "3"
        },
        {
          "name": "V3IO_API",
          "value": "v3io-webapi.default-tenant.svc:8081"
        },
        {
          "name": "V3IO_USERNAME",
          "value": "admin"
        },
        {
          "name": "V3IO_ACCESS_KEY",
          "value": "b7242e47-a051-4ec3-8384-5f99a26c1451"
        },
        {
          "name": "V3IO_FRAMESD",
          "value": "framesd:8081"
        },
        {
          "name": "MLRUN_DEFAULT_PROJECT",
          "value": "network-operations-admin"
        },
        {
          "name": "MLRUN_DBPATH",
          "value": "http://mlrun-api:8080"
        },
        {
          "name": "MLRUN_NAMESPACE",
          "value": "default-tenant"
        }
      ],
      "resources": {},
      "imageHash": "1630268977510744857",
      "minReplicas": 1,
      "maxReplicas": 4,
      "triggers": {
        "default-http": {
          "class": "",
          "kind": "http",
          "name": "default-http",
          "maxWorkers": 1,
          "attributes": {
            "serviceType": "NodePort"
          }
        },
        "labeled_stream": {
          "class": "",
          "kind": "v3ioStream",
          "name": "labeled_stream",
          "maxWorkers": 1,
          "url": "http://v3io-webapi:8081/users/admin/demos/network-operations/streaming/labeled_stream@cds",
          "password": "b7242e47-a051-4ec3-8384-5f99a26c1451",
          "attributes": {
            "pollingIntervalMs": 500,
            "readBatchSize": 64,
            "seekTo": "latest"
          }
        }
      },
      "volumes": [
        {
          "volume": {
            "name": "v3io",
            "flexVolume": {
              "driver": "v3io/fuse",
              "options": {
                "accessKey": "b7242e47-a051-4ec3-8384-5f99a26c1451"
              }
            }
          },
          "volumeMount": {
            "name": "v3io",
            "mountPath": "/v3io"
          }
        },
        {
          "volume": {
            "name": "v3io",
            "flexVolume": {
              "driver": "v3io/fuse",
              "options": {
                "accessKey": "b7242e47-a051-4ec3-8384-5f99a26c1451"
              }
            }
          },
          "volumeMount": {
            "name": "v3io",
            "mountPath": "/User",
            "subPath": "users/admin"
          }
        }
      ],
      "version": -1,
      "alias": "latest",
      "build": {
        "functionSourceCode": "IyBHZW5lcmF0ZWQgYnkgbnVjbGlvLmV4cG9ydC5OdWNsaW9FeHBvcnRlcgoKaW1wb3J0IHNrbXVsdGlmbG93LmRyaWZ0X2RldGVjdGlvbgppbXBvcnQgbnVtcHkgYXMgbnAKaW1wb3J0IHBhbmRhcyBhcyBwZAppbXBvcnQgb3MKaW1wb3J0IGpzb24KaW1wb3J0IHYzaW8uZGF0YXBsYW5lCmltcG9ydCB2M2lvX2ZyYW1lcyBhcyB2M2YKaW1wb3J0IHJlcXVlc3RzCmZyb20gY2xvdWRwaWNrbGUgaW1wb3J0IGxvYWQKCmltcG9ydCByYW5kb20KCgpkZWYgc3BsaXRfcGF0aChtbnRwYXRoPSIiKToKICAgIGlmIG1udHBhdGhbMF0gPT0gIi8iOgogICAgICAgIG1udHBhdGggPSBtbnRwYXRoWzE6XQogICAgcGF0aHMgPSBtbnRwYXRoLnNwbGl0KCIvIikKICAgIGNvbnRhaW5lciA9IHBhdGhzWzBdCiAgICBzdWJwYXRoID0gIiIKICAgIGlmIGxlbihwYXRocykgPiAxOgogICAgICAgIHN1YnBhdGggPSBtbnRwYXRoW2xlbihjb250YWluZXIpIDpdCiAgICByZXR1cm4gY29udGFpbmVyLCBzdWJwYXRoCgoKZGVmIGNyZWF0ZV9zdHJlYW0oY29udGV4dCwgcGF0aCwgc2hhcmRzPTEpOgogICAgY29udGFpbmVyLCBzdHJlYW1fcGF0aCA9IHNwbGl0X3BhdGgocGF0aCkKICAgIGNvbnRleHQubG9nZ2VyLmluZm8oCiAgICAgICAgZiJDcmVhdGluZyBzdHJlYW0gaW4gQ29udGFpbmVyOiB7Y29udGFpbmVyfSAmIFBhdGgge3N0cmVhbV9wYXRofSIKICAgICkKICAgIHJlc3BvbnNlID0gY29udGV4dC52M2lvX2NsaWVudC5jcmVhdGVfc3RyZWFtKAogICAgICAgIGNvbnRhaW5lcj1jb250YWluZXIsCiAgICAgICAgcGF0aD1zdHJlYW1fcGF0aCwKICAgICAgICBzaGFyZF9jb3VudD1zaGFyZHMsCiAgICAgICAgcmFpc2VfZm9yX3N0YXR1cz12M2lvLmRhdGFwbGFuZS5SYWlzZUZvclN0YXR1cy5uZXZlciwKICAgICkKICAgIHJlc3BvbnNlLnJhaXNlX2Zvcl9zdGF0dXMoWzQwOSwgMjA0XSkKCgpkZWYgcHVzaF90b19zdHJlYW0oY29udGV4dCwgc3RyZWFtX3BhdGgsIGRhdGEpOgogICAgcmVjb3JkcyA9IFt7ImRhdGEiOiBqc29uLmR1bXBzKHJlYyl9IGZvciByZWMgaW4gZGF0YV0KICAgIGNvbnRhaW5lciwgc3RyZWFtX3BhdGggPSBzcGxpdF9wYXRoKHN0cmVhbV9wYXRoKQogICAgcmVzcG9uc2UgPSBjb250ZXh0LnYzaW9fY2xpZW50LnB1dF9yZWNvcmRzKAogICAgICAgIGNvbnRhaW5lcj1jb250YWluZXIsIHBhdGg9c3RyZWFtX3BhdGgsIHJlY29yZHM9cmVjb3JkcwogICAgKQoKCmRlZiBjb25zdHJ1Y3RfcmVjb3JkKHJlY29yZCk6CiAgICBsYWJlbF9jb2wgPSBvcy5nZXRlbnYoImxhYmVsX2NvbCIsICJsYWJlbCIpCiAgICBwcmVkaWN0aW9uX2NvbCA9IG9zLmdldGVudigicHJlZGljdGlvbl9jb2wiLCAicHJlZGljdGlvbiIpCiAgICByZXMgPSBkaWN0KFsoaywgcmVjb3JkW2tdKSBmb3IgayBpbiBbIndoZW4iLCAiY2xhc3MiLCAibW9kZWwiLCAicmVzcCIsICJyZXF1ZXN0Il1dKQogICAgcmVzWyJmZWF0dXJlX3ZlY3RvciJdID0gcmVzLnBvcCgicmVxdWVzdCIpWyJpbnN0YW5jZXMiXVswXQogICAgcmVzWyJ0aW1lc3RhbXAiXSA9IHJlcy5wb3AoIndoZW4iKQogICAgcmVzWyJwcmVkaWN0aW9uIl0gPSByZXNbInJlc3AiXVswXQogICAgcmV0dXJuIHJlcwoKCmRlZiBpbml0X2NvbnRleHQoY29udGV4dCk6CiAgICB2M2lvX2NsaWVudCA9IHYzaW8uZGF0YXBsYW5lLkNsaWVudCgpCiAgICBzZXRhdHRyKGNvbnRleHQsICJ2M2lvX2NsaWVudCIsIHYzaW9fY2xpZW50KQoKICAgIHYzZl9jbGllbnQgPSB2M2YuQ2xpZW50KCJmcmFtZXNkOjgwODEiLCBjb250YWluZXI9ImJpZ2RhdGEiKQogICAgc2V0YXR0cihjb250ZXh0LCAidjNmIiwgdjNmX2NsaWVudCkKICAgIHdpbmRvdyA9IFtdCiAgICBzZXRhdHRyKGNvbnRleHQsICJ3aW5kb3ciLCB3aW5kb3cpCiAgICBzZXRhdHRyKGNvbnRleHQsICJ3aW5kb3dfc2l6ZSIsIGludChvcy5nZXRlbnYoIndpbmRvd19zaXplIiwgMTApKSkKICAgIHNldGF0dHIoY29udGV4dCwgInRzZGJfdGFibGUiLCBvcy5nZXRlbnYoInRzZGJfdGFibGUiLCAiY29uY2VwdF9kcmlmdF90c2RiXzEiKSkKICAgIHRyeToKICAgICAgICBjb250ZXh0LnYzZi5jcmVhdGUoInRzZGIiLCBjb250ZXh0LnRzZGJfdGFibGUsIHJhdGU9IjEvcyIsIGlmX2V4aXN0cz0xKQogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgIGNvbnRleHQubG9nZ2VyLmluZm8oZiJDcmVhdGluZyBjb250ZXh0IHdpdGggcmF0ZT0gZmFpbGUgZm9yIHtlfSIpCiAgICAgICAgY29udGV4dC52M2YuY3JlYXRlKAogICAgICAgICAgICAidHNkYiIsIGNvbnRleHQudHNkYl90YWJsZSwgYXR0cnM9eyJyYXRlIjogIjEvcyJ9LCBpZl9leGlzdHM9MQogICAgICAgICkKCiAgICBjYWxsYmFja3MgPSBbY2FsbGJhY2suc3RyaXAoKSBmb3IgY2FsbGJhY2sgaW4gb3MuZ2V0ZW52KCJjYWxsYmFja3MiLCAiIikuc3BsaXQoIiwiKV0KICAgIHNldGF0dHIoY29udGV4dCwgImNhbGxiYWNrcyIsIGNhbGxiYWNrcykKCiAgICBzZXRhdHRyKGNvbnRleHQsICJkcmlmdF9zdHJlYW0iLCBvcy5nZXRlbnYoImRyaWZ0X3N0cmVhbSIsICIvYmlnZGF0YS9kcmlmdF9zdHJlYW0iKSkKICAgIHRyeToKICAgICAgICBjcmVhdGVfc3RyZWFtKAogICAgICAgICAgICBjb250ZXh0LCBjb250ZXh0LmRyaWZ0X3N0cmVhbSwgaW50KG9zLmdldGVudigiZHJpZnRfc3RyZWFtX3NoYXJkcyIsIDEpKQogICAgICAgICkKICAgIGV4Y2VwdDoKICAgICAgICBjb250ZXh0LmxvZ2dlci5pbmZvKGYie2NvbnRleHQuZHJpZnRfc3RyZWFtfSBhbHJlYWR5IGV4aXN0cyIpCgogICAgbW9kZWxzID0ge30KICAgIG1vZGVsX3R5cGVzID0gWyJwYWdlaGlua2VseSIsICJkZG0iLCAiZWRkbSJdCiAgICBwYXRoX3N1ZmZpeCA9ICJfbW9kZWxfcGF0aCIKICAgIGZvciBtb2RlbCBpbiBtb2RlbF90eXBlczoKICAgICAgICBtb2RlbF9lbnYgPSBmInttb2RlbH17cGF0aF9zdWZmaXh9IgogICAgICAgIGlmIG1vZGVsX2VudiBpbiBvcy5lbnZpcm9uOgogICAgICAgICAgICB3aXRoIG9wZW4ob3MuZW52aXJvblttb2RlbF9lbnZdLCAicmIiKSBhcyBmOgogICAgICAgICAgICAgICAgbW9kZWxzW21vZGVsXSA9IGxvYWQoZikKICAgIHNldGF0dHIoY29udGV4dCwgIm1vZGVscyIsIG1vZGVscykKCiAgICBzZXRhdHRyKGNvbnRleHQsICJsYWJlbF9jb2wiLCBvcy5nZXRlbnYoImxhYmVsX2NvbCIsICJsYWJlbCIpKQogICAgc2V0YXR0cihjb250ZXh0LCAicHJlZGljdGlvbl9jb2wiLCBvcy5nZXRlbnYoInByZWRpY3Rpb25fY29sIiwgInByZWRpY3Rpb24iKSkKCgpkZWYgaGFuZGxlcihjb250ZXh0LCBldmVudCk6CiAgICBjb250ZXh0LmxvZ2dlci5pbmZvKGYiZXZlbnQ6IHtldmVudC5ib2R5fSIpCiAgICBmdWxsX2V2ZW50ID0ganNvbi5sb2FkcyhldmVudC5ib2R5KQogICAgcmVjb3JkID0gY29uc3RydWN0X3JlY29yZChmdWxsX2V2ZW50KQoKICAgIGlzX2Vycm9yID0gcmVjb3JkW2NvbnRleHQubGFiZWxfY29sXSAhPSByZWNvcmRbY29udGV4dC5wcmVkaWN0aW9uX2NvbF0KICAgIGNvbnRleHQubG9nZ2VyLmluZm8oZiJBZGRpbmcge2lzX2Vycm9yfSIpCgogICAgZm9yIG5hbWUsIG1vZGVsIGluIGNvbnRleHQubW9kZWxzLml0ZW1zKCk6CiAgICAgICAgcmVzdWx0cyA9IHsidGltZXN0YW1wIjogcmVjb3JkWyJ0aW1lc3RhbXAiXX0KICAgICAgICByZXN1bHRzWyJhbGdvcml0aG0iXSA9IG5hbWUKICAgICAgICBtb2RlbC5hZGRfZWxlbWVudChpc19lcnJvcikKCiAgICAgICAgaWYgaGFzYXR0cihtb2RlbCwgImRldGVjdGVkX3dhcm5pbmdfem9uZSIpIGFuZCBtb2RlbC5kZXRlY3RlZF93YXJuaW5nX3pvbmUoKToKICAgICAgICAgICAgY29udGV4dC5sb2dnZXIuaW5mbyhmIntuYW1lfVx0V2FybmluZyB6b25lIGRldGVjdGVkIikKICAgICAgICAgICAgcmVzdWx0c1sid2FybmluZ196b25lIl0gPSAxCiAgICAgICAgICAgIGZ1bGxfZXZlbnRbZiJ7bmFtZX1fd2FybmluZ196b25lIl0gPSAxCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmVzdWx0c1sid2FybmluZ196b25lIl0gPSAwCiAgICAgICAgICAgIGZ1bGxfZXZlbnRbZiJ7bmFtZX1fd2FybmluZ196b25lIl0gPSAwCgogICAgICAgIGlmIG1vZGVsLmRldGVjdGVkX2NoYW5nZSgpOgogICAgICAgICAgICBjb250ZXh0LmxvZ2dlci5pbmZvKCJDaGFuZ2UgRGV0ZWN0ZWQiKQogICAgICAgICAgICByZXN1bHRzWyJjaGFuZ2VfZGV0ZWN0ZWQiXSA9IDEKICAgICAgICAgICAgZnVsbF9ldmVudFtmIntuYW1lfV9kcmlmdCJdID0gMQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHJlc3VsdHNbImNoYW5nZV9kZXRlY3RlZCJdID0gMAogICAgICAgICAgICBmdWxsX2V2ZW50W2Yie25hbWV9X2RyaWZ0Il0gPSAwCiAgICAgICAgY29udGV4dC53aW5kb3cuYXBwZW5kKHJlc3VsdHMpCgogICAgcHVzaF90b19zdHJlYW0oY29udGV4dCwgY29udGV4dC5kcmlmdF9zdHJlYW0sIFtmdWxsX2V2ZW50XSkKCiAgICBpZiBjb250ZXh0LmNhbGxiYWNrcyAhPSBbIiJdOgogICAgICAgIGZvciBjYWxsYmFjayBpbiBjb250ZXh0LmNhbGxiYWNrczoKICAgICAgICAgICAgcmVxdWVzdHMucG9zdCh1cmw9Y2FsbGJhY2ssIGpzb249ZnVsbF9ldmVudCkKCiAgICBpZiAobGVuKGNvbnRleHQud2luZG93KSAvIGxlbihjb250ZXh0Lm1vZGVscykpID49IGNvbnRleHQud2luZG93X3NpemU6CiAgICAgICAgZGYgPSBwZC5EYXRhRnJhbWUoY29udGV4dC53aW5kb3cpCiAgICAgICAgZGZbInRpbWVzdGFtcCJdID0gcGQudG9fZGF0ZXRpbWUoZGZbInRpbWVzdGFtcCJdKQogICAgICAgIGRmID0gZGYuc2V0X2luZGV4KFsidGltZXN0YW1wIiwgImFsZ29yaXRobSJdKQogICAgICAgIGNvbnRleHQudjNmLndyaXRlKCJ0c2RiIiwgY29udGV4dC50c2RiX3RhYmxlLCBkZikKICAgICAgICBjb250ZXh0LndpbmRvdyA9IFtdCg==",
        "noBaseImagesPull": true,
        "baseImage": "mlrun/ml-models:0.7.0-rc11",
        "commands": [
          "python -m pip install scikit-multiflow==0.4.1 v3io_frames"
        ],
        "offline": true,
        "codeEntryType": "sourceCode",
        "timestamp": 1630269000
      },
      "platform": {},
      "serviceType": "NodePort",
      "securityContext": {},
      "scaleToZero": {
        "scaleResources": [
          {
            "metricName": "nuclio_processor_handled_events_total",
            "windowSize": "10m",
            "threshold": 0
          }
        ]
      },
      "eventTimeout": ""
    },
    "status": {
      "state": "ready"
    }
  },
  "network-operations-admin-create-feature-vector": {
    "metadata": {
      "name": "network-operations-admin-create-feature-vector",
      "namespace": "default-tenant",
      "labels": {
        "mlrun/class": "remote",
        "nuclio.io/project-name": "network-operations-admin"
      },
      "annotations": {
        "nuclio.io/generated_by": "function generated from /User/demos/network-operations/notebooks/preprocessor.ipynb"
      },
      "resourceVersion": "37858328"
    },
    "spec": {
      "handler": "preprocessor:handler",
      "runtime": "python:3.6",
      "env": [
        {
          "name": "METRICS_TABLE",
          "value": "/User/demos/network-operations/streaming/metrics"
        },
        {
          "name": "FEATURES_TABLE",
          "value": "/User/demos/network-operations/streaming/features"
        },
        {
          "name": "base_dataset",
          "value": "store://datasets/network-operations-admin/train_test_set:cd151783-05df-4f9c-a9db-3aa674e4a058"
        },
        {
          "name": "BATCHES_TO_GENERATE",
          "value": "20"
        },
        {
          "name": "keys",
          "value": "timestamp,company,data_center,device"
        },
        {
          "name": "metrics",
          "value": "[\"cpu_utilization\", \"throughput\", \"packet_loss\", \"latency\"]"
        },
        {
          "name": "metric_aggs",
          "value": "[\"mean\", \"sum\", \"std\", \"var\", \"min\", \"max\", \"median\"]"
        },
        {
          "name": "suffix",
          "value": "daily"
        },
        {
          "name": "window",
          "value": "3"
        },
        {
          "name": "center",
          "value": "0"
        },
        {
          "name": "inplace",
          "value": "0"
        },
        {
          "name": "drop_na",
          "value": "1"
        },
        {
          "name": "files_to_select",
          "value": "1"
        },
        {
          "name": "label_col",
          "value": "is_error"
        },
        {
          "name": "is_save_to_tsdb",
          "value": "0"
        },
        {
          "name": "V3IO_API",
          "value": "v3io-webapi.default-tenant.svc:8081"
        },
        {
          "name": "V3IO_USERNAME",
          "value": "admin"
        },
        {
          "name": "V3IO_ACCESS_KEY",
          "value": "b7242e47-a051-4ec3-8384-5f99a26c1451"
        },
        {
          "name": "V3IO_FRAMESD",
          "value": "framesd:8081"
        },
        {
          "name": "aggregate_fn_url",
          "value": "hub://aggregate"
        },
        {
          "name": "MLRUN_DEFAULT_PROJECT",
          "value": "network-operations-admin"
        },
        {
          "name": "MLRUN_DBPATH",
          "value": "http://mlrun-api:8080"
        },
        {
          "name": "MLRUN_NAMESPACE",
          "value": "default-tenant"
        }
      ],
      "resources": {},
      "imageHash": "1630268924665750420",
      "minReplicas": 1,
      "maxReplicas": 4,
      "triggers": {
        "cron": {
          "class": "",
          "kind": "cron",
          "name": "cron",
          "attributes": {
            "interval": "1m"
          }
        },
        "default-http": {
          "class": "",
          "kind": "http",
          "name": "default-http",
          "maxWorkers": 1,
          "attributes": {
            "serviceType": "NodePort"
          }
        }
      },
      "volumes": [
        {
          "volume": {
            "name": "v3io",
            "flexVolume": {
              "driver": "v3io/fuse",
              "options": {
                "accessKey": "b7242e47-a051-4ec3-8384-5f99a26c1451"
              }
            }
          },
          "volumeMount": {
            "name": "v3io",
            "mountPath": "/v3io"
          }
        },
        {
          "volume": {
            "name": "v3io",
            "flexVolume": {
              "driver": "v3io/fuse",
              "options": {
                "accessKey": "b7242e47-a051-4ec3-8384-5f99a26c1451"
              }
            }
          },
          "volumeMount": {
            "name": "v3io",
            "mountPath": "/User",
            "subPath": "users/admin"
          }
        }
      ],
      "version": -1,
      "alias": "latest",
      "build": {
        "functionSourceCode": "IyBHZW5lcmF0ZWQgYnkgbnVjbGlvLmV4cG9ydC5OdWNsaW9FeHBvcnRlcgoKaW1wb3J0IG9zCmltcG9ydCBwYW5kYXMgYXMgcGQKZnJvbSBtbHJ1bi5kYXRhc3RvcmUgaW1wb3J0IERhdGFJdGVtCmltcG9ydCBhc3QKCmZyb20gdHlwaW5nIGltcG9ydCBVbmlvbgpmcm9tIG1scnVuIGltcG9ydCBtbGNvbmYsIGltcG9ydF9mdW5jdGlvbiwgbW91bnRfdjNpbywgTmV3VGFzaywgZnVuY3Rpb25fdG9fbW9kdWxlLCBnZXRfb3JfY3JlYXRlX2N0eApmcm9tIG1scnVuLnJ1biBpbXBvcnQgZ2V0X2RhdGFpdGVtCgpkZWYgZ2V0X2RhdGFfdHNkYihjb250ZXh0KToKICAgIGRmID0gY29udGV4dC52M2YucmVhZChiYWNrZW5kPSd0c2RiJywgcXVlcnk9ZidzZWxlY3QgY3B1X3V0aWxpemF0aW9uLCBsYXRlbmN5LCBwYWNrZXRfbG9zcywgdGhyb3VnaHB1dCwgaXNfZXJyb3IgZnJvbSB7Y29udGV4dC5tZXRyaWNzX3RhYmxlfScsCiAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnQ9Zidub3ctMmgnLCBlbmQ9J25vdycsIG11bHRpX2luZGV4PVRydWUpCiAgICBkZiA9IGZvcm1hdF9kZl9mcm9tX3RzZGIoY29udGV4dCwgZGYpCiAgICByZXR1cm4gZGYKCmRlZiBnZXRfZGF0YV9wYXJxdWV0KGNvbnRleHQpOgogICAgbXBhdGggPSBbb3MucGF0aC5qb2luKGNvbnRleHQubWV0cmljc190YWJsZSwgZmlsZSkgZm9yIGZpbGUgaW4gb3MubGlzdGRpcihjb250ZXh0Lm1ldHJpY3NfdGFibGUpIGlmIGZpbGUuZW5kc3dpdGgoKCdwYXJxdWV0JywgJ3BxJykpXQogICAgZmlsZXNfYnlfdXBkYXRlZCA9IHNvcnRlZChtcGF0aCwga2V5PW9zLnBhdGguZ2V0bXRpbWUsIHJldmVyc2U9VHJ1ZSkKICAgIGNvbnRleHQubG9nZ2VyLmluZm8oZmlsZXNfYnlfdXBkYXRlZCkKICAgIGxhdGVzdCA9IGZpbGVzX2J5X3VwZGF0ZWRbOmNvbnRleHQuZmlsZXNfdG9fc2VsZWN0XQogICAgY29udGV4dC5sb2dnZXIuaW5mbyhmJ0FnZ3JlZ2F0aW5nIHtsYXRlc3R9JykKICAgIGlucHV0X2RmID0gcGQuY29uY2F0KFtwZC5yZWFkX3BhcnF1ZXQoZGYpIGZvciBkZiBpbiBsYXRlc3RdKQogICAgcmV0dXJuIGlucHV0X2RmCgpkZWYgc2F2ZV90b190c2RiKGNvbnRleHQsIGZlYXR1cmVzOiBwZC5EYXRhRnJhbWUpOiAgIAogICAgY29udGV4dC52M2Yud3JpdGUoJ3RzZGInLCBjb250ZXh0LmZlYXR1cmVzX3RhYmxlLCBmZWF0dXJlcykKCmRlZiBzYXZlX3RvX3BhcnF1ZXQoY29udGV4dCwgZGY6IHBkLkRhdGFGcmFtZSk6CiAgICBwcmludCgnU2F2aW5nIGZlYXR1cmVzIHRvIFBhcnF1ZXQnKQogICAgCiAgICBkZiA9IGRmLnJlc2V0X2luZGV4KCkKICAgIGRmWyd0aW1lc3RhbXAnXSA9IGRmLmxvY1s6LCAndGltZXN0YW1wJ10uYXN0eXBlKCdkYXRldGltZTY0W21zXScpCiAgICAKICAgIGRmID0gZGYuc2V0X2luZGV4KGNvbnRleHQua2V5cykKICAgIAogICAgZmlyc3RfdGltZXN0YW1wID0gZGYuaW5kZXhbMF1bMF0uc3RyZnRpbWUoJyVZJW0lZFQlSCVNJVMnKQogICAgbGFzdF90aW1lc3RhbXAgPSBkZi5pbmRleFstMV1bMF0uc3RyZnRpbWUoJyVZJW0lZFQlSCVNJVMnKQogICAgZmlsZW5hbWUgPSBmaXJzdF90aW1lc3RhbXAgKyAnLScgKyBsYXN0X3RpbWVzdGFtcCArICcucGFycXVldCcKICAgIGZpbGVwYXRoID0gb3MucGF0aC5qb2luKGNvbnRleHQuZmVhdHVyZXNfdGFibGUsIGZpbGVuYW1lKQogICAgd2l0aCBvcGVuKGZpbGVwYXRoLCAnd2IrJykgYXMgZjoKICAgICAgICBkZi50b19wYXJxdWV0KGYpCgpkZWYgaW5pdF9jb250ZXh0KGNvbnRleHQpOgogICAgCiAgICBtbGNvbmYuZGJwYXRoID0gJ2h0dHA6Ly9tbHJ1bi1hcGk6ODA4MCcKICAgIAogICAgYWdncmVnYXRlX2ZuID0gaW1wb3J0X2Z1bmN0aW9uKG9zLmdldGVudignYWdncmVnYXRlX2ZuX3VybCcsICdodWI6Ly9hZ2dyZWdhdGUnKSkKICAgIG1vZCA9IGZ1bmN0aW9uX3RvX21vZHVsZShhZ2dyZWdhdGVfZm4pCiAgICBzZXRhdHRyKGNvbnRleHQsICdhZ2dyZWdhdGUnLCBtb2QuYWdncmVnYXRlKQogICAgCiAgICBhZ19jb250ZXh0ID0gZ2V0X29yX2NyZWF0ZV9jdHgoJ2FnZ3JlZ2F0ZScpCiAgICBzZXRhdHRyKGNvbnRleHQsICdtbHJ1bl9jdHgnLCBhZ19jb250ZXh0KQogICAgCiAgICBiYXRjaGVzX3RvX2dlbmVyYXRlID0gaW50KG9zLmdldGVudignQkFUQ0hFU19UT19HRU5FUkFURScsIDIwKSkKICAgIHNldGF0dHIoY29udGV4dCwgJ2JhdGNoZXNfdG9fZ2VuZXJhdGUnLCBiYXRjaGVzX3RvX2dlbmVyYXRlKQogICAgc2V0YXR0cihjb250ZXh0LCAnYmF0Y2hlc19nZW5lcmF0ZWQnLCAwKQogICAgCiAgICBzZXRhdHRyKGNvbnRleHQsICdtZXRyaWNzX3RhYmxlJywgb3MuZ2V0ZW52KCdNRVRSSUNTX1RBQkxFJywgJ25ldG9wc19tZXRyaWNzJykpCiAgICBzZXRhdHRyKGNvbnRleHQsICdmZWF0dXJlc190YWJsZScsIG9zLmdldGVudignRkVBVFVSRVNfVEFCTEUnLCAnbmV0b3BzX2ZlYXR1cmVzJykpCiAgICBzZXRhdHRyKGNvbnRleHQsICdrZXlzJywgb3MuZ2V0ZW52KCdrZXlzJywgJycpLnNwbGl0KCcsJykpCiAgICBzZXRhdHRyKGNvbnRleHQsICdtZXRyaWNzJywgYXN0LmxpdGVyYWxfZXZhbChvcy5nZXRlbnYoJ21ldHJpY3MnLCAnJykpKQogICAgc2V0YXR0cihjb250ZXh0LCAnbWV0cmljX2FnZ3MnLCBhc3QubGl0ZXJhbF9ldmFsKG9zLmdldGVudignbWV0cmljX2FnZ3MnLCAnJykpKQogICAgc2V0YXR0cihjb250ZXh0LCAnc3VmZml4Jywgb3MuZ2V0ZW52KCdzdWZmaXgnLCAnX2FnZycpKQogICAgc2V0YXR0cihjb250ZXh0LCAnd2luZG93JywgaW50KG9zLmdldGVudignd2luZG93JywgJzMnKSkpCiAgICBzZXRhdHRyKGNvbnRleHQsICdjZW50ZXInLCBib29sKGludChvcy5nZXRlbnYoJ2NlbnRlcicsICcwJykpKSkKICAgIHNldGF0dHIoY29udGV4dCwgJ2lucGxhY2UnLCBib29sKGludChvcy5nZXRlbnYoJ2lucGxhY2UnLCAnMCcpKSkpCiAgICBzZXRhdHRyKGNvbnRleHQsICdkcm9wX25hJywgYm9vbChpbnQob3MuZ2V0ZW52KCdkcm9wX25hJywgJzEnKSkpKQogICAgc2V0YXR0cihjb250ZXh0LCAnZmlsZXNfdG9fc2VsZWN0JywgaW50KG9zLmdldGVudignZmlsZXNfdG9fc2VsZWN0JywgMSkpKQogICAgCiAgICBzYW1wbGVfZGF0YXNldCA9IGdldF9kYXRhaXRlbShvcy5lbnZpcm9uWydiYXNlX2RhdGFzZXQnXSkuYXNfZGYoKQogICAgc2VsZWN0ZWRfZmVhdHVyZXMgPSBbY29sIGZvciBjb2wgaW4gbGlzdChzYW1wbGVfZGF0YXNldC5jb2x1bW5zKSBpZiBjb2wgIT0gb3MuZ2V0ZW52KCdsYWJlbF9jb2wnLCAnJyldCiAgICBhZ2dyZWdhdGVkX2ZlYXR1cmVzID0gW2ZlYXR1cmUuc3BsaXQoJ18nKVs6LTFdIGZvciBmZWF0dXJlIGluIHNlbGVjdGVkX2ZlYXR1cmVzIGlmIGZlYXR1cmUuZW5kc3dpdGgoY29udGV4dC5zdWZmaXgpXQogICAgYmFzZV9mZWF0dXJlcyA9IHNldChbZlswXSBmb3IgZiBpbiBhZ2dyZWdhdGVkX2ZlYXR1cmVzXSkKICAgIGFnZ3JlZ2F0aW9ucyA9IHNldChbZlsxXSBmb3IgZiBpbiBhZ2dyZWdhdGVkX2ZlYXR1cmVzXSkKICAgIHNldGF0dHIoY29udGV4dCwgJ2ZlYXR1cmVzJywgc2VsZWN0ZWRfZmVhdHVyZXMpCiAgICBzZXRhdHRyKGNvbnRleHQsICdiYXNlX2ZlYXR1cmVzJywgYmFzZV9mZWF0dXJlcykKICAgIHNldGF0dHIoY29udGV4dCwgJ2FnZ3JlZ2F0aW9ucycsIGFnZ3JlZ2F0aW9ucykKICAgIAogICAgCiAgICAKICAgIGlzX3NhdmVfdG9fdHNkYiA9IGJvb2woaW50KG9zLmdldGVudignc2F2ZV90b190c2RiJywgJzAnKSkpCiAgICBpZiBpc19zYXZlX3RvX3RzZGI6CiAgICAgICAgdjNpb19jbGllbnQgPSB2M2YuQ2xpZW50KGFkZHJlc3M9J2ZyYW1lc2Q6ODA4MScsIGNvbnRhaW5lcj0nYmlnZGF0YScpCiAgICAgICAgc2V0YXR0cihjb250ZXh0LCAndjNmJywgdjNpb19jbGllbnQpCiAgICAgICAgCiAgICAgICAgY29udGV4dC52M2YuY3JlYXRlKCd0c2RiJywgY29udGV4dC5mZWF0dXJlc190YWJsZSwgYXR0cnM9eydyYXRlJzogJzEvcyd9LCBpZl9leGlzdHM9MSkKICAgICAgICAKICAgICAgICBzZXRhdHRyKGNvbnRleHQsICdyZWFkJywgZ2V0X2RhdGFfdHNkYikKICAgICAgICAKICAgICAgICBzZXRhdHRyKGNvbnRleHQsICd3cml0ZScsIHNhdmVfdG9fdHNkYikKICAgICAgICAKICAgIGVsc2U6CiAgICAgICAgZmlsZXBhdGggPSBvcy5wYXRoLmpvaW4oY29udGV4dC5mZWF0dXJlc190YWJsZSkKICAgICAgICBpZiBub3Qgb3MucGF0aC5leGlzdHMoZmlsZXBhdGgpOgogICAgICAgICAgICBvcy5tYWtlZGlycyhmaWxlcGF0aCkKICAgICAgICAgICAgCiAgICAgICAgc2V0YXR0cihjb250ZXh0LCAncmVhZCcsIGdldF9kYXRhX3BhcnF1ZXQpCiAgICAgICAgCiAgICAgICAgc2V0YXR0cihjb250ZXh0LCAnd3JpdGUnLCBzYXZlX3RvX3BhcnF1ZXQpCgpkZWYgaGFuZGxlcihjb250ZXh0LCBldmVudCk6CiAgICAKICAgIGlmIChjb250ZXh0LmJhdGNoZXNfdG9fZ2VuZXJhdGUgPT0gLTEpIG9yIChjb250ZXh0LmJhdGNoZXNfZ2VuZXJhdGVkIDw9IGNvbnRleHQuYmF0Y2hlc190b19nZW5lcmF0ZSk6CiAgICAKICAgICAgICBkZiA9IGNvbnRleHQucmVhZChjb250ZXh0KQoKICAgICAgICByZXMgPSBjb250ZXh0LmFnZ3JlZ2F0ZShjb250ZXh0PWNvbnRleHQubWxydW5fY3R4LAogICAgICAgICAgICAgICAgICBkZl9hcnRpZmFjdD1kZiwKICAgICAgICAgICAgICAgICAgc2F2ZV90bz1jb250ZXh0LmZlYXR1cmVzX3RhYmxlLCAKICAgICAgICAgICAgICAgICAga2V5cz1jb250ZXh0LmtleXMsIAogICAgICAgICAgICAgICAgICBtZXRyaWNzPWNvbnRleHQubWV0cmljcywgCiAgICAgICAgICAgICAgICAgIG1ldHJpY19hZ2dzPWNvbnRleHQubWV0cmljX2FnZ3MsIAogICAgICAgICAgICAgICAgICBzdWZmaXg9Y29udGV4dC5zdWZmaXgsIAogICAgICAgICAgICAgICAgICB3aW5kb3c9Y29udGV4dC53aW5kb3csIAogICAgICAgICAgICAgICAgICBjZW50ZXI9Y29udGV4dC5jZW50ZXIsIAogICAgICAgICAgICAgICAgICBpbnBsYWNlPWNvbnRleHQuaW5wbGFjZSwKICAgICAgICAgICAgICAgICAgZHJvcF9uYT1jb250ZXh0LmRyb3BfbmEpCgogICAgICAgIGNvbnRleHQubG9nZ2VyLmluZm8oZidyZXMuY29sdW1uczoge3Jlcy5jb2x1bW5zfScpCiAgICAgICAgY29udGV4dC5sb2dnZXIuaW5mbyhmJ2NvbnRleHQuY29sdW1uczoge2NvbnRleHQuZmVhdHVyZXN9JykKICAgICAgICByZXMgPSByZXNbY29udGV4dC5mZWF0dXJlc10KCiAgICAgICAgY29udGV4dC53cml0ZShjb250ZXh0LCByZXMpCiAgICAgICAgCiAgICAgICAgY29udGV4dC5iYXRjaGVzX2dlbmVyYXRlZCArPSAxCgo=",
        "noBaseImagesPull": true,
        "baseImage": "mlrun/ml-models:0.7.0-rc11",
        "offline": true,
        "codeEntryType": "sourceCode",
        "timestamp": 1630268932
      },
      "platform": {},
      "serviceType": "NodePort",
      "securityContext": {},
      "scaleToZero": {
        "scaleResources": [
          {
            "metricName": "nuclio_processor_handled_events_total",
            "windowSize": "10m",
            "threshold": 0
          }
        ]
      },
      "eventTimeout": ""
    },
    "status": {
      "state": "ready"
    }
  },
  "network-operations-admin-generator": {
    "metadata": {
      "name": "network-operations-admin-generator",
      "namespace": "default-tenant",
      "labels": {
        "mlrun/class": "remote",
        "nuclio.io/project-name": "network-operations-admin"
      },
      "annotations": {
        "nuclio.io/generated_by": "function generated from /User/demos/network-operations/notebooks/generator.ipynb"
      },
      "resourceVersion": "37859767"
    },
    "spec": {
      "handler": "generator:handler",
      "runtime": "python:3.6",
      "env": [
        {
          "name": "BATCHES_TO_GENERATE",
          "value": "20"
        },
        {
          "name": "SAVE_DEPLOYMENT",
          "value": "1"
        },
        {
          "name": "DEPLOYMENT_TABLE",
          "value": "devices"
        },
        {
          "name": "METRICS_CONFIGURATION_FILEPATH",
          "value": "/User/demos/network-operations/src/metric_configurations.yaml"
        },
        {
          "name": "SAVE_TO",
          "value": "/User/demos/network-operations/streaming/metrics"
        },
        {
          "name": "SECS_TO_GENERATE",
          "value": "10"
        },
        {
          "name": "SAVE_TO_TSDB",
          "value": "0"
        },
        {
          "name": "V3IO_API",
          "value": "v3io-webapi.default-tenant.svc:8081"
        },
        {
          "name": "V3IO_USERNAME",
          "value": "admin"
        },
        {
          "name": "V3IO_ACCESS_KEY",
          "value": "b7242e47-a051-4ec3-8384-5f99a26c1451"
        },
        {
          "name": "V3IO_FRAMESD",
          "value": "framesd:8081"
        },
        {
          "name": "MLRUN_DEFAULT_PROJECT",
          "value": "network-operations-admin"
        },
        {
          "name": "MLRUN_DBPATH",
          "value": "http://mlrun-api:8080"
        },
        {
          "name": "MLRUN_NAMESPACE",
          "value": "default-tenant"
        }
      ],
      "resources": {},
      "imageHash": "1630268951864293580",
      "minReplicas": 1,
      "maxReplicas": 4,
      "triggers": {
        "cron": {
          "class": "",
          "kind": "cron",
          "name": "cron",
          "attributes": {
            "interval": "1m"
          }
        },
        "default-http": {
          "class": "",
          "kind": "http",
          "name": "default-http",
          "maxWorkers": 1,
          "attributes": {
            "serviceType": "NodePort"
          }
        }
      },
      "volumes": [
        {
          "volume": {
            "name": "v3io",
            "flexVolume": {
              "driver": "v3io/fuse",
              "options": {
                "accessKey": "b7242e47-a051-4ec3-8384-5f99a26c1451"
              }
            }
          },
          "volumeMount": {
            "name": "v3io",
            "mountPath": "/v3io"
          }
        },
        {
          "volume": {
            "name": "v3io",
            "flexVolume": {
              "driver": "v3io/fuse",
              "options": {
                "accessKey": "b7242e47-a051-4ec3-8384-5f99a26c1451"
              }
            }
          },
          "volumeMount": {
            "name": "v3io",
            "mountPath": "/User",
            "subPath": "users/admin"
          }
        }
      ],
      "version": -1,
      "alias": "latest",
      "build": {
        "functionSourceCode": "IyBHZW5lcmF0ZWQgYnkgbnVjbGlvLmV4cG9ydC5OdWNsaW9FeHBvcnRlcgoKaW1wb3J0IG9zCmltcG9ydCB0aW1lCmltcG9ydCB5YW1sCmltcG9ydCBwYW5kYXMgYXMgcGQKaW1wb3J0IGl0ZXJ0b29scwppbXBvcnQgZGF0ZXRpbWUKCmltcG9ydCB2M2lvX2ZyYW1lcyBhcyB2M2YKCmZyb20gdjNpb19nZW5lcmF0b3IgaW1wb3J0IG1ldHJpY3NfZ2VuZXJhdG9yLCBkZXBsb3ltZW50X2dlbmVyYXRvcgoKZGVmIF9jcmVhdGVfZGVwbG95bWVudCgpOgogICAgcHJpbnQoJ2NyZWF0aW5nIGRlcGxveW1lbnQnKQogICAgZGVwX2dlbiA9IGRlcGxveW1lbnRfZ2VuZXJhdG9yLmRlcGxveW1lbnRfZ2VuZXJhdG9yKCkKICAgIGZha2VyPWRlcF9nZW4uZ2V0X2Zha2VyKCkKCiAgICBkZXBfZ2VuLmFkZF9sZXZlbChuYW1lPSdjb21wYW55JyxudW1iZXI9MixsZXZlbF90eXBlPWZha2VyLmNvbXBhbnkpCiAgICBkZXBfZ2VuLmFkZF9sZXZlbCgnZGF0YV9jZW50ZXInLG51bWJlcj0yLGxldmVsX3R5cGU9ZmFrZXIuc3RyZWV0X25hbWUpCiAgICBkZXBfZ2VuLmFkZF9sZXZlbCgnZGV2aWNlJyxudW1iZXI9MixsZXZlbF90eXBlPWZha2VyLm1zaXNkbikKCiAgICBkZXBsb3ltZW50X2RmID0gZGVwX2dlbi5nZW5lcmF0ZV9kZXBsb3ltZW50KCkKICAgIHJldHVybiBkZXBsb3ltZW50X2RmCgpkZWYgX2lzX2RlcGxveW1lbnRfZXhpc3QocGF0aCk6CiAgICByZXR1cm4gb3MucGF0aC5leGlzdHMoZicvdjNpby9iaWdkYXRhL3twYXRofScpCgpkZWYgX2dldF9kZXBsb3ltZW50X2Zyb21fa3YoY2xpZW50LCBwYXRoKToKICAgIHByaW50KGYnUmV0cmlldmluZyBkZXBsb3ltZW50IGZyb20ge3BhdGh9JykKICAgIGNvbnRleHQubG9nZ2VyLmRlYnVnKGYnUmV0cmlldmluZyBkZXBsb3ltZW50IGZyb20ge3BhdGh9JykKICAgIGRlcGxveW1lbnRfZGYgPSBjbGllbnQucmVhZChiYWNrZW5kPSdrdicsIHRhYmxlPXBhdGgpCiAgICAKICAgIGRlcGxveW1lbnRfZGYuaW5kZXgubmFtZSA9ICdkZXZpY2UnCiAgICBkZXBsb3ltZW50X2RmID0gZGVwbG95bWVudF9kZi5yZXNldF9pbmRleCgpCiAgICByZXR1cm4gZGVwbG95bWVudF9kZgoKZGVmIF9zYXZlX2RlcGxveW1lbnRfdG9fa3YocGF0aCwgZGYsIGNsaWVudD1Ob25lKToKICAgIGNsaWVudC53cml0ZShiYWNrZW5kPSdrdicsIHRhYmxlPSduZXRvcHNfZGV2aWNlcycsZGZzPWRmLCBpbmRleF9jb2xzPVsnZGV2aWNlJ10pCgpkZWYgZ2V0X29yX2NyZWF0ZV9kZXBsb3ltZW50KHBhdGgsIHNhdmVfdG9fY2xvdWQ9RmFsc2UsIGNsaWVudD1Ob25lKToKICAgIGlmIGNsaWVudCBhbmQgX2lzX2RlcGxveW1lbnRfZXhpc3QocGF0aCk6CiAgICAgICAgZGVwbG95bWVudF9kZiA9IF9nZXRfZGVwbG95bWVudF9mcm9tX2t2KGNsaWVudCwgcGF0aCkKICAgIGVsc2U6CiAgICAgICAgZGVwbG95bWVudF9kZiA9IF9jcmVhdGVfZGVwbG95bWVudCgpCiAgICAgICAgCiAgICAgICAgaWYgY2xpZW50IGFuZCBzYXZlX3RvX2Nsb3VkOgogICAgICAgICAgICBfc2F2ZV9kZXBsb3ltZW50X3RvX2t2KHBhdGgsIGRlcGxveW1lbnRfZGYsIGNsaWVudCkKCiAgICByZXR1cm4gZGVwbG95bWVudF9kZgoKZGVmIHNldF9pbmRleGVzKGRmKToKICAgIGRmID0gZGYuc2V0X2luZGV4KFsndGltZXN0YW1wJywgJ2NvbXBhbnknLCAnZGF0YV9jZW50ZXInLCAnZGV2aWNlJ10pCiAgICByZXR1cm4gZGYKCmRlZiBzYXZlX21ldHJpY3NfdG9fdHNkYihjb250ZXh0LCBtZXRyaWNzOiBwZC5EYXRhRnJhbWUpOgogICAgcHJpbnQoJ1NhdmluZyBtZXRyaWNzIHRvIFRTREInKQogICAgCiAgICBjb250ZXh0LnYzZi53cml0ZSgndHNkYicsIGNvbnRleHQubWV0cmljc190YWJsZSwgbWV0cmljcykKCmRlZiBzYXZlX21ldHJpY3NfdG9fcGFycXVldChjb250ZXh0LCBtZXRyaWNzKToKICAgIHByaW50KCdTYXZpbmcgbWV0cmljcyB0byBQYXJxdWV0JykKICAgIGRmID0gcGQuY29uY2F0KGl0ZXJ0b29scy5jaGFpbihtZXRyaWNzKSkKICAgIAogICAgZGYgPSBkZi5yZXNldF9pbmRleCgpCiAgICBkZlsndGltZXN0YW1wJ10gPSBkZi5sb2NbOiwgJ3RpbWVzdGFtcCddLmFzdHlwZSgnZGF0ZXRpbWU2NFttc10nKQogICAgCiAgICBkZiA9IHNldF9pbmRleGVzKGRmKQogICAgCiAgICBmaXJzdF90aW1lc3RhbXAgPSBkZi5pbmRleFswXVswXS5zdHJmdGltZSgnJVklbSVkVCVIJU0lUycpCiAgICBsYXN0X3RpbWVzdGFtcCA9IGRmLmluZGV4Wy0xXVswXS5zdHJmdGltZSgnJVklbSVkVCVIJU0lUycpCiAgICBmaWxlbmFtZSA9IGZpcnN0X3RpbWVzdGFtcCArICctJyArIGxhc3RfdGltZXN0YW1wICsgJy5wYXJxdWV0JwogICAgcHJpbnQoZmlsZW5hbWUpCiAgICBmaWxlcGF0aCA9IG9zLnBhdGguam9pbihjb250ZXh0Lm1ldHJpY3NfdGFibGUsIGZpbGVuYW1lKQogICAgcHJpbnQoZmlsZXBhdGgpCiAgICB3aXRoIG9wZW4oZmlsZXBhdGgsICd3YisnKSBhcyBmOgogICAgICAgIGRmLnRvX3BhcnF1ZXQoZikKCmRlZiBpc19kZXBsb3ltZW50X2luaXRpYWxpemVkKGNvbnRleHQpOgogICAgcmV0dXJuIGhhc2F0dHIoY29udGV4dCwgJ21ldHJpY19nZW5lcmF0b3InKQoKZGVmIGluaXRfY29udGV4dChjb250ZXh0KToKICAgIAogICAgYmF0Y2hlc190b19nZW5lcmF0ZSA9IGludChvcy5nZXRlbnYoJ0JBVENIRVNfVE9fR0VORVJBVEUnLCAyMCkpCiAgICBzZXRhdHRyKGNvbnRleHQsICdiYXRjaGVzX3RvX2dlbmVyYXRlJywgYmF0Y2hlc190b19nZW5lcmF0ZSkKICAgIHNldGF0dHIoY29udGV4dCwgJ2JhdGNoZXNfZ2VuZXJhdGVkJywgMCkKICAgIAogICAgc2F2ZV90b190c2RiID0gKGludChvcy5nZXRlbnYoJ1NBVkVfVE9fVFNEQicsIDEpKSA9PSAxKQogICAgCiAgICBtZXRyaWNzX3RhYmxlID0gb3MuZ2V0ZW52KCdTQVZFX1RPJywgJ25ldG9wc19tZXRyaWNzJykKICAgIHNldGF0dHIoY29udGV4dCwgJ21ldHJpY3NfdGFibGUnLCBtZXRyaWNzX3RhYmxlKSAKCiAgICBpZiBzYXZlX3RvX3RzZGI6CiAgICAgICAgY29udGV4dC5sb2dnZXIuZGVidWcoJ1NhdmluZyB0byBUU0RCJykKICAgICAgICBjbGllbnQgPSB2M2YuQ2xpZW50KGFkZHJlc3M9J2ZyYW1lc2Q6ODA4MScsIGNvbnRhaW5lcj0nYmlnZGF0YScpCiAgICAgICAgCiAgICAgICAgY2xpZW50LmNyZWF0ZSgndHNkYicsIG1ldHJpY3NfdGFibGUsIHJhdGU9JzEvcycsIGlmX2V4aXN0cz0xKQogICAgICAgIAogICAgICAgIHNldGF0dHIoY29udGV4dCwgJ3dyaXRlJywgc2F2ZV9tZXRyaWNzX3RvX3RzZGIpCiAgICAKICAgIGVsc2U6CiAgICAgICAgY29udGV4dC5sb2dnZXIuZGVidWcoJ1NhdmluZyB0byBQYXJxdWV0JykKICAgICAgICBjbGllbnQgPSBOb25lCiAgICAgICAgICAKICAgICAgICBmaWxlcGF0aCA9IG9zLnBhdGguam9pbihtZXRyaWNzX3RhYmxlKQogICAgICAgIGlmIG5vdCBvcy5wYXRoLmV4aXN0cyhmaWxlcGF0aCk6CiAgICAgICAgICAgIG9zLm1ha2VkaXJzKGZpbGVwYXRoKQogICAgICAgIAogICAgICAgIHNldGF0dHIoY29udGV4dCwgJ3dyaXRlJywgc2F2ZV9tZXRyaWNzX3RvX3BhcnF1ZXQpCiAgICAKICAgICAgICAgIAogICAgc2Vjc190b19nZW5lcmF0ZSA9IG9zLmdldGVudignU0VDU19UT19HRU5FUkFURScsIDEwKQogICAgc2V0YXR0cihjb250ZXh0LCAnc2Vjc190b19nZW5lcmF0ZScsIHNlY3NfdG9fZ2VuZXJhdGUpCiAgICAKICAgICAKICAgIAogICAgZGVwbG95bWVudF9kZiA9IGdldF9vcl9jcmVhdGVfZGVwbG95bWVudChvcy5lbnZpcm9uWydERVBMT1lNRU5UX1RBQkxFJ10sIG9zLmVudmlyb25bJ1NBVkVfREVQTE9ZTUVOVCddLCBjbGllbnQpCiAgICAKICAgIGRlcGxveW1lbnRfZGZbJ2NwdV91dGlsaXphdGlvbiddID0gNzAKICAgIGRlcGxveW1lbnRfZGZbJ2xhdGVuY3knXSA9IDAKICAgIGRlcGxveW1lbnRfZGZbJ3BhY2tldF9sb3NzJ10gPSAwCiAgICBkZXBsb3ltZW50X2RmWyd0aHJvdWdocHV0J10gPSAyOTAKICAgIGRlcGxveW1lbnRfZGYuaGVhZCgpCiAgICAKICAgIHdpdGggb3Blbihvcy5nZXRlbnYoJ01FVFJJQ1NfQ09ORklHVVJBVElPTl9GSUxFUEFUSCcsICcvc3JjL21ldHJpY3NfY29uZmlndXJhdGlvbi55YW1sJyksICdyJykgYXMgZjoKICAgICAgICBtZXRyaWNzX2NvbmZpZ3VyYXRpb24gPSB5YW1sLmxvYWQoZikKICAgICAgICAKICAgIGluaXRpYWxfdGltZXN0YW1wID0gaW50KG9zLmdldGVudignaW5pdGlhbF90aW1lc3RhbXAnLCAoZGF0ZXRpbWUuZGF0ZXRpbWUubm93KCktZGF0ZXRpbWUudGltZWRlbHRhKGRheXM9MSkpLnRpbWVzdGFtcCgpKSkKICAgIG1ldF9nZW4gPSBtZXRyaWNzX2dlbmVyYXRvci5HZW5lcmF0b3JfZGYobWV0cmljc19jb25maWd1cmF0aW9uLCAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlcl9oaWVyYXJjaHk9ZGVwbG95bWVudF9kZiwgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluaXRpYWxfdGltZXN0YW1wPWluaXRpYWxfdGltZXN0YW1wKQogICAgc2V0YXR0cihjb250ZXh0LCAnbWV0cmljX2dlbmVyYXRvcicsIG1ldF9nZW4pCiAgICAKICAgIHNldGF0dHIoY29udGV4dCwgJ3YzZicsIGNsaWVudCkKCmRlZiBoYW5kbGVyKGNvbnRleHQsIGV2ZW50KToKICAgIAogICAgaWYgKGNvbnRleHQuYmF0Y2hlc190b19nZW5lcmF0ZSA9PSAtMSkgb3IgKGNvbnRleHQuYmF0Y2hlc19nZW5lcmF0ZWQgPD0gY29udGV4dC5iYXRjaGVzX3RvX2dlbmVyYXRlKToKICAgICAgICAKICAgICAgICBtZXRyaWNzID0gY29udGV4dC5tZXRyaWNfZ2VuZXJhdG9yLmdlbmVyYXRlX3JhbmdlKHN0YXJ0X3RpbWU9ZGF0ZXRpbWUuZGF0ZXRpbWUubm93KCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kX3RpbWU9ZGF0ZXRpbWUuZGF0ZXRpbWUubm93KCkrZGF0ZXRpbWUudGltZWRlbHRhKHNlY29uZHM9aW50KGNvbnRleHQuc2Vjc190b19nZW5lcmF0ZSkpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzX2RmPVRydWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXNfaXRlcmF0b3I9VHJ1ZSkKCiAgICAgICAgY29udGV4dC53cml0ZShjb250ZXh0LCBtZXRyaWNzKQogICAgICAgIAogICAgICAgIGNvbnRleHQuYmF0Y2hlc19nZW5lcmF0ZWQgKz0gMQoK",
        "noBaseImagesPull": true,
        "commands": [
          "python -m pip install pyyaml",
          "python -m pip install pyarrow",
          "python -m pip install pandas",
          "python -m pip install pytimeparse",
          "python -m pip install v3io_frames --upgrade",
          "python -m pip install -i https://test.pypi.org/simple/ v3io-generator",
          "python -m pip install faker"
        ],
        "offline": true,
        "codeEntryType": "sourceCode",
        "timestamp": 1630268955
      },
      "platform": {},
      "serviceType": "NodePort",
      "securityContext": {},
      "scaleToZero": {
        "scaleResources": [
          {
            "metricName": "nuclio_processor_handled_events_total",
            "windowSize": "10m",
            "threshold": 0
          }
        ]
      },
      "eventTimeout": ""
    },
    "status": {
      "state": "ready"
    }
  },
  "network-operations-admin-labeled-stream": {
    "metadata": {
      "name": "network-operations-admin-labeled-stream",
      "namespace": "default-tenant",
      "labels": {
        "mlrun/class": "remote",
        "nuclio.io/project-name": "network-operations-admin"
      },
      "annotations": {
        "nuclio.io/generated_by": "function generated from /User/demos/network-operations/notebooks/labeled_stream_creator.ipynb"
      },
      "resourceVersion": "37858341"
    },
    "spec": {
      "handler": "labeled_stream_creator:handler",
      "runtime": "python:3.6",
      "env": [
        {
          "name": "METRICS_TABLE",
          "value": "/User/demos/network-operations/streaming/metrics"
        },
        {
          "name": "PREDICTIONS_TABLE",
          "value": "/User/demos/network-operations/streaming/predictions"
        },
        {
          "name": "OUTPUT_STREAM",
          "value": "/users/admin/demos/network-operations/streaming/labeled_stream"
        },
        {
          "name": "prediction_col",
          "value": "predictions"
        },
        {
          "name": "label_col",
          "value": "is_error"
        },
        {
          "name": "output_stream_shards",
          "value": "1"
        },
        {
          "name": "BATCHES_TO_GENERATE",
          "value": "20"
        },
        {
          "name": "V3IO_API",
          "value": "v3io-webapi.default-tenant.svc:8081"
        },
        {
          "name": "V3IO_USERNAME",
          "value": "admin"
        },
        {
          "name": "V3IO_ACCESS_KEY",
          "value": "b7242e47-a051-4ec3-8384-5f99a26c1451"
        },
        {
          "name": "V3IO_FRAMESD",
          "value": "framesd:8081"
        },
        {
          "name": "MLRUN_DEFAULT_PROJECT",
          "value": "network-operations-admin"
        },
        {
          "name": "MLRUN_DBPATH",
          "value": "http://mlrun-api:8080"
        },
        {
          "name": "MLRUN_NAMESPACE",
          "value": "default-tenant"
        }
      ],
      "resources": {},
      "imageHash": "1630268925872034354",
      "minReplicas": 1,
      "maxReplicas": 4,
      "triggers": {
        "cron": {
          "class": "",
          "kind": "cron",
          "name": "cron",
          "attributes": {
            "interval": "1m"
          }
        },
        "default-http": {
          "class": "",
          "kind": "http",
          "name": "default-http",
          "maxWorkers": 1,
          "attributes": {
            "serviceType": "NodePort"
          }
        }
      },
      "volumes": [
        {
          "volume": {
            "name": "v3io",
            "flexVolume": {
              "driver": "v3io/fuse",
              "options": {
                "accessKey": "b7242e47-a051-4ec3-8384-5f99a26c1451"
              }
            }
          },
          "volumeMount": {
            "name": "v3io",
            "mountPath": "/v3io"
          }
        },
        {
          "volume": {
            "name": "v3io",
            "flexVolume": {
              "driver": "v3io/fuse",
              "options": {
                "accessKey": "b7242e47-a051-4ec3-8384-5f99a26c1451"
              }
            }
          },
          "volumeMount": {
            "name": "v3io",
            "mountPath": "/User",
            "subPath": "users/admin"
          }
        }
      ],
      "version": -1,
      "alias": "latest",
      "build": {
        "functionSourceCode": "IyBHZW5lcmF0ZWQgYnkgbnVjbGlvLmV4cG9ydC5OdWNsaW9FeHBvcnRlcgoKaW1wb3J0IG9zCmltcG9ydCBwYW5kYXMgYXMgcGQKaW1wb3J0IGpzb24KaW1wb3J0IHYzaW8KaW1wb3J0IHYzaW8uZGF0YXBsYW5lCmltcG9ydCBzb2NrZXQKCmRlZiBzcGxpdF9wYXRoKG1udHBhdGg9JycpOgogICAgaWYgbW50cGF0aFswXSA9PSAnLyc6CiAgICAgICAgbW50cGF0aCA9IG1udHBhdGhbMTpdCiAgICBwYXRocyA9IG1udHBhdGguc3BsaXQoJy8nKQogICAgY29udGFpbmVyID0gcGF0aHNbMF0KICAgIHN1YnBhdGggPSAnJwogICAgaWYgbGVuKHBhdGhzKSA+IDE6CiAgICAgICAgc3VicGF0aCA9IG1udHBhdGhbbGVuKGNvbnRhaW5lcik6XQogICAgcmV0dXJuIGNvbnRhaW5lciwgc3VicGF0aAoKZGVmIGNyZWF0ZV9zdHJlYW0oY29udGV4dCwgcGF0aCwgc2hhcmRzPTEpOgogICAgY29udGFpbmVyLCBzdHJlYW1fcGF0aCA9IHNwbGl0X3BhdGgocGF0aCkKICAgIGNvbnRleHQubG9nZ2VyLmluZm8oZidDcmVhdGluZyBzdHJlYW0gaW4gQ29udGFpbmVyOiB7Y29udGFpbmVyfSAmIFBhdGgge3N0cmVhbV9wYXRofScpCiAgICByZXNwb25zZSA9IGNvbnRleHQudjNpb19jbGllbnQuc3RyZWFtLmNyZWF0ZShjb250YWluZXI9Y29udGFpbmVyLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RyZWFtX3BhdGg9c3RyZWFtX3BhdGgsIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hhcmRfY291bnQ9c2hhcmRzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmFpc2VfZm9yX3N0YXR1cz12M2lvLmRhdGFwbGFuZS5SYWlzZUZvclN0YXR1cy5uZXZlcikKICAgIHJlc3BvbnNlLnJhaXNlX2Zvcl9zdGF0dXMoWzQwOSwgMjA0XSkKCmRlZiBwdXNoX3RvX3N0cmVhbShjb250ZXh0LCBzdHJlYW1fcGF0aCwgZGF0YSk6CiAgICBkZWYgcmVzdHJ1Y3R1cmVfc3RyZWFtX2V2ZW50KGNvbnRleHQsIGV2ZW50KToKICAgICAgICBpbnN0YW5jZXMgPSBbZGljdCgpXQogICAgICAgIGZvciBrZXkgaW4gZGF0YS5rZXlzKCk6CiAgICAgICAgICAgIGlmIGtleSBub3QgaW4gWyd3aGVuJywgJ2NsYXNzJywgJ21vZGVsJywgJ3dvcmtlcicsICdob3N0bmFtZScsIGNvbnRleHQucHJlZGljdGlvbl9jb2xdOgogICAgICAgICAgICAgICAgaW5zdGFuY2VzWzBdLnVwZGF0ZSh7a2V5OiBldmVudC5wb3Aoa2V5KX0pCiAgICAgICAgZXZlbnRbJ3JlcXVlc3QnXSA9IHsnaW5zdGFuY2VzJzogaW5zdGFuY2VzfQogICAgICAgIGV2ZW50WydyZXNwJ10gPSBbaW50KGV2ZW50LnBvcChjb250ZXh0LnByZWRpY3Rpb25fY29sKSldCiAgICAgICAgcmV0dXJuIGV2ZW50CiAgICAKICAgIHJlY29yZHMgPSBqc29uLmxvYWRzKGRhdGEudG9fanNvbihvcmllbnQ9J3JlY29yZHMnKSkKICAgIHJlY29yZHMgPSBbeydkYXRhJzoganNvbi5kdW1wcyhyZXN0cnVjdHVyZV9zdHJlYW1fZXZlbnQoY29udGV4dCwgcmVjb3JkKSl9IGZvciByZWNvcmQgaW4gcmVjb3Jkc10KICAgIGNvbnRleHQubG9nZ2VyLmluZm8oZidMb2dnaW5nIHtsZW4ocmVjb3Jkcyl9IHJlY29yZHMsIFJlY29yZCBleGFtcGxlOiB7cmVjb3Jkc1swXX0nKQogICAgY29udGFpbmVyLCBzdHJlYW1fcGF0aCA9IHNwbGl0X3BhdGgoc3RyZWFtX3BhdGgpCiAgICBzdGVwID0gMTAKICAgIGZvciBpZHggaW4gcmFuZ2UoMCwgbGVuKHJlY29yZHMpLCBzdGVwKToKICAgICAgICByZXNwb25zZSA9IGNvbnRleHQudjNpb19jbGllbnQucHV0X3JlY29yZHMoY29udGFpbmVyPWNvbnRhaW5lciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF0aD1zdHJlYW1fcGF0aCwgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlY29yZHM9cmVjb3Jkc1tpZHg6aWR4K3N0ZXBdKQoKZGVmIGdldF9kYXRhX3BhcnF1ZXQoY29udGV4dCwgdGFibGUsIGZpbGVzX3RvX3NlbGVjdD0xKToKICAgIG1wYXRoID0gW29zLnBhdGguam9pbih0YWJsZSwgZmlsZSkgZm9yIGZpbGUgaW4gb3MubGlzdGRpcih0YWJsZSkgaWYgZmlsZS5lbmRzd2l0aCgoJ3BhcnF1ZXQnLCAncHEnKSldCiAgICBmaWxlc19ieV91cGRhdGVkID0gc29ydGVkKG1wYXRoLCBrZXk9b3MucGF0aC5nZXRtdGltZSwgcmV2ZXJzZT1GYWxzZSkKICAgIGNvbnRleHQubG9nZ2VyLmRlYnVnX3dpdGgoJ0lucHV0JywgaW5wdXRfZmlsZXM9ZmlsZXNfYnlfdXBkYXRlZFs6ZmlsZXNfdG9fc2VsZWN0XSkKICAgIGRmcyA9IHBkLmNvbmNhdChbcGQucmVhZF9wYXJxdWV0KGZpbGUpIGZvciBmaWxlIGluIGZpbGVzX2J5X3VwZGF0ZWRbOmZpbGVzX3RvX3NlbGVjdF1dKQogICAgcmV0dXJuIGRmcwoKZGVmIGluaXRfY29udGV4dChjb250ZXh0KToKICAgIAogICAgYmF0Y2hlc190b19nZW5lcmF0ZSA9IGludChvcy5nZXRlbnYoJ0JBVENIRVNfVE9fR0VORVJBVEUnLCAyMCkpCiAgICBzZXRhdHRyKGNvbnRleHQsICdiYXRjaGVzX3RvX2dlbmVyYXRlJywgYmF0Y2hlc190b19nZW5lcmF0ZSkKICAgIHNldGF0dHIoY29udGV4dCwgJ2JhdGNoZXNfZ2VuZXJhdGVkJywgMCkKICAgIAogICAgc2V0YXR0cihjb250ZXh0LCAnbWV0cmljc190YWJsZScsIG9zLmVudmlyb25bJ01FVFJJQ1NfVEFCTEUnXSkKICAgIHNldGF0dHIoY29udGV4dCwgJ3ByZWRpY3Rpb25zX3RhYmxlJywgb3MuZW52aXJvblsnUFJFRElDVElPTlNfVEFCTEUnXSkKICAgIHNldGF0dHIoY29udGV4dCwgJ291dHB1dF9zdHJlYW0nLCBvcy5lbnZpcm9uWydPVVRQVVRfU1RSRUFNJ10pCiAgICBzZXRhdHRyKGNvbnRleHQsICd0aW1lc3RhbXBfY29sJywgb3MuZ2V0ZW52KCd0aW1lc3RhbXBfY29sJywgJ3doZW4nKSkKICAgIHNldGF0dHIoY29udGV4dCwgJ29yaWdfdGltZXN0YW1wX2NvbCcsIG9zLmdldGVudignb3JpZ190aW1lc3RhbXBfY29sJywgJ3RpbWVzdGFtcCcpKQogICAgCiAgICB2M2lvX2NsaWVudCA9IHYzaW8uZGF0YXBsYW5lLkNsaWVudChsb2dnZXJfdmVyYm9zaXR5PSdERUJVRycsIHRyYW5zcG9ydF92ZXJib3NpdHk9J0RFQlVHJykKICAgIHNldGF0dHIoY29udGV4dCwgJ3YzaW9fY2xpZW50JywgdjNpb19jbGllbnQpCiAgICBjcmVhdGVfc3RyZWFtKGNvbnRleHQsIGNvbnRleHQub3V0cHV0X3N0cmVhbSkKICAgIAogICAgc2V0YXR0cihjb250ZXh0LCAnbGFiZWxfY29sJywgb3MuZW52aXJvblsnbGFiZWxfY29sJ10pCiAgICBzZXRhdHRyKGNvbnRleHQsICdwcmVkaWN0aW9uX2NvbCcsIG9zLmVudmlyb25bJ3ByZWRpY3Rpb25fY29sJ10pCgpkZWYgaGFuZGxlcihjb250ZXh0LCBldmVudCk6CiAgICAKICAgIGlmIChjb250ZXh0LmJhdGNoZXNfdG9fZ2VuZXJhdGUgPT0gLTEpIG9yIChjb250ZXh0LmJhdGNoZXNfZ2VuZXJhdGVkIDw9IGNvbnRleHQuYmF0Y2hlc190b19nZW5lcmF0ZSk6CiAgICAgICAgCiAgICAgICAgbWV0cmljcyA9IGdldF9kYXRhX3BhcnF1ZXQoY29udGV4dCwgY29udGV4dC5tZXRyaWNzX3RhYmxlLCAyKS5sb2NbOiwgY29udGV4dC5sYWJlbF9jb2xdLmFzdHlwZSgnaW50JykKICAgICAgICBtZXRyaWNzLmluZGV4Lm5hbWVzID0gbGlzdChbbmFtZSBpZiBuYW1lICE9IGNvbnRleHQub3JpZ190aW1lc3RhbXBfY29sIGVsc2UgY29udGV4dC50aW1lc3RhbXBfY29sIGZvciBuYW1lIGluIG1ldHJpY3MuaW5kZXgubmFtZXNdKQogICAgICAgIHByZWRpY3Rpb25zID0gZ2V0X2RhdGFfcGFycXVldChjb250ZXh0LCBjb250ZXh0LnByZWRpY3Rpb25zX3RhYmxlLCAyKQogICAgICAgIGNvbnRleHQubG9nZ2VyLmRlYnVnKGYnTGFiZWxpbmcgbWV0cmljcyAoe21ldHJpY3Muc2hhcGV9KSBhbmQgcHJlZGljdGlvbnMgKHtwcmVkaWN0aW9ucy5zaGFwZX0pJykKICAgICAgICBjb250ZXh0LmxvZ2dlci5kZWJ1Z193aXRoKCdJbmRleGVzJywgbWV0cmljc19pbmRleD1tZXRyaWNzLmluZGV4Lm5hbWVzLCBwcmVkaWN0aW9uc19pbmRleD1wcmVkaWN0aW9ucy5pbmRleC5uYW1lcykKCiAgICAgICAgcHJpbnQoJ21ldHJpY3MnKQogICAgICAgIHByaW50KG1ldHJpY3MuaGVhZCgpKQogICAgICAgIHByaW50KHR5cGUobWV0cmljcykpCiAgICAgICAgbWV0cmljcyA9IHBkLkRhdGFGcmFtZShtZXRyaWNzKQogICAgICAgIHByaW50KCdjaGFuZ2UnKQogICAgICAgIHByaW50KHR5cGUobWV0cmljcykpCiAgICAgICAgcHJpbnQobWV0cmljcy5oZWFkKCkpCiAgICAgICAgcHJpbnQobWV0cmljcy5pbmRleC5uYW1lcykKCiAgICAgICAgZnVsbF9kZiA9IHBkLm1lcmdlKGxlZnQ9cHJlZGljdGlvbnMsIHJpZ2h0PW1ldHJpY3MsIGxlZnRfb249bWV0cmljcy5pbmRleC5uYW1lcywgaG93PSdsZWZ0JywgbGVmdF9pbmRleD1UcnVlLCByaWdodF9pbmRleD1UcnVlKQogICAgICAgIGZ1bGxfZGYgPSBmdWxsX2RmLnJlc2V0X2luZGV4KCkKICAgICAgICBjb250ZXh0LmxvZ2dlci5pbmZvKGYnRnVsbHkgbGFiZWxlZCBiYXRjaCBzaXplIGlzIHtmdWxsX2RmLnNoYXBlfScpCiAgICAgICAgY29udGV4dC5sb2dnZXIuaW5mbyhmJ0luZGV4ZXM6IHtsaXN0KGZ1bGxfZGYuaW5kZXgubmFtZXMpfScpCiAgICAgICAgY29udGV4dC5sb2dnZXIuaW5mbyhmJ0NvbHVtbnM6IHtmdWxsX2RmLmNvbHVtbnN9JykKICAgICAgICBjb250ZXh0LmxvZ2dlci5pbmZvX3dpdGgoJ3NhbXBsZScsIGZ1bGxfZGY9ZnVsbF9kZi5oZWFkKDEpKSAgICAKICAgICAgICBwdXNoX3RvX3N0cmVhbShjb250ZXh0LCBjb250ZXh0Lm91dHB1dF9zdHJlYW0sIGZ1bGxfZGYpCiAgICAgICAgCiAgICAgICAgY29udGV4dC5iYXRjaGVzX2dlbmVyYXRlZCArPSAxCgo=",
        "noBaseImagesPull": true,
        "baseImage": "mlrun/ml-models:0.7.0-rc11",
        "commands": [
          "python -m pip install v3io --upgrade"
        ],
        "offline": true,
        "codeEntryType": "sourceCode",
        "timestamp": 1630268941
      },
      "platform": {},
      "serviceType": "NodePort",
      "securityContext": {},
      "scaleToZero": {
        "scaleResources": [
          {
            "metricName": "nuclio_processor_handled_events_total",
            "windowSize": "10m",
            "threshold": 0
          }
        ]
      },
      "eventTimeout": ""
    },
    "status": {
      "state": "ready"
    }
  },
  "network-operations-admin-serving-v1": {
    "metadata": {
      "name": "network-operations-admin-serving-v1",
      "namespace": "default-tenant",
      "labels": {
        "mlrun/class": "remote",
        "nuclio.io/project-name": "network-operations-admin",
        "nuclio.io/tag": "v1"
      },
      "annotations": {
        "nuclio.io/generated_by": "function generated from /User/demos/network-operations/notebooks/server.ipynb"
      },
      "resourceVersion": "37858351"
    },
    "spec": {
      "handler": "server:handler",
      "runtime": "python:3.6",
      "env": [
        {
          "name": "METRICS_TABLE",
          "value": "${data_path}"
        },
        {
          "name": "FEATURES_TABLE",
          "value": "/User/demos/network-operations/streaming/features"
        },
        {
          "name": "PREDICTIONS_TABLE",
          "value": "/User/demos/network-operations/streaming/predictions"
        },
        {
          "name": "BATCHES_TO_GENERATE",
          "value": "20"
        },
        {
          "name": "model_path",
          "value": "store://models/network-operations-admin/train_model:cd151783-05df-4f9c-a9db-3aa674e4a058"
        },
        {
          "name": "model_name",
          "value": "netops_predictor_v1"
        },
        {
          "name": "model_class",
          "value": "MLRunModel"
        },
        {
          "name": "model_col",
          "value": "model"
        },
        {
          "name": "model_class_col",
          "value": "class"
        },
        {
          "name": "prediction_col",
          "value": "predictions"
        },
        {
          "name": "worker_col",
          "value": "worker"
        },
        {
          "name": "hostname_col",
          "value": "hostname"
        },
        {
          "name": "timestamp_col",
          "value": "when"
        },
        {
          "name": "orig_timestamp_col",
          "value": "timestamp"
        },
        {
          "name": "V3IO_API",
          "value": "v3io-webapi.default-tenant.svc:8081"
        },
        {
          "name": "V3IO_USERNAME",
          "value": "admin"
        },
        {
          "name": "V3IO_ACCESS_KEY",
          "value": "b7242e47-a051-4ec3-8384-5f99a26c1451"
        },
        {
          "name": "V3IO_FRAMESD",
          "value": "framesd:8081"
        },
        {
          "name": "MLRUN_DEFAULT_PROJECT",
          "value": "network-operations-admin"
        },
        {
          "name": "MLRUN_DBPATH",
          "value": "http://mlrun-api:8080"
        },
        {
          "name": "MLRUN_NAMESPACE",
          "value": "default-tenant"
        }
      ],
      "resources": {},
      "imageHash": "1630268875751232404",
      "minReplicas": 1,
      "maxReplicas": 4,
      "triggers": {
        "cron": {
          "class": "",
          "kind": "cron",
          "name": "cron",
          "attributes": {
            "interval": "1m"
          }
        },
        "default-http": {
          "class": "",
          "kind": "http",
          "name": "default-http",
          "maxWorkers": 1,
          "attributes": {
            "serviceType": "NodePort"
          }
        }
      },
      "volumes": [
        {
          "volume": {
            "name": "v3io",
            "flexVolume": {
              "driver": "v3io/fuse",
              "options": {
                "accessKey": "b7242e47-a051-4ec3-8384-5f99a26c1451"
              }
            }
          },
          "volumeMount": {
            "name": "v3io",
            "mountPath": "/v3io"
          }
        },
        {
          "volume": {
            "name": "v3io",
            "flexVolume": {
              "driver": "v3io/fuse",
              "options": {
                "accessKey": "b7242e47-a051-4ec3-8384-5f99a26c1451"
              }
            }
          },
          "volumeMount": {
            "name": "v3io",
            "mountPath": "/User",
            "subPath": "users/admin"
          }
        }
      ],
      "version": -1,
      "alias": "latest",
      "build": {
        "functionSourceCode": "IyBHZW5lcmF0ZWQgYnkgbnVjbGlvLmV4cG9ydC5OdWNsaW9FeHBvcnRlcgoKaW1wb3J0IG9zCmltcG9ydCBwYW5kYXMgYXMgcGQKaW1wb3J0IGNsb3VkcGlja2xlCmltcG9ydCBudW1weSBhcyBucAppbXBvcnQganNvbgpmcm9tIG1scnVuIGltcG9ydCBnZXRfb3JfY3JlYXRlX2N0eAppbXBvcnQgc29ja2V0CgpkZWYgZ2V0X2RhdGFfcGFycXVldChjb250ZXh0KToKICAgIG1wYXRoID0gW29zLnBhdGguam9pbihjb250ZXh0LmZlYXR1cmVzX3RhYmxlLCBmaWxlKSBmb3IgZmlsZSBpbiBvcy5saXN0ZGlyKGNvbnRleHQuZmVhdHVyZXNfdGFibGUpIGlmIGZpbGUuZW5kc3dpdGgoKCdwYXJxdWV0JywgJ3BxJykpXQogICAgZmlsZXNfYnlfdXBkYXRlZCA9IHNvcnRlZChtcGF0aCwga2V5PW9zLnBhdGguZ2V0bXRpbWUsIHJldmVyc2U9VHJ1ZSkKICAgIHJldHVybiBwZC5yZWFkX3BhcnF1ZXQoZmlsZXNfYnlfdXBkYXRlZFs6MV1bMF0pCgpkZWYgc2F2ZV90b19wYXJxdWV0KGNvbnRleHQsIGRmOiBwZC5EYXRhRnJhbWUpOgogICAgcHJpbnQoJ1NhdmluZyBmZWF0dXJlcyB0byBQYXJxdWV0JykKICAgIAogICAga2V5cyA9IGxpc3QoW25hbWUgaWYgbmFtZSAhPSBjb250ZXh0Lm9yaWdfdGltZXN0YW1wX2NvbCBlbHNlIGNvbnRleHQudGltZXN0YW1wX2NvbCBmb3IgbmFtZSBpbiBkZi5pbmRleC5uYW1lc10pICsgW2NvbnRleHQubW9kZWxfY29sLCBjb250ZXh0Lm1vZGVsX2NsYXNzX2NvbCwgY29udGV4dC53b3JrZXJfY29sLCBjb250ZXh0Lmhvc3RuYW1lX2NvbF0KICAgIGRmID0gZGYucmVzZXRfaW5kZXgoKQogICAgZGZbY29udGV4dC50aW1lc3RhbXBfY29sXSA9IGRmLnBvcChjb250ZXh0Lm9yaWdfdGltZXN0YW1wX2NvbCkuYXN0eXBlKCdkYXRldGltZTY0W21zXScpCiAgICAKICAgIGRmID0gZGYuc2V0X2luZGV4KGtleXMpCiAgICAKICAgIGZpcnN0X3RpbWVzdGFtcCA9IGRmLmluZGV4WzBdWzBdLnN0cmZ0aW1lKCclWSVtJWRUJUglTSVTJykKICAgIGxhc3RfdGltZXN0YW1wID0gZGYuaW5kZXhbLTFdWzBdLnN0cmZ0aW1lKCclWSVtJWRUJUglTSVTJykKICAgIGZpbGVuYW1lID0gZmlyc3RfdGltZXN0YW1wICsgJy0nICsgbGFzdF90aW1lc3RhbXAgKyAnLnBhcnF1ZXQnCiAgICBmaWxlcGF0aCA9IG9zLnBhdGguam9pbihjb250ZXh0LnByZWRpY3Rpb25zX3RhYmxlLCBmaWxlbmFtZSkKICAgIHdpdGggb3BlbihmaWxlcGF0aCwgJ3diKycpIGFzIGY6CiAgICAgICAgZGYudG9fcGFycXVldChmKQoKZGVmIGluaXRfY29udGV4dChjb250ZXh0KToKICAgIAogICAgYmF0Y2hlc190b19nZW5lcmF0ZSA9IGludChvcy5nZXRlbnYoJ0JBVENIRVNfVE9fR0VORVJBVEUnLCAyMCkpCiAgICBzZXRhdHRyKGNvbnRleHQsICdiYXRjaGVzX3RvX2dlbmVyYXRlJywgYmF0Y2hlc190b19nZW5lcmF0ZSkKICAgIHNldGF0dHIoY29udGV4dCwgJ2JhdGNoZXNfZ2VuZXJhdGVkJywgMCkKICAgIAogICAgc2V0YXR0cihjb250ZXh0LCAnbW9kZWxfbmFtZScsIG9zLmdldGVudignbW9kZWxfbmFtZScsICduZXRvcHNfbW9kZWwnKSkKICAgIHNldGF0dHIoY29udGV4dCwgJ21vZGVsX2NvbCcsIG9zLmdldGVudignbW9kZWxfY29sJywgJ21vZGVsJykpCiAgICBzZXRhdHRyKGNvbnRleHQsICdtb2RlbF9jbGFzc19jb2wnLCBvcy5nZXRlbnYoJ21vZGVsX2NsYXNzX2NvbCcsICdjbGFzcycpKQogICAgc2V0YXR0cihjb250ZXh0LCAnd29ya2VyX2NvbCcsIG9zLmdldGVudignd29ya2VyX2NvbCcsICd3b3JrZXInKSkKICAgIHNldGF0dHIoY29udGV4dCwgJ2hvc3RuYW1lX2NvbCcsIG9zLmdldGVudignaG9zdG5hbWVfY29sJywgJ2hvc3RuYW1lJykpCiAgICBzZXRhdHRyKGNvbnRleHQsICd0aW1lc3RhbXBfY29sJywgb3MuZ2V0ZW52KCd0aW1lc3RhbXBfY29sJywgJ3doZW4nKSkKICAgIHNldGF0dHIoY29udGV4dCwgJ29yaWdfdGltZXN0YW1wX2NvbCcsIG9zLmdldGVudignb3JpZ190aW1lc3RhbXBfY29sJywgJ3RpbWVzdGFtcCcpKQogICAgc2V0YXR0cihjb250ZXh0LCAnZmVhdHVyZXNfdGFibGUnLCBvcy5nZXRlbnYoJ0ZFQVRVUkVTX1RBQkxFJywgJ25ldG9wc19mZWF0dXJlcycpKQogICAgc2V0YXR0cihjb250ZXh0LCAncHJlZGljdGlvbnNfdGFibGUnLCBvcy5nZXRlbnYoJ1BSRURJQ1RJT05TX1RBQkxFJywgJ25ldG9wc19wcmVkaWN0aW9ucycpKQogICAgc2V0YXR0cihjb250ZXh0LCAncHJlZGljdGlvbl9jb2wnLCBvcy5nZXRlbnYoJ3ByZWRpY3Rpb25fY29sJywgJ3ByZWRpY3Rpb24nKSkKICAgIAogICAgbW9kZWxfcGF0aCA9IG9zLmVudmlyb25bJ21vZGVsX3BhdGgnXQogICAgaWYgbW9kZWxfcGF0aC5zdGFydHN3aXRoKCdzdG9yZTovLycpOgogICAgICAgIG1sY3R4ID0gZ2V0X29yX2NyZWF0ZV9jdHgoJ2luZmVyZW5jZScpCiAgICAgICAgbW9kZWwgPSBtbGN0eC5nZXRfZGF0YWl0ZW0obW9kZWxfcGF0aCkKICAgICAgICBtb2RlbF9wYXRoID0gb3MucGF0aC5qb2luKG1vZGVsLnVybCwgJ21vZGVsLnBrbCcpCiAgICB3aXRoIG9wZW4obW9kZWxfcGF0aCwgJ3JiJykgYXMgZjoKICAgICAgICBtb2RlbCA9IGNsb3VkcGlja2xlLmxvYWQoZikKICAgIHNldGF0dHIoY29udGV4dCwgJ21vZGVsJywgbW9kZWwpCiAgICBzZXRhdHRyKGNvbnRleHQsICdtb2RlbF9jbGFzcycsIHR5cGUobW9kZWwpLl9fbmFtZV9fKQogICAgCiAgICBmaWxlcGF0aCA9IG9zLnBhdGguam9pbihjb250ZXh0LnByZWRpY3Rpb25zX3RhYmxlKQogICAgaWYgbm90IG9zLnBhdGguZXhpc3RzKGZpbGVwYXRoKToKICAgICAgICBvcy5tYWtlZGlycyhmaWxlcGF0aCkKCmRlZiBoYW5kbGVyKGNvbnRleHQsIGV2ZW50KToKICAgIAogICAgaWYgKGNvbnRleHQuYmF0Y2hlc190b19nZW5lcmF0ZSA9PSAtMSkgb3IgKGNvbnRleHQuYmF0Y2hlc19nZW5lcmF0ZWQgPD0gY29udGV4dC5iYXRjaGVzX3RvX2dlbmVyYXRlKToKICAgIAogICAgICAgIGlmIGdldGF0dHIoZXZlbnQudHJpZ2dlciwgJ2tpbmQnLCAnY3JvbicpID09ICdjcm9uJzoKICAgICAgICAgICAgZGYgPSBnZXRfZGF0YV9wYXJxdWV0KGNvbnRleHQpCgogICAgICAgICAgICBkZltjb250ZXh0LnByZWRpY3Rpb25fY29sXSA9IGNvbnRleHQubW9kZWwucHJlZGljdChkZi52YWx1ZXMpCgogICAgICAgICAgICBkZltjb250ZXh0Lm1vZGVsX2NvbF0gPSBjb250ZXh0Lm1vZGVsX25hbWUKICAgICAgICAgICAgZGZbY29udGV4dC5tb2RlbF9jbGFzc19jb2xdID0gY29udGV4dC5tb2RlbF9jbGFzcwogICAgICAgICAgICBkZltjb250ZXh0Lndvcmtlcl9jb2xdID0gY29udGV4dC53b3JrZXJfaWQKICAgICAgICAgICAgZGZbY29udGV4dC5ob3N0bmFtZV9jb2xdID0gc29ja2V0LmdldGhvc3RuYW1lKCkKCiAgICAgICAgICAgIHNhdmVfdG9fcGFycXVldChjb250ZXh0LCBkZikKICAgICAgICBlbHNlOgogICAgICAgICAgICBib2R5ID0ganNvbi5sb2FkcyhldmVudC5ib2R5KQogICAgICAgICAgICBmZWF0cyA9IG5wLmFzYXJyYXkoYm9keVsnaW5zdGFuY2VzJ10pCiAgICAgICAgICAgIHJlc3VsdDogbnAubmRhcnJheSA9IGNvbnRleHQubW9kZWwucHJlZGljdChmZWF0cykKICAgICAgICAgICAgcmV0dXJuIHJlc3VsdC50b2xpc3QoKQogICAgICAgIAogICAgICAgIGNvbnRleHQuYmF0Y2hlc19nZW5lcmF0ZWQgKz0gMQoK",
        "noBaseImagesPull": true,
        "baseImage": "mlrun/ml-models:0.7.0-rc11",
        "offline": true,
        "codeEntryType": "sourceCode",
        "timestamp": 1630268885
      },
      "platform": {},
      "serviceType": "NodePort",
      "securityContext": {},
      "scaleToZero": {
        "scaleResources": [
          {
            "metricName": "nuclio_processor_handled_events_total",
            "windowSize": "10m",
            "threshold": 0
          }
        ]
      },
      "eventTimeout": ""
    },
    "status": {
      "state": "ready"
    }
  },
  "network-operations-admin-stream-to-parquet": {
    "metadata": {
      "name": "network-operations-admin-stream-to-parquet",
      "namespace": "default-tenant",
      "labels": {
        "mlrun/class": "remote",
        "nuclio.io/project-name": "network-operations-admin"
      },
      "annotations": {
        "nuclio.io/generated_by": "function generated from /home/kali/functions/stream_to_parquet/stream_to_parquet.py"
      },
      "resourceVersion": "37857022"
    },
    "spec": {
      "handler": "stream_to_parquet:handler",
      "runtime": "python:3.6",
      "env": [
        {
          "name": "V3IO_API",
          "value": "v3io-webapi.default-tenant.svc:8081"
        },
        {
          "name": "V3IO_USERNAME",
          "value": "admin"
        },
        {
          "name": "V3IO_ACCESS_KEY",
          "value": "b7242e47-a051-4ec3-8384-5f99a26c1451"
        },
        {
          "name": "V3IO_FRAMESD",
          "value": "framesd:8081"
        },
        {
          "name": "window",
          "value": "100"
        },
        {
          "name": "features",
          "value": "[\"cpu_utilization\", \"throughput\", \"packet_loss\", \"latency\"]"
        },
        {
          "name": "save_to",
          "value": "/User/demos/network-operations/streaming/inference_pq"
        },
        {
          "name": "base_dataset",
          "value": "store://datasets/network-operations-admin/test_test_set_preds:cd151783-05df-4f9c-a9db-3aa674e4a058"
        },
        {
          "name": "results_tsdb_container",
          "value": "users"
        },
        {
          "name": "results_tsdb_table",
          "value": "admin/demos/network-operations/streaming/drift_magnitude"
        },
        {
          "name": "mount_path",
          "value": "/users/orz"
        },
        {
          "name": "mount_remote",
          "value": "/User"
        },
        {
          "name": "MLRUN_DEFAULT_PROJECT",
          "value": "network-operations-admin"
        },
        {
          "name": "MLRUN_DBPATH",
          "value": "http://mlrun-api:8080"
        },
        {
          "name": "MLRUN_NAMESPACE",
          "value": "default-tenant"
        }
      ],
      "resources": {},
      "imageHash": "1630268957285488735",
      "minReplicas": 1,
      "maxReplicas": 1,
      "triggers": {
        "default-http": {
          "class": "",
          "kind": "http",
          "name": "default-http",
          "maxWorkers": 1,
          "attributes": {
            "serviceType": "NodePort"
          }
        },
        "labeled_stream": {
          "class": "",
          "kind": "v3ioStream",
          "name": "labeled_stream",
          "maxWorkers": 1,
          "url": "http://v3io-webapi:8081",
          "password": "b7242e47-a051-4ec3-8384-5f99a26c1451",
          "attributes": {
            "consumerGroup": "s2p",
            "containerName": "users",
            "heartbeatInterval": "3s",
            "partitions": [
              0
            ],
            "pollingIntervalMs": 500,
            "readBatchSize": 64,
            "seekTo": "earliest",
            "sequenceNumberCommitInterval": "1s",
            "sessionTimeout": "10s",
            "streamPath": "/admin/demos/network-operations/streaming/labeled_stream",
            "workerAllocationMode": "pool"
          }
        }
      },
      "volumes": [
        {
          "volume": {
            "name": "v3io",
            "flexVolume": {
              "driver": "v3io/fuse",
              "options": {
                "accessKey": "b7242e47-a051-4ec3-8384-5f99a26c1451"
              }
            }
          },
          "volumeMount": {
            "name": "v3io",
            "mountPath": "/v3io"
          }
        },
        {
          "volume": {
            "name": "v3io",
            "flexVolume": {
              "driver": "v3io/fuse",
              "options": {
                "accessKey": "b7242e47-a051-4ec3-8384-5f99a26c1451"
              }
            }
          },
          "volumeMount": {
            "name": "v3io",
            "mountPath": "/User",
            "subPath": "users/admin"
          }
        }
      ],
      "version": -1,
      "alias": "latest",
      "build": {
        "functionSourceCode": "IyBHZW5lcmF0ZWQgYnkgbnVjbGlvLmV4cG9ydC5OdWNsaW9FeHBvcnRlcgoKaW1wb3J0IG9zCmltcG9ydCBwYW5kYXMgYXMgcGQKaW1wb3J0IG51bXB5IGFzIG5wCmltcG9ydCBqc29uCmltcG9ydCBkYXRldGltZQppbXBvcnQgbWxydW4KCgpkZWYgcmVjb3JkX3RvX2ZlYXR1cmVzKHJlY29yZCk6CiAgICBmZWF0dXJlcyA9IHJlY29yZFsicmVxdWVzdCJdWyJpbnN0YW5jZXMiXVswXQogICAgdGltZXN0YW1wID0gcmVjb3JkWyJ3aGVuIl0KICAgIHByZWRpY3Rpb24gPSByZWNvcmRbInJlc3AiXQoKICAgIHJlY29yZCA9IHsidGltZXN0YW1wIjogdGltZXN0YW1wLCAqKmZlYXR1cmVzLCAicHJlZGljdGlvbnMiOiBwcmVkaWN0aW9ufQoKICAgIHJldHVybiByZWNvcmQKCgpkZWYgaW5pdF9jb250ZXh0KGNvbnRleHQpOgogICAgc2V0YXR0cihjb250ZXh0LCAiYmF0Y2giLCBbXSkKICAgIHNldGF0dHIoY29udGV4dCwgIndpbmRvdyIsIGludChvcy5nZXRlbnYoIndpbmRvdyIsIDEwKSkpCiAgICBzZXRhdHRyKGNvbnRleHQsICJzYXZlX3RvIiwgb3MuZ2V0ZW52KCJzYXZlX3RvIiwgIi9iaWdkYXRhL2luZmVyZW5jZV9wcS8iKSkKICAgIG9zLm1ha2VkaXJzKGNvbnRleHQuc2F2ZV90bywgZXhpc3Rfb2s9VHJ1ZSkKCiAgICBtbHJ1bi5tbGNvbmYuZGJwYXRoID0gbWxydW4ubWxjb25mLmRicGF0aCBvciAiaHR0cDovL21scnVuLWFwaTo4MDgwIgogICAgYXJ0aWZhY3RfcGF0aCA9IG9zLmdldGVudigiYXJ0aWZhY3RfcGF0aCIsIE5vbmUpCiAgICBpZiBhcnRpZmFjdF9wYXRoOgogICAgICAgIG1scnVuLm1sY29uZi5hcnRpZmFjdF9wYXRoID0gYXJ0aWZhY3RfcGF0aAogICAgaWYgImh1Yl91cmwiIGluIG9zLmVudmlyb246CiAgICAgICAgbWxydW4ubWxjb25mLmh1Yl91cmwgPSBvcy5lbnZpcm9uWyJodWJfdXJsIl0KICAgIHZpcnR1YWxfZHJpZnRfZm4gPSBtbHJ1bi5pbXBvcnRfZnVuY3Rpb24oImh1YjovL3ZpcnR1YWxfZHJpZnQiKQogICAgdmlydHVhbF9kcmlmdF9mbi5hcHBseSgKICAgICAgICBtbHJ1bi5tb3VudF92M2lvKAogICAgICAgICAgICBtb3VudF9wYXRoPW9zLmdldGVudigibW91bnRfcGF0aCIsICJ+LyIpLAogICAgICAgICAgICByZW1vdGU9b3MuZ2V0ZW52KCJtb3VudF9yZW1vdGUiLCAiL1VzZXIiKSwKICAgICAgICApCiAgICApCiAgICBzZXRhdHRyKGNvbnRleHQsICJ2aXJ0dWFsX2RyaWZ0X2ZuIiwgdmlydHVhbF9kcmlmdF9mbikKCiAgICBwcmVkaWN0aW9uc19jb2wgPSBvcy5nZXRlbnYoInByZWRpY3Rpb25zIiwgTm9uZSkKICAgIGxhYmVsX2NvbCA9IG9zLmdldGVudigibGFiZWxfY29sIiwgTm9uZSkKICAgIHNldGF0dHIoY29udGV4dCwgImJhc2VfZGF0YXNldCIsIG9zLmdldGVudigiYmFzZV9kYXRhc2V0IiwgIiIpKQogICAgc2V0YXR0cihjb250ZXh0LCAiaW5kZXhlcyIsIGpzb24ubG9hZHMob3MuZW52aXJvbi5nZXQoImluZGV4ZXMiLCAiW10iKSkpCiAgICBzZXRhdHRyKGNvbnRleHQsICJwcmVkaWN0aW9uc19jb2wiLCBwcmVkaWN0aW9uc19jb2wpCiAgICBzZXRhdHRyKGNvbnRleHQsICJsYWJlbF9jb2wiLCBsYWJlbF9jb2wpCiAgICBzZXRhdHRyKAogICAgICAgIGNvbnRleHQsICJyZXN1bHRzX3RzZGJfY29udGFpbmVyIiwgb3MuZ2V0ZW52KCJyZXN1bHRzX3RzZGJfY29udGFpbmVyIiwgTm9uZSkKICAgICkKICAgIHNldGF0dHIoY29udGV4dCwgInJlc3VsdHNfdHNkYl90YWJsZSIsIG9zLmdldGVudigicmVzdWx0c190c2RiX3RhYmxlIiwgTm9uZSkpCgoKZGVmIGhhbmRsZXIoY29udGV4dCwgZXZlbnQpOgoKICAgIGNvbnRleHQubG9nZ2VyLmluZm8oZiJBZGRpbmcge2V2ZW50LmJvZHl9IikKICAgIGNvbnRleHQuYmF0Y2guYXBwZW5kKHJlY29yZF90b19mZWF0dXJlcyhqc29uLmxvYWRzKGV2ZW50LmJvZHkpKSkKCiAgICBpZiBsZW4oY29udGV4dC5iYXRjaCkgPiBjb250ZXh0LndpbmRvdzoKICAgICAgICBjb250ZXh0LmxvZ2dlci5pbmZvKGNvbnRleHQuYmF0Y2hbOjFdKQogICAgICAgIGNvbnRleHQubG9nZ2VyLmluZm8oY29udGV4dC5pbmRleGVzKQogICAgICAgIGRmID0gcGQuRGF0YUZyYW1lKGNvbnRleHQuYmF0Y2gpCiAgICAgICAgY29udGV4dC5sb2dnZXIuaW5mbyhmImRmIGV4YW1wbGU6IHtkZi5oZWFkKDEpfSIpCiAgICAgICAgaWYgY29udGV4dC5pbmRleGVzOgogICAgICAgICAgICBkZiA9IGRmLnNldF9pbmRleChjb250ZXh0LmluZGV4ZXMpCiAgICAgICAgZGZfcGF0aCA9IG9zLnBhdGguam9pbigKICAgICAgICAgICAgY29udGV4dC5zYXZlX3RvLAogICAgICAgICAgICBmIntkYXRldGltZS5kYXRldGltZS5ub3coKS5zdHJmdGltZSgnJVktJW0tJWRUJUg6JU06JVMnKX0ucHEiLAogICAgICAgICkKICAgICAgICBkZi50b19wYXJxdWV0KGRmX3BhdGgpCgogICAgICAgIHRhc2sgPSBtbHJ1bi5OZXdUYXNrKAogICAgICAgICAgICBuYW1lPSJkcmlmdF9tYWduaXR1ZGUiLAogICAgICAgICAgICBoYW5kbGVyPSJkcmlmdF9tYWduaXR1ZGUiLAogICAgICAgICAgICBwYXJhbXM9ewogICAgICAgICAgICAgICAgImxhYmVsX2NvbCI6IGNvbnRleHQubGFiZWxfY29sLAogICAgICAgICAgICAgICAgInByZWRpY3Rpb25fY29sIjogY29udGV4dC5wcmVkaWN0aW9uc19jb2wsCiAgICAgICAgICAgICAgICAicmVzdWx0c190c2RiX2NvbnRhaW5lciI6IGNvbnRleHQucmVzdWx0c190c2RiX2NvbnRhaW5lciwKICAgICAgICAgICAgICAgICJyZXN1bHRzX3RzZGJfdGFibGUiOiBjb250ZXh0LnJlc3VsdHNfdHNkYl90YWJsZSwKICAgICAgICAgICAgfSwKICAgICAgICAgICAgaW5wdXRzPXsidCI6IGNvbnRleHQuYmFzZV9kYXRhc2V0LCAidSI6IGRmX3BhdGh9LAogICAgICAgICAgICBhcnRpZmFjdF9wYXRoPW1scnVuLm1sY29uZi5hcnRpZmFjdF9wYXRoLAogICAgICAgICkKCiAgICAgICAgY29udGV4dC52aXJ0dWFsX2RyaWZ0X2ZuLnJ1bih0YXNrLCB3YXRjaD1GYWxzZSkKCiAgICAgICAgY29udGV4dC5iYXRjaCA9IFtdCg==",
        "noBaseImagesPull": true,
        "baseImage": "mlrun/ml-models:0.7.0-rc11",
        "offline": true,
        "codeEntryType": "sourceCode",
        "timestamp": 1630268965
      },
      "platform": {},
      "serviceType": "NodePort",
      "securityContext": {},
      "scaleToZero": {
        "scaleResources": [
          {
            "metricName": "nuclio_processor_handled_events_total",
            "windowSize": "10m",
            "threshold": 0
          }
        ]
      },
      "eventTimeout": ""
    },
    "status": {
      "state": "ready"
    }
  },
  "network-operations-nuclio-generator": {
    "metadata": {
      "name": "network-operations-nuclio-generator",
      "namespace": "default-tenant",
      "labels": {
        "mlrun/class": "remote",
        "nuclio.io/project-name": "network-operations"
      },
      "annotations": {
        "nuclio.io/generated_by": "function generated from nuclio-generator.ipynb"
      },
      "resourceVersion": "37858337"
    },
    "spec": {
      "handler": "generator:handler",
      "runtime": "python:3.6",
      "env": [
        {
          "name": "BATCHES_TO_GENERATE",
          "value": "20"
        },
        {
          "name": "SAVE_DEPLOYMENT",
          "value": "1"
        },
        {
          "name": "DEPLOYMENT_TABLE",
          "value": "devices"
        },
        {
          "name": "METRICS_CONFIGURATION_FILEPATH",
          "value": "/User/demos/network-operations/src/metric_configurations.yaml"
        },
        {
          "name": "SAVE_TO",
          "value": "/User/demos/network-operations/data"
        },
        {
          "name": "SECS_TO_GENERATE",
          "value": "3600"
        },
        {
          "name": "SAVE_TO_TSDB",
          "value": "0"
        },
        {
          "name": "V3IO_API",
          "value": "v3io-webapi.default-tenant.svc:8081"
        },
        {
          "name": "V3IO_USERNAME",
          "value": "admin"
        },
        {
          "name": "V3IO_ACCESS_KEY",
          "value": "b7242e47-a051-4ec3-8384-5f99a26c1451"
        },
        {
          "name": "MLRUN_DEFAULT_PROJECT",
          "value": "network-operations"
        },
        {
          "name": "MLRUN_DBPATH",
          "value": "http://mlrun-api:8080"
        },
        {
          "name": "MLRUN_NAMESPACE",
          "value": "default-tenant"
        }
      ],
      "resources": {},
      "imageHash": "1625578972411049165",
      "minReplicas": 1,
      "maxReplicas": 4,
      "triggers": {
        "cron": {
          "class": "",
          "kind": "cron",
          "name": "cron",
          "attributes": {
            "interval": "1m"
          }
        },
        "default-http": {
          "class": "",
          "kind": "http",
          "name": "default-http",
          "maxWorkers": 1,
          "attributes": {
            "serviceType": "NodePort"
          }
        }
      },
      "volumes": [
        {
          "volume": {
            "name": "v3io",
            "flexVolume": {
              "driver": "v3io/fuse",
              "options": {
                "accessKey": "b7242e47-a051-4ec3-8384-5f99a26c1451"
              }
            }
          },
          "volumeMount": {
            "name": "v3io",
            "mountPath": "/v3io"
          }
        },
        {
          "volume": {
            "name": "v3io",
            "flexVolume": {
              "driver": "v3io/fuse",
              "options": {
                "accessKey": "b7242e47-a051-4ec3-8384-5f99a26c1451"
              }
            }
          },
          "volumeMount": {
            "name": "v3io",
            "mountPath": "/User",
            "subPath": "users/admin"
          }
        }
      ],
      "version": -1,
      "alias": "latest",
      "build": {
        "functionSourceCode": "IyBHZW5lcmF0ZWQgYnkgbnVjbGlvLmV4cG9ydC5OdWNsaW9FeHBvcnRlcgoKaW1wb3J0IG9zCmltcG9ydCB0aW1lCmltcG9ydCB5YW1sCmltcG9ydCBwYW5kYXMgYXMgcGQKaW1wb3J0IGl0ZXJ0b29scwppbXBvcnQgZGF0ZXRpbWUKCmltcG9ydCB2M2lvX2ZyYW1lcyBhcyB2M2YKCmZyb20gdjNpb19nZW5lcmF0b3IgaW1wb3J0IG1ldHJpY3NfZ2VuZXJhdG9yLCBkZXBsb3ltZW50X2dlbmVyYXRvcgoKZGVmIF9jcmVhdGVfZGVwbG95bWVudCgpOgogICAgcHJpbnQoJ2NyZWF0aW5nIGRlcGxveW1lbnQnKQogICAgZGVwX2dlbiA9IGRlcGxveW1lbnRfZ2VuZXJhdG9yLmRlcGxveW1lbnRfZ2VuZXJhdG9yKCkKICAgIGZha2VyPWRlcF9nZW4uZ2V0X2Zha2VyKCkKCiAgICBkZXBfZ2VuLmFkZF9sZXZlbChuYW1lPSdjb21wYW55JyxudW1iZXI9MixsZXZlbF90eXBlPWZha2VyLmNvbXBhbnkpCiAgICBkZXBfZ2VuLmFkZF9sZXZlbCgnZGF0YV9jZW50ZXInLG51bWJlcj0yLGxldmVsX3R5cGU9ZmFrZXIuc3RyZWV0X25hbWUpCiAgICBkZXBfZ2VuLmFkZF9sZXZlbCgnZGV2aWNlJyxudW1iZXI9MixsZXZlbF90eXBlPWZha2VyLm1zaXNkbikKCiAgICBkZXBsb3ltZW50X2RmID0gZGVwX2dlbi5nZW5lcmF0ZV9kZXBsb3ltZW50KCkKICAgIHJldHVybiBkZXBsb3ltZW50X2RmCgpkZWYgX2lzX2RlcGxveW1lbnRfZXhpc3QocGF0aCk6CiAgICByZXR1cm4gb3MucGF0aC5leGlzdHMoZicvdjNpby9iaWdkYXRhL3twYXRofScpCgpkZWYgX2dldF9kZXBsb3ltZW50X2Zyb21fa3YoY2xpZW50LCBwYXRoKToKICAgIHByaW50KGYnUmV0cmlldmluZyBkZXBsb3ltZW50IGZyb20ge3BhdGh9JykKICAgIGNvbnRleHQubG9nZ2VyLmRlYnVnKGYnUmV0cmlldmluZyBkZXBsb3ltZW50IGZyb20ge3BhdGh9JykKICAgIGRlcGxveW1lbnRfZGYgPSBjbGllbnQucmVhZChiYWNrZW5kPSdrdicsIHRhYmxlPXBhdGgpCiAgICAKICAgIGRlcGxveW1lbnRfZGYuaW5kZXgubmFtZSA9ICdkZXZpY2UnCiAgICBkZXBsb3ltZW50X2RmID0gZGVwbG95bWVudF9kZi5yZXNldF9pbmRleCgpCiAgICByZXR1cm4gZGVwbG95bWVudF9kZgoKZGVmIF9zYXZlX2RlcGxveW1lbnRfdG9fa3YocGF0aCwgZGYsIGNsaWVudD1Ob25lKToKICAgIGNsaWVudC53cml0ZShiYWNrZW5kPSdrdicsIHRhYmxlPSduZXRvcHNfZGV2aWNlcycsZGZzPWRmLCBpbmRleF9jb2xzPVsnZGV2aWNlJ10pCgpkZWYgZ2V0X29yX2NyZWF0ZV9kZXBsb3ltZW50KHBhdGgsIHNhdmVfdG9fY2xvdWQ9RmFsc2UsIGNsaWVudD1Ob25lKToKICAgIGlmIGNsaWVudCBhbmQgX2lzX2RlcGxveW1lbnRfZXhpc3QocGF0aCk6CiAgICAgICAgZGVwbG95bWVudF9kZiA9IF9nZXRfZGVwbG95bWVudF9mcm9tX2t2KGNsaWVudCwgcGF0aCkKICAgIGVsc2U6CiAgICAgICAgZGVwbG95bWVudF9kZiA9IF9jcmVhdGVfZGVwbG95bWVudCgpCiAgICAgICAgCiAgICAgICAgaWYgY2xpZW50IGFuZCBzYXZlX3RvX2Nsb3VkOgogICAgICAgICAgICBfc2F2ZV9kZXBsb3ltZW50X3RvX2t2KHBhdGgsIGRlcGxveW1lbnRfZGYsIGNsaWVudCkKCiAgICByZXR1cm4gZGVwbG95bWVudF9kZgoKZGVmIHNldF9pbmRleGVzKGRmKToKICAgIGRmID0gZGYuc2V0X2luZGV4KFsndGltZXN0YW1wJywgJ2NvbXBhbnknLCAnZGF0YV9jZW50ZXInLCAnZGV2aWNlJ10pCiAgICByZXR1cm4gZGYKCmRlZiBzYXZlX21ldHJpY3NfdG9fdHNkYihjb250ZXh0LCBtZXRyaWNzOiBwZC5EYXRhRnJhbWUpOgogICAgcHJpbnQoJ1NhdmluZyBtZXRyaWNzIHRvIFRTREInKQogICAgCiAgICBjb250ZXh0LnYzZi53cml0ZSgndHNkYicsIGNvbnRleHQubWV0cmljc190YWJsZSwgbWV0cmljcykKCmRlZiBzYXZlX21ldHJpY3NfdG9fcGFycXVldChjb250ZXh0LCBtZXRyaWNzKToKICAgIHByaW50KCdTYXZpbmcgbWV0cmljcyB0byBQYXJxdWV0JykKICAgIGRmID0gcGQuY29uY2F0KGl0ZXJ0b29scy5jaGFpbihtZXRyaWNzKSkKICAgIAogICAgZGYgPSBkZi5yZXNldF9pbmRleCgpCiAgICBkZlsndGltZXN0YW1wJ10gPSBkZi5sb2NbOiwgJ3RpbWVzdGFtcCddLmFzdHlwZSgnZGF0ZXRpbWU2NFttc10nKQogICAgCiAgICBkZiA9IHNldF9pbmRleGVzKGRmKQogICAgCiAgICBmaXJzdF90aW1lc3RhbXAgPSBkZi5pbmRleFswXVswXS5zdHJmdGltZSgnJVklbSVkVCVIJU0lUycpCiAgICBsYXN0X3RpbWVzdGFtcCA9IGRmLmluZGV4Wy0xXVswXS5zdHJmdGltZSgnJVklbSVkVCVIJU0lUycpCiAgICBmaWxlbmFtZSA9IGZpcnN0X3RpbWVzdGFtcCArICctJyArIGxhc3RfdGltZXN0YW1wICsgJy5wYXJxdWV0JwogICAgcHJpbnQoZmlsZW5hbWUpCiAgICBmaWxlcGF0aCA9IG9zLnBhdGguam9pbihjb250ZXh0Lm1ldHJpY3NfdGFibGUsIGZpbGVuYW1lKQogICAgcHJpbnQoZmlsZXBhdGgpCiAgICB3aXRoIG9wZW4oZmlsZXBhdGgsICd3YisnKSBhcyBmOgogICAgICAgIGRmLnRvX3BhcnF1ZXQoZikKCmRlZiBpc19kZXBsb3ltZW50X2luaXRpYWxpemVkKGNvbnRleHQpOgogICAgcmV0dXJuIGhhc2F0dHIoY29udGV4dCwgJ21ldHJpY19nZW5lcmF0b3InKQoKZGVmIGluaXRfY29udGV4dChjb250ZXh0KToKICAgIAogICAgYmF0Y2hlc190b19nZW5lcmF0ZSA9IGludChvcy5nZXRlbnYoJ0JBVENIRVNfVE9fR0VORVJBVEUnLCAyMCkpCiAgICBzZXRhdHRyKGNvbnRleHQsICdiYXRjaGVzX3RvX2dlbmVyYXRlJywgYmF0Y2hlc190b19nZW5lcmF0ZSkKICAgIHNldGF0dHIoY29udGV4dCwgJ2JhdGNoZXNfZ2VuZXJhdGVkJywgMCkKICAgIAogICAgc2F2ZV90b190c2RiID0gKGludChvcy5nZXRlbnYoJ1NBVkVfVE9fVFNEQicsIDEpKSA9PSAxKQogICAgCiAgICBtZXRyaWNzX3RhYmxlID0gb3MuZ2V0ZW52KCdTQVZFX1RPJywgJ25ldG9wc19tZXRyaWNzJykKICAgIHNldGF0dHIoY29udGV4dCwgJ21ldHJpY3NfdGFibGUnLCBtZXRyaWNzX3RhYmxlKSAKCiAgICBpZiBzYXZlX3RvX3RzZGI6CiAgICAgICAgY29udGV4dC5sb2dnZXIuZGVidWcoJ1NhdmluZyB0byBUU0RCJykKICAgICAgICBjbGllbnQgPSB2M2YuQ2xpZW50KGFkZHJlc3M9J2ZyYW1lc2Q6ODA4MScsIGNvbnRhaW5lcj0nYmlnZGF0YScpCiAgICAgICAgCiAgICAgICAgY2xpZW50LmNyZWF0ZSgndHNkYicsIG1ldHJpY3NfdGFibGUsIHJhdGU9JzEvcycsIGlmX2V4aXN0cz0xKQogICAgICAgIAogICAgICAgIHNldGF0dHIoY29udGV4dCwgJ3dyaXRlJywgc2F2ZV9tZXRyaWNzX3RvX3RzZGIpCiAgICAKICAgIGVsc2U6CiAgICAgICAgY29udGV4dC5sb2dnZXIuZGVidWcoJ1NhdmluZyB0byBQYXJxdWV0JykKICAgICAgICBjbGllbnQgPSBOb25lCiAgICAgICAgICAKICAgICAgICBmaWxlcGF0aCA9IG9zLnBhdGguam9pbihtZXRyaWNzX3RhYmxlKQogICAgICAgIGlmIG5vdCBvcy5wYXRoLmV4aXN0cyhmaWxlcGF0aCk6CiAgICAgICAgICAgIG9zLm1ha2VkaXJzKGZpbGVwYXRoKQogICAgICAgIAogICAgICAgIHNldGF0dHIoY29udGV4dCwgJ3dyaXRlJywgc2F2ZV9tZXRyaWNzX3RvX3BhcnF1ZXQpCiAgICAKICAgICAgICAgIAogICAgc2Vjc190b19nZW5lcmF0ZSA9IG9zLmdldGVudignU0VDU19UT19HRU5FUkFURScsIDEwKQogICAgc2V0YXR0cihjb250ZXh0LCAnc2Vjc190b19nZW5lcmF0ZScsIHNlY3NfdG9fZ2VuZXJhdGUpCiAgICAKICAgICAKICAgIAogICAgZGVwbG95bWVudF9kZiA9IGdldF9vcl9jcmVhdGVfZGVwbG95bWVudChvcy5lbnZpcm9uWydERVBMT1lNRU5UX1RBQkxFJ10sIG9zLmVudmlyb25bJ1NBVkVfREVQTE9ZTUVOVCddLCBjbGllbnQpCiAgICAKICAgIGRlcGxveW1lbnRfZGZbJ2NwdV91dGlsaXphdGlvbiddID0gNzAKICAgIGRlcGxveW1lbnRfZGZbJ2xhdGVuY3knXSA9IDAKICAgIGRlcGxveW1lbnRfZGZbJ3BhY2tldF9sb3NzJ10gPSAwCiAgICBkZXBsb3ltZW50X2RmWyd0aHJvdWdocHV0J10gPSAyOTAKICAgIGRlcGxveW1lbnRfZGYuaGVhZCgpCiAgICAKICAgIHdpdGggb3Blbihvcy5nZXRlbnYoJ01FVFJJQ1NfQ09ORklHVVJBVElPTl9GSUxFUEFUSCcsICcvc3JjL21ldHJpY3NfY29uZmlndXJhdGlvbi55YW1sJyksICdyJykgYXMgZjoKICAgICAgICBtZXRyaWNzX2NvbmZpZ3VyYXRpb24gPSB5YW1sLmxvYWQoZikKICAgICAgICAKICAgIGluaXRpYWxfdGltZXN0YW1wID0gaW50KG9zLmdldGVudignaW5pdGlhbF90aW1lc3RhbXAnLCAoZGF0ZXRpbWUuZGF0ZXRpbWUubm93KCktZGF0ZXRpbWUudGltZWRlbHRhKGRheXM9MSkpLnRpbWVzdGFtcCgpKSkKICAgIG1ldF9nZW4gPSBtZXRyaWNzX2dlbmVyYXRvci5HZW5lcmF0b3JfZGYobWV0cmljc19jb25maWd1cmF0aW9uLCAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlcl9oaWVyYXJjaHk9ZGVwbG95bWVudF9kZiwgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluaXRpYWxfdGltZXN0YW1wPWluaXRpYWxfdGltZXN0YW1wKQogICAgc2V0YXR0cihjb250ZXh0LCAnbWV0cmljX2dlbmVyYXRvcicsIG1ldF9nZW4pCiAgICAKICAgIHNldGF0dHIoY29udGV4dCwgJ3YzZicsIGNsaWVudCkKCmRlZiBoYW5kbGVyKGNvbnRleHQsIGV2ZW50KToKICAgIAogICAgaWYgKGNvbnRleHQuYmF0Y2hlc190b19nZW5lcmF0ZSA9PSAtMSkgb3IgKGNvbnRleHQuYmF0Y2hlc19nZW5lcmF0ZWQgPD0gY29udGV4dC5iYXRjaGVzX3RvX2dlbmVyYXRlKToKICAgICAgICAKICAgICAgICBtZXRyaWNzID0gY29udGV4dC5tZXRyaWNfZ2VuZXJhdG9yLmdlbmVyYXRlX3JhbmdlKHN0YXJ0X3RpbWU9ZGF0ZXRpbWUuZGF0ZXRpbWUubm93KCksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kX3RpbWU9ZGF0ZXRpbWUuZGF0ZXRpbWUubm93KCkrZGF0ZXRpbWUudGltZWRlbHRhKHNlY29uZHM9aW50KGNvbnRleHQuc2Vjc190b19nZW5lcmF0ZSkpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzX2RmPVRydWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXNfaXRlcmF0b3I9VHJ1ZSkKCiAgICAgICAgY29udGV4dC53cml0ZShjb250ZXh0LCBtZXRyaWNzKQogICAgICAgIAogICAgICAgIGNvbnRleHQuYmF0Y2hlc19nZW5lcmF0ZWQgKz0gMQoK",
        "noBaseImagesPull": true,
        "baseImage": "mlrun/ml-models:0.6.5-rc12",
        "commands": [
          "python -m pip install pyyaml",
          "python -m pip install pyarrow",
          "python -m pip install pandas",
          "python -m pip install pytimeparse",
          "python -m pip install v3io_frames --upgrade",
          "python -m pip install -i https://test.pypi.org/simple/ v3io-generator",
          "python -m pip install faker"
        ],
        "offline": true,
        "codeEntryType": "sourceCode",
        "timestamp": 1625579007
      },
      "platform": {},
      "serviceType": "NodePort",
      "securityContext": {},
      "scaleToZero": {
        "scaleResources": [
          {
            "metricName": "nuclio_processor_handled_events_total",
            "windowSize": "10m",
            "threshold": 0
          }
        ]
      },
      "eventTimeout": ""
    },
    "status": {
      "state": "ready"
    }
  },
  "sk-project-admin-v2-model-server": {
    "metadata": {
      "name": "sk-project-admin-v2-model-server",
      "namespace": "default-tenant",
      "labels": {
        "mlrun/class": "serving",
        "nuclio.io/project-name": "sk-project-admin"
      },
      "annotations": {
        "nuclio.io/generated_by": "function generated from /home/michaell/projects/functions/v2_model_server/v2_model_server.py"
      },
      "resourceVersion": "37858334"
    },
    "spec": {
      "handler": "v2_model_server:handler",
      "runtime": "python:3.6",
      "env": [
        {
          "name": "V3IO_API",
          "value": "v3io-webapi.default-tenant.svc:8081"
        },
        {
          "name": "V3IO_USERNAME",
          "value": "admin"
        },
        {
          "name": "V3IO_ACCESS_KEY",
          "value": "b7242e47-a051-4ec3-8384-5f99a26c1451"
        },
        {
          "name": "V3IO_FRAMESD",
          "value": "framesd:8081"
        },
        {
          "name": "MLRUN_DEFAULT_PROJECT",
          "value": "sk-project-admin"
        },
        {
          "name": "MLRUN_DBPATH",
          "value": "http://mlrun-api:8080"
        },
        {
          "name": "MLRUN_NAMESPACE",
          "value": "default-tenant"
        },
        {
          "name": "SERVING_SPEC_ENV",
          "value": "{\"function_uri\": \"sk-project-admin/v2-model-server\", \"version\": \"v2\", \"parameters\": {}, \"graph\": {\"kind\": \"router\", \"routes\": {\"iris_dataset:v1\": {\"kind\": \"task\", \"class_name\": \"ClassifierModel\", \"class_args\": {\"model_path\": \"store://models/sk-project-admin/train_model:a0e31343-3be8-4aa2-9de5-0e54342f8e1a\"}}}}, \"load_mode\": null, \"functions\": {}, \"graph_initializer\": null, \"error_stream\": null, \"track_models\": null, \"default_content_type\": null}"
        }
      ],
      "resources": {},
      "imageHash": "1630300991065030791",
      "minReplicas": 1,
      "maxReplicas": 4,
      "triggers": {
        "default-http": {
          "class": "",
          "kind": "http",
          "name": "default-http",
          "maxWorkers": 1,
          "attributes": {
            "serviceType": "NodePort"
          }
        }
      },
      "volumes": [
        {
          "volume": {
            "name": "v3io",
            "flexVolume": {
              "driver": "v3io/fuse",
              "options": {
                "accessKey": "b7242e47-a051-4ec3-8384-5f99a26c1451"
              }
            }
          },
          "volumeMount": {
            "name": "v3io",
            "mountPath": "/v3io"
          }
        },
        {
          "volume": {
            "name": "v3io",
            "flexVolume": {
              "driver": "v3io/fuse",
              "options": {
                "accessKey": "b7242e47-a051-4ec3-8384-5f99a26c1451"
              }
            }
          },
          "volumeMount": {
            "name": "v3io",
            "mountPath": "/User",
            "subPath": "users/admin"
          }
        }
      ],
      "version": -1,
      "alias": "latest",
      "build": {
        "functionSourceCode": "IyBHZW5lcmF0ZWQgYnkgbnVjbGlvLmV4cG9ydC5OdWNsaW9FeHBvcnRlcgoKaW1wb3J0IG1scnVuCgpmcm9tIGNsb3VkcGlja2xlIGltcG9ydCBsb2FkCmZyb20gdHlwaW5nIGltcG9ydCBMaXN0CmZyb20gc2tsZWFybi5kYXRhc2V0cyBpbXBvcnQgbG9hZF9pcmlzCmltcG9ydCBudW1weSBhcyBucAoKaW1wb3J0IHdhcm5pbmdzCgp3YXJuaW5ncy5maWx0ZXJ3YXJuaW5ncygiaWdub3JlIikKCgpjbGFzcyBDbGFzc2lmaWVyTW9kZWwobWxydW4uc2VydmluZy5WMk1vZGVsU2VydmVyKToKICAgIGRlZiBsb2FkKHNlbGYpOgogICAgICAgICIiImxvYWQgYW5kIGluaXRpYWxpemUgdGhlIG1vZGVsIGFuZC9vciBvdGhlciBlbGVtZW50cyIiIgogICAgICAgIG1vZGVsX2ZpbGUsIGV4dHJhX2RhdGEgPSBzZWxmLmdldF9tb2RlbCgiLnBrbCIpCiAgICAgICAgc2VsZi5tb2RlbCA9IGxvYWQob3Blbihtb2RlbF9maWxlLCAicmIiKSkKCiAgICBkZWYgcHJlZGljdChzZWxmLCBib2R5OiBkaWN0KSAtPiBMaXN0OgogICAgICAgICIiIkdlbmVyYXRlIG1vZGVsIHByZWRpY3Rpb25zIGZyb20gc2FtcGxlLiIiIgogICAgICAgIGZlYXRzID0gbnAuYXNhcnJheShib2R5WyJpbnB1dHMiXSkKICAgICAgICByZXN1bHQ6IG5wLm5kYXJyYXkgPSBzZWxmLm1vZGVsLnByZWRpY3QoZmVhdHMpCiAgICAgICAgcmV0dXJuIHJlc3VsdC50b2xpc3QoKQoKCmZyb20gbWxydW4ucnVudGltZXMgaW1wb3J0IG51Y2xpb19pbml0X2hvb2sKCgpkZWYgaW5pdF9jb250ZXh0KGNvbnRleHQpOgogICAgbnVjbGlvX2luaXRfaG9vayhjb250ZXh0LCBnbG9iYWxzKCksICJzZXJ2aW5nX3YyIikKCgpkZWYgaGFuZGxlcihjb250ZXh0LCBldmVudCk6CiAgICByZXR1cm4gY29udGV4dC5tbHJ1bl9oYW5kbGVyKGNvbnRleHQsIGV2ZW50KQoKZnJvbSBtbHJ1bi5ydW50aW1lcyBpbXBvcnQgbnVjbGlvX2luaXRfaG9vawpkZWYgaW5pdF9jb250ZXh0KGNvbnRleHQpOgogICAgbnVjbGlvX2luaXRfaG9vayhjb250ZXh0LCBnbG9iYWxzKCksICdzZXJ2aW5nX3YyJykKCmRlZiBoYW5kbGVyKGNvbnRleHQsIGV2ZW50KToKICAgIHJldHVybiBjb250ZXh0Lm1scnVuX2hhbmRsZXIoY29udGV4dCwgZXZlbnQpCg==",
        "noBaseImagesPull": true,
        "baseImage": "mlrun/mlrun:0.7.0-rc11",
        "offline": true,
        "codeEntryType": "sourceCode",
        "timestamp": 1630300997
      },
      "platform": {},
      "serviceType": "NodePort",
      "securityContext": {},
      "scaleToZero": {
        "scaleResources": [
          {
            "metricName": "nuclio_processor_handled_events_total",
            "windowSize": "10m",
            "threshold": 0
          }
        ]
      },
      "eventTimeout": ""
    },
    "status": {
      "state": "ready"
    }
  },
  "stocks-admin-news-reader": {
    "metadata": {
      "name": "stocks-admin-news-reader",
      "namespace": "default-tenant",
      "labels": {
        "mlrun/class": "remote",
        "nuclio.io/project-name": "stocks-admin"
      },
      "annotations": {
        "nuclio.io/generated_by": "function generated from /User/demos/stock-analysis/code/02-read-news.ipynb"
      },
      "resourceVersion": "37853967"
    },
    "spec": {
      "handler": "02-read-news:handler",
      "runtime": "python:3.6",
      "env": [
        {
          "name": "V3IO_ACCESS_KEY",
          "value": "b7242e47-a051-4ec3-8384-5f99a26c1451"
        },
        {
          "name": "V3IO_USERNAME",
          "value": "admin"
        },
        {
          "name": "V3IO_API",
          "value": "v3io-webapi.default-tenant.svc:8081"
        },
        {
          "name": "V3IO_CONTAINER",
          "value": "users"
        },
        {
          "name": "STOCKS_STREAM",
          "value": "admin/stocks/stocks_stream"
        },
        {
          "name": "STOCKS_TSDB_TABLE",
          "value": "admin/stocks/stocks_tsdb"
        },
        {
          "name": "SENTIMENT_MODEL_ENDPOINT",
          "value": "http://default-tenant.app.vmdev36.lab.iguazeng.com:32089"
        },
        {
          "name": "PROJECT_NAME",
          "value": "stocks-admin"
        },
        {
          "name": "MLRUN_DEFAULT_PROJECT",
          "value": "stocks-admin"
        },
        {
          "name": "MLRUN_DBPATH",
          "value": "http://mlrun-api:8080"
        },
        {
          "name": "MLRUN_NAMESPACE",
          "value": "default-tenant"
        }
      ],
      "resources": {},
      "imageHash": "1625661978864403585",
      "minReplicas": 1,
      "maxReplicas": 1,
      "triggers": {
        "cron": {
          "class": "",
          "kind": "cron",
          "name": "cron",
          "attributes": {
            "interval": "300s"
          }
        },
        "default-http": {
          "class": "",
          "kind": "http",
          "name": "default-http",
          "maxWorkers": 1,
          "attributes": {
            "serviceType": "NodePort"
          }
        }
      },
      "volumes": [
        {
          "volume": {
            "name": "v3io",
            "flexVolume": {
              "driver": "v3io/fuse",
              "options": {
                "accessKey": "b7242e47-a051-4ec3-8384-5f99a26c1451"
              }
            }
          },
          "volumeMount": {
            "name": "v3io",
            "mountPath": "/v3io"
          }
        },
        {
          "volume": {
            "name": "v3io",
            "flexVolume": {
              "driver": "v3io/fuse",
              "options": {
                "accessKey": "b7242e47-a051-4ec3-8384-5f99a26c1451"
              }
            }
          },
          "volumeMount": {
            "name": "v3io",
            "mountPath": "/User",
            "subPath": "users/admin"
          }
        }
      ],
      "version": -1,
      "alias": "latest",
      "build": {
        "functionSourceCode": "IyBHZW5lcmF0ZWQgYnkgbnVjbGlvLmV4cG9ydC5OdWNsaW9FeHBvcnRlcgoKZnJvbSBiczQgaW1wb3J0IEJlYXV0aWZ1bFNvdXAgYXMgYnMKZnJvbSB1cmxsaWIucmVxdWVzdCBpbXBvcnQgUmVxdWVzdCwgdXJsb3BlbgppbXBvcnQgcmVxdWVzdHMKaW1wb3J0IHBhbmRhcyBhcyBwZAppbXBvcnQgdjNpb19mcmFtZXMgYXMgdjNmCmZyb20gdW5pY29kZWRhdGEgaW1wb3J0IG5vcm1hbGl6ZQpmcm9tIGRhdGV0aW1lIGltcG9ydCBkYXRldGltZQppbXBvcnQgcmUKaW1wb3J0IG9zCmltcG9ydCBtbHJ1bi5mZWF0dXJlX3N0b3JlIGFzIGZzCmltcG9ydCBtbHJ1bgoKZGVmIGdldF9zdG9ja19uZXdzX3BhZ2Uoc3RvY2tfc3RyaW5nKToKICAgIHJlcXVlc3QgPSBSZXF1ZXN0KCdodHRwczovL3d3dy5pbnZlc3RpbmcuY29tL2VxdWl0aWVzLycgKyBzdG9ja19zdHJpbmcgKyAnLW5ld3MnLCBoZWFkZXJzPXsiVXNlci1BZ2VudCI6ICJNb3ppbGxhLzUuMCJ9KQogICAgY29udGVudCA9IHVybG9wZW4ocmVxdWVzdCkucmVhZCgpCiAgICByZXR1cm4gYnMoY29udGVudCwgJ2h0bWwucGFyc2VyJykKCmRlZiBnZXRfaW50ZXJuYWxfYXJ0aWNsZV9saW5rcyhwYWdlKToKICAgIG5ld3MgPSBwYWdlLmZpbmRfYWxsKCdkaXYnLCBhdHRycz17J2NsYXNzJzogJ21lZGl1bVRpdGxlMSd9KVsxXQogICAgYXJ0aWNsZXMgPSBuZXdzLmZpbmRfYWxsKCdhcnRpY2xlJywgYXR0cnM9eydjbGFzcyc6ICdqcy1hcnRpY2xlLWl0ZW0gYXJ0aWNsZUl0ZW0nfSkKICAgIHJldHVybiBbJ2h0dHBzOi8vd3d3LmludmVzdGluZy5jb20nICsgYS5maW5kKCdhJykuYXR0cnNbJ2hyZWYnXSBmb3IgYSBpbiBhcnRpY2xlc10KCmRlZiBnZXRfYXJ0aWNsZV9wYWdlKGFydGljbGVfbGluayk6CiAgICByZXF1ZXN0ID0gUmVxdWVzdChhcnRpY2xlX2xpbmssIGhlYWRlcnM9eyJVc2VyLUFnZW50IjogIk1vemlsbGEvNS4wIn0pCiAgICBjb250ZW50ID0gdXJsb3BlbihyZXF1ZXN0KS5yZWFkKCkKICAgIHJldHVybiBicyhjb250ZW50LCAnaHRtbC5wYXJzZXInKQoKZGVmIGNsZWFuX3BhcmFncmFwaChwYXJhZ3JhcGgpOgogICAgcGFyYWdyYXBoID0gcmUuc3ViKHInXChodHRwXFMrJywgJycsIHBhcmFncmFwaCkKICAgIHBhcmFncmFwaCA9IHJlLnN1YihyJ1woW0EtWl0rOltBLVpdK1wpJywgJycsIHBhcmFncmFwaCkKICAgIHBhcmFncmFwaCA9IHJlLnN1YihyJ1tcblx0XHNcJ10nLCAnICcsIHBhcmFncmFwaCkKICAgIHJldHVybiBub3JtYWxpemUoJ05GS0QnLCBwYXJhZ3JhcGgpICAgIAoKZGVmIGV4dHJhY3RfdGV4dChhcnRpY2xlX3BhZ2UpOgogICAgdGV4dF90YWcgPSBhcnRpY2xlX3BhZ2UuZmluZCgnZGl2JywgYXR0cnM9eydjbGFzcyc6ICdXWVNJV1lHIGFydGljbGVQYWdlJ30pCiAgICBwYXJhZ3JhcGhzID0gdGV4dF90YWcuZmluZF9hbGwoJ3AnKQogICAgdGV4dCA9ICdcbicuam9pbihbY2xlYW5fcGFyYWdyYXBoKHAuZ2V0X3RleHQoKSkgZm9yIHAgaW4gcGFyYWdyYXBoc1s6LTFdXSkKICAgIHJldHVybiB0ZXh0CgppbXBvcnQganNvbgpkZWYgZ2V0X3B1Ymxpc2hfdGltZShhcnRpY2xlKToKICAgIHRhZyA9IGFydGljbGUuZmluZCgnc2NyaXB0Jyx7InR5cGUiIDogImFwcGxpY2F0aW9uL2xkK2pzb24ifSkuY29udGVudHNbMF0KICAgIHRhZ19kaWN0ID0ganNvbi5sb2FkcyhzdHIodGFnKSkKICAgIGRhdGVNb2RpZmllZCA9IHRhZ19kaWN0WyJkYXRlTW9kaWZpZWQiXQogICAgcmV0dXJuIGRhdGV0aW1lLnN0cmZ0aW1lKGRhdGV0aW1lLnN0cnB0aW1lKGRhdGVNb2RpZmllZCwgJyVZLSVtLSVkICVIOiVNOiVTJyksICclWS0lbS0lZCAlSDolTTolUycpCgpkZWYgZ2V0X3Njb3JlKHBhcmFncmFwaF9zY29yZXMpOgogICAgcmV0dXJuIHN1bShbc2NvcmUgLSAxIGZvciBzY29yZSBpbiBwYXJhZ3JhcGhfc2NvcmVzWydvdXRwdXRzJ11dKSAvIGxlbihwYXJhZ3JhcGhfc2NvcmVzKQoKZGVmIGdldF9hcnRpY2xlX3Njb3Jlcyhjb250ZXh0LCBhcnRpY2xlcywgZW5kcG9pbnQpOgogICAgc2NvcmVzID0gW10gCiAgICBmb3IgaSwgYXJ0aWNsZSBpbiBlbnVtZXJhdGUoYXJ0aWNsZXMpOgogICAgICAgIGNvbnRleHQubG9nZ2VyLmluZm8oZidnZXR0aW5nIHNjb3JlIGZvciBhcnRpY2xlIHtpICsgMX1cXHtsZW4oYXJ0aWNsZXMpfScpCiAgICAgICAgZXZlbnRfZGF0YSA9IHsnaW5wdXRzJzogYXJ0aWNsZS5zcGxpdCgnXG4nKX0KICAgICAgICByZXNwID0gcmVxdWVzdHMucHV0KGVuZHBvaW50LCBqc29uPWpzb24uZHVtcHMoZXZlbnRfZGF0YSkpCiAgICAgICAgc2NvcmVzLmFwcGVuZChnZXRfc2NvcmUoanNvbi5sb2FkcyhyZXNwLnRleHQpKSkKICAgIHJldHVybiBzY29yZXMKCmRlZiBjb25zdHJ1Y3RfZGF0YWZyYW1lKHNlbnRpbWVudHMsIGl0ZW1zLHRpbWVzKToKICAgIHRpY2tlcnMgPSBbeFswXSBmb3IgeCBpbiBpdGVtc10KICAgIHN0b2NrX3NlbnQgPSBwZC5EYXRhRnJhbWUoeyJzeW1ib2wiOiB0aWNrZXJzLCAic2VudGltZW50Ijogc2VudGltZW50cywgImxhc3RfcmVhY3Rpb24iOiB0aW1lc30pCiAgICByZXR1cm4gc3RvY2tfc2VudAoKZGVmIGluaXRfY29udGV4dChjb250ZXh0KToKICAgIGNvbnRleHQubG9nZ2VyLmluZm8oImluaXQgbmV3cyByZWFkZXIgY29udGV4dCIpCiAgICBzZXRhdHRyKGNvbnRleHQsICdQUk9KRUNUX05BTUUnLCBvcy5nZXRlbnYoJ1BST0pFQ1RfTkFNRScsICdzdG9ja3MtJyArIG9zLmdldGVudignVjNJT19VU0VSTkFNRScpKSkKICAgIG1scnVuLnNldF9lbnZpcm9ubWVudChwcm9qZWN0ID0gY29udGV4dC5QUk9KRUNUX05BTUUpCiAgICAKICAgIHN0b2Nrc19zZW50X3NldCA9IGZzLkZlYXR1cmVTZXQoIm5ld3MiLCBlbnRpdGllcz1bZnMuRW50aXR5KCJzeW1ib2wiKV0pCiAgICBzZXRhdHRyKGNvbnRleHQsICdzdG9ja19mZWF0dXJlX3NldCcsIHN0b2Nrc19zZW50X3NldCkKICAgIAogICAgY29udGV4dC5zdG9ja19mZWF0dXJlX3NldC5hZGRfYWdncmVnYXRpb24oInNlbnRpbWVudHMiLCJzZW50aW1lbnQiLFsibWluIiwibWF4Il0sWyIxaCJdLCIxMG0iKQogICAgCiAgICBuZXdzX2R1bW15ID0gcGQuRGF0YUZyYW1lKHsic3ltYm9sIjpbJ0dPT0dMJywnTVNGVCcsJ0FNWk4nLCdBQVBMJywnSU5UQyddLCJzZW50aW1lbnQiOlswLDAsMCwwLDBdLCJsYXN0X3JlYWN0aW9uIjpbMCwwLDAsMCwwXX0pCiAgICBmcy5pbmdlc3QoY29udGV4dC5zdG9ja19mZWF0dXJlX3NldCwgbmV3c19kdW1teSwgaW5mZXJfb3B0aW9ucz1mcy5JbmZlck9wdGlvbnMuZGVmYXVsdCgpKQogICAgCiAgICB2M2lvX2ZyYW1lc2QgPSBvcy5nZXRlbnYoJ1YzSU9fRlJBTUVTRCcsICdmcmFtZXNkOjgwODEnKQogICAgdG9rZW4gPSBvcy5nZXRlbnYoJ1RPS0VOJywgJycpCiAgICBjbGllbnQgPSB2M2YuQ2xpZW50KHYzaW9fZnJhbWVzZCwgY29udGFpbmVyPW9zLmdldGVudignVjNJT19DT05UQUlORVInLCAndXNlcnMnKSwgdG9rZW49dG9rZW4pCiAgICBzZXRhdHRyKGNvbnRleHQsICd2M2MnLCBjbGllbnQpCgogICAgc2V0YXR0cihjb250ZXh0LCAnc3RvY2tzX3N0cmVhbScsIG9zLmdldGVudignU1RPQ0tTX1NUUkVBTScsIG9zLmdldGVudignVjNJT19VU0VSTkFNRScpICsgJy9zdG9ja3Mvc3RvY2tzX3N0cmVhbScpKQogICAgY29udGV4dC52M2MuY3JlYXRlKGJhY2tlbmQ9J3N0cmVhbScsIHRhYmxlPWNvbnRleHQuc3RvY2tzX3N0cmVhbSwgaWZfZXhpc3RzPTEpCgogICAgc2V0YXR0cihjb250ZXh0LCAnc3RvY2tzX3RzZGInLCBvcy5nZXRlbnYoJ1NUT0NLU19UU0RCX1RBQkxFJywgb3MuZ2V0ZW52KCdWM0lPX1VTRVJOQU1FJykgKyAnL3N0b2Nrcy9zdG9ja3NfdHNkYicpKQogICAgY29udGV4dC52M2MuY3JlYXRlKGJhY2tlbmQ9J3RzZGInLCB0YWJsZT1jb250ZXh0LnN0b2Nrc190c2RiLCByYXRlPScxL3MnLCBpZl9leGlzdHM9MSkKCiAgICBzZXRhdHRyKGNvbnRleHQsICdzZW50aW1lbnRfbW9kZWxfZW5kcG9pbnQnLAogICAgICAgICAgICBvcy5nZXRlbnYoJ1NFTlRJTUVOVF9NT0RFTF9FTkRQT0lOVCcsICcnKSkgIyBpbiB0aGUgJycgc2hvdWxkIGJlIHRoZSBtb2RlbCBlbmRwb2ludAogICAgY29udGV4dC5sb2dnZXIuaW5mbyhmInNldCBzZW50aW1lbnRfbW9kZWxfZW5kcG9pbnQge2NvbnRleHQuc2VudGltZW50X21vZGVsX2VuZHBvaW50fSIpCiAgICBzeW1fdG9fdXJsID0geydHT09HTCc6ICdnb29nbGUtaW5jJywgJ01TRlQnOiAnbWljcm9zb2Z0LWNvcnAnLCAnQU1aTic6ICdhbWF6b24tY29tLWluYycsCiAgICAgICAgICAgICAgICAgICdBQVBMJzogJ2FwcGxlLWNvbXB1dGVyLWluYycsICdJTlRDJyA6ICdpbnRlbC1jb3JwJ30KICAgIHNldGF0dHIoY29udGV4dCwgJ3N5bV90b191cmwnLCBzeW1fdG9fdXJsKQogICAgc2V0YXR0cihjb250ZXh0LCAnc3RvY2tzX2t2Jywgb3MuZ2V0ZW52KCdTVE9DS1NfS1YnLCBvcy5nZXRlbnYoJ1YzSU9fVVNFUk5BTUUnKSArICcvc3RvY2tzL3N0b2Nrc19rdicpKQogICAgY29udGV4dC5sb2dnZXIuaW5mbygnZW5kIGluaXQgY29udGV4dCcpCgpkZWYgaGFuZGxlcihjb250ZXh0LCBldmVudCk6CiAgICBjb250ZXh0LmxvZ2dlci5pbmZvKGYnR2V0dGluZyBuZXdzIGFib3V0IHtjb250ZXh0LnN5bV90b191cmx9JykKICAgIHN5bXMgPSBbXQogICAgY29udGVudHMgPSBbXQogICAgbGlua3MgPSBbXQogICAgdGltZXMgPSBbXQogICAgc2VudGltZW50cyA9IFtdCiAgICBsYXN0X3RpY2tlcl9zZW50aW1lbnQgPSBbXQogICAgbGFzdF90aWNrZXJfdGltZSA9IFtdCiAgICBmb3Igc3ltLCB1cmxfc3RyaW5nIGluIGNvbnRleHQuc3ltX3RvX3VybC5pdGVtcygpOgogICAgICAgIGNvbnRleHQubG9nZ2VyLmluZm8oZidHZXR0aW5nIG5ld3MgYWJvdXQge3N5bX0nKQogICAgICAgIG5ld3NfcGFnZSA9IGdldF9zdG9ja19uZXdzX3BhZ2UodXJsX3N0cmluZykKICAgICAgICBhcnRpY2xlX2xpbmtzID0gZ2V0X2ludGVybmFsX2FydGljbGVfbGlua3MobmV3c19wYWdlKQogICAgICAgIGFydGljbGVfcGFnZXMgPSBbZ2V0X2FydGljbGVfcGFnZShsaW5rKSBmb3IgbGluayBpbiBhcnRpY2xlX2xpbmtzXQogICAgICAgIGFydGljbGVzID0gW2V4dHJhY3RfdGV4dChhcnRpY2xlX3BhZ2UpIGZvciBhcnRpY2xlX3BhZ2UgaW4gYXJ0aWNsZV9wYWdlc10KICAgICAgICBjdXJyX3NlbnRpbWVudHMgPSBnZXRfYXJ0aWNsZV9zY29yZXMoY29udGV4dCwgYXJ0aWNsZXMsIGNvbnRleHQuc2VudGltZW50X21vZGVsX2VuZHBvaW50KQogICAgICAgIGN1cnJfdGltZXMgPSBbZ2V0X3B1Ymxpc2hfdGltZShhcnRpY2xlX3BhZ2UpIGZvciBhcnRpY2xlX3BhZ2UgaW4gYXJ0aWNsZV9wYWdlc10KCiAgICAgICAgc2VudGltZW50cyArPSBjdXJyX3NlbnRpbWVudHMKICAgICAgICB0aW1lcyArPSBjdXJyX3RpbWVzCiAgICAgICAgZm9yIGFydGljbGUsIGxpbmssIHNlbnRpbWVudCwgdGltZSBpbiB6aXAoYXJ0aWNsZXMsIGFydGljbGVfbGlua3MsIGN1cnJfc2VudGltZW50cywgY3Vycl90aW1lcyk6CiAgICAgICAgICAgIHJlY29yZCA9IHsKICAgICAgICAgICAgICAgICdjb250ZW50JzogYXJ0aWNsZSwKICAgICAgICAgICAgICAgICd0aW1lJzogdGltZSwKICAgICAgICAgICAgICAgICdzeW1ib2wnOiBzeW0sCiAgICAgICAgICAgICAgICAnbGluayc6IGxpbmssCiAgICAgICAgICAgICAgICAnc2VudGltZW50Jzogc2VudGltZW50CiAgICAgICAgICAgIH0KICAgICAgICAgICAgY29udGV4dC52M2MuZXhlY3V0ZSgnc3RyZWFtJywgY29udGV4dC5zdG9ja3Nfc3RyZWFtLCAncHV0JywgYXJncz17J2RhdGEnOiBqc29uLmR1bXBzKHJlY29yZCl9KQoKICAgICAgICAgICAgc3ltcy5hcHBlbmQoc3ltKQogICAgICAgICAgICBjb250ZW50cy5hcHBlbmQoYXJ0aWNsZSkKICAgICAgICAgICAgbGlua3MuYXBwZW5kKGxpbmspCiAgICAgICAgY29udGV4dC52M2MuZXhlY3V0ZSgna3YnLCBjb250ZXh0LnN0b2Nrc19rdiwgY29tbWFuZD0ndXBkYXRlJywgYXJncz17J2tleSc6IHN5bSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZXhwcmVzc2lvbic6IGYiU0VUIHNlbnRpbWVudD0ne3NlbnRpbWVudHNbLTFdfSc7bGFzdF9yZWFjdGlvbj0ne3RpbWVzWy0xXX0nIn0pCiAgICAgICAgbGFzdF90aWNrZXJfc2VudGltZW50LmFwcGVuZChzZW50aW1lbnRzWy0xXSkKICAgICAgICBsYXN0X3RpY2tlcl90aW1lLmFwcGVuZCh0aW1lc1stMV0pCiAgICAgICAgCiAgICBzdG9ja19zZW50ID0gY29uc3RydWN0X2RhdGFmcmFtZShsYXN0X3RpY2tlcl9zZW50aW1lbnQsIGNvbnRleHQuc3ltX3RvX3VybC5pdGVtcygpLGxhc3RfdGlja2VyX3RpbWUpCiAgICBjb250ZXh0LmxvZ2dlci5pbmZvKGYnSW5nZXN0aW5nIG5ldyBpbmZvcm1hdGlvbiB0byBmZWF0dXJlIHN0b3JlJykKICAgIGZzLmluZ2VzdChjb250ZXh0LnN0b2NrX2ZlYXR1cmVfc2V0LCBzdG9ja19zZW50LCBpbmZlcl9vcHRpb25zPWZzLkluZmVyT3B0aW9ucy5kZWZhdWx0KCkpCgogICAgaWYgbGVuKHNlbnRpbWVudHMpID4gMDoKICAgICAgICBkZiA9IHBkLkRhdGFGcmFtZS5mcm9tX2RpY3QoeydzZW50aW1lbnQnOiBzZW50aW1lbnRzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3RpbWUnOiB0aW1lcywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdzeW1ib2wnOiBzeW1zfSkKICAgICAgICBkZiA9IGRmLnNldF9pbmRleChbJ3RpbWUnLCAnc3ltYm9sJ10pCiAgICAgICAgZGYuaW5kZXggPSBkZi5pbmRleC5zZXRfbGV2ZWxzKFtwZC50b19kYXRldGltZShkZi5pbmRleC5sZXZlbHNbMF0pLCBkZi5pbmRleC5sZXZlbHNbMV1dKQogICAgICAgIGRmID0gZGYuc29ydF9pbmRleChsZXZlbD0wLCBheGlzPTApCiAgICAgICAgY29udGV4dC52M2Mud3JpdGUoYmFja2VuZD0ndHNkYicsIHRhYmxlPWNvbnRleHQuc3RvY2tzX3RzZGIsIGRmcz1kZikKCg==",
        "noBaseImagesPull": true,
        "baseImage": "mlrun/ml-models:0.6.5-rc12",
        "commands": [
          "pip install beautifulsoup4",
          "pip install pandas",
          "pip install v3io_frames"
        ],
        "offline": true,
        "codeEntryType": "sourceCode",
        "timestamp": 1625662004
      },
      "platform": {},
      "serviceType": "NodePort",
      "securityContext": {},
      "scaleToZero": {
        "scaleResources": [
          {
            "metricName": "nuclio_processor_handled_events_total",
            "windowSize": "10m",
            "threshold": 0
          }
        ]
      },
      "eventTimeout": ""
    },
    "status": {
      "state": "unhealthy",
      "message": "\nError - context deadline exceeded\n    .../platform/kube/controller/nucliofunction.go:163\n\nCall stack:\nFailed to wait for function resources to be available\n    .../platform/kube/controller/nucliofunction.go:163\n"
    }
  },
  "stocks-admin-sentiment-analysis-serving": {
    "metadata": {
      "name": "stocks-admin-sentiment-analysis-serving",
      "namespace": "default-tenant",
      "labels": {
        "mlrun/class": "serving",
        "nuclio.io/project-name": "stocks-admin"
      },
      "annotations": {
        "nuclio.io/generated_by": "function generated from /Users/aviasulin/PycharmProjects/mlrun/functions/sentiment_analysis_serving/sentiment_analysis_serving.py"
      },
      "resourceVersion": "37858346"
    },
    "spec": {
      "handler": "sentiment_analysis_serving:handler",
      "runtime": "python:3.6",
      "env": [
        {
          "name": "V3IO_API",
          "value": "v3io-webapi.default-tenant.svc:8081"
        },
        {
          "name": "V3IO_USERNAME",
          "value": "admin"
        },
        {
          "name": "V3IO_ACCESS_KEY",
          "value": "b7242e47-a051-4ec3-8384-5f99a26c1451"
        },
        {
          "name": "SERVING_MODEL_bert_classifier_v1",
          "value": "/User/demos/stock-analysis/models/model.pt"
        },
        {
          "name": "MLRUN_DEFAULT_PROJECT",
          "value": "stocks-admin"
        },
        {
          "name": "MLRUN_DBPATH",
          "value": "http://mlrun-api:8080"
        },
        {
          "name": "MLRUN_NAMESPACE",
          "value": "default-tenant"
        },
        {
          "name": "SERVING_SPEC_ENV",
          "value": "{\"function_uri\": \"stocks-admin/sentiment-analysis-serving\", \"version\": \"v2\", \"parameters\": {}, \"graph\": {\"kind\": \"router\", \"routes\": {\"model1\": {\"kind\": \"task\", \"class_name\": \"SentimentClassifierServing\", \"class_args\": {\"model_path\": \"/User/demos/stock-analysis/models/model.pt\"}}}}, \"load_mode\": null, \"functions\": {}, \"graph_initializer\": null, \"error_stream\": null, \"track_models\": null}"
        }
      ],
      "resources": {},
      "imageHash": "1625661927977420534",
      "minReplicas": 1,
      "maxReplicas": 1,
      "triggers": {
        "default-http": {
          "class": "",
          "kind": "http",
          "name": "default-http",
          "maxWorkers": 1,
          "attributes": {
            "serviceType": "NodePort"
          }
        }
      },
      "volumes": [
        {
          "volume": {
            "name": "v3io",
            "flexVolume": {
              "driver": "v3io/fuse",
              "options": {
                "accessKey": "b7242e47-a051-4ec3-8384-5f99a26c1451"
              }
            }
          },
          "volumeMount": {
            "name": "v3io",
            "mountPath": "/v3io"
          }
        },
        {
          "volume": {
            "name": "v3io",
            "flexVolume": {
              "driver": "v3io/fuse",
              "options": {
                "accessKey": "b7242e47-a051-4ec3-8384-5f99a26c1451"
              }
            }
          },
          "volumeMount": {
            "name": "v3io",
            "mountPath": "/User",
            "subPath": "users/admin"
          }
        }
      ],
      "version": -1,
      "alias": "latest",
      "build": {
        "functionSourceCode": "aW1wb3J0IHRvcmNoCmltcG9ydCB0b3JjaC5ubiBhcyBubgpmcm9tIHRyYW5zZm9ybWVycyBpbXBvcnQgQmVydE1vZGVsLCBCZXJ0VG9rZW5pemVyCmltcG9ydCBtbHJ1bgpmcm9tIG1scnVuLnJ1bnRpbWVzIGltcG9ydCBudWNsaW9faW5pdF9ob29rCgpQUkVUUkFJTkVEX01PREVMID0gJ2JlcnQtYmFzZS1jYXNlZCcKdG9rZW5pemVyID0gQmVydFRva2VuaXplci5mcm9tX3ByZXRyYWluZWQoJ2JlcnQtYmFzZS1jYXNlZCcpCgoKY2xhc3MgQmVydFNlbnRpbWVudENsYXNzaWZpZXIobm4uTW9kdWxlKToKICAgIGRlZiBfX2luaXRfXyhzZWxmLCBuX2NsYXNzZXMpOgogICAgICAgIHN1cGVyKEJlcnRTZW50aW1lbnRDbGFzc2lmaWVyLCBzZWxmKS5fX2luaXRfXygpCiAgICAgICAgc2VsZi5iZXJ0ID0gQmVydE1vZGVsLmZyb21fcHJldHJhaW5lZChQUkVUUkFJTkVEX01PREVMKQogICAgICAgIHNlbGYuZHJvcG91dCA9IG5uLkRyb3BvdXQocD0wLjIpCiAgICAgICAgc2VsZi5vdXRfbGluZWFyID0gbm4uTGluZWFyKHNlbGYuYmVydC5jb25maWcuaGlkZGVuX3NpemUsIG5fY2xhc3NlcykKICAgICAgICBzZWxmLnNvZnRtYXggPSBubi5Tb2Z0bWF4KGRpbT0xKQoKICAgIGRlZiBmb3J3YXJkKHNlbGYsIGlucHV0X2lkcywgYXR0ZW50aW9uX21hc2spOgogICAgICAgIF8sIHBvb2xlZF9vdXQgPSBzZWxmLmJlcnQoCiAgICAgICAgICAgIGlucHV0X2lkcz1pbnB1dF9pZHMsCiAgICAgICAgICAgIGF0dGVudGlvbl9tYXNrPWF0dGVudGlvbl9tYXNrCiAgICAgICAgKQogICAgICAgIG91dCA9IHNlbGYuZHJvcG91dChwb29sZWRfb3V0KQogICAgICAgIG91dCA9IHNlbGYub3V0X2xpbmVhcihvdXQpCiAgICAgICAgcmV0dXJuIHNlbGYuc29mdG1heChvdXQpCgoKY2xhc3MgU2VudGltZW50Q2xhc3NpZmllclNlcnZpbmcobWxydW4uc2VydmluZy5WMk1vZGVsU2VydmVyKToKICAgIGRlZiBsb2FkKHNlbGYpOgogICAgICAgICIiIgogICAgICAgIGxvYWQgYmVydCBtb2RlbCBpbnRvIGNsYXNzCiAgICAgICAgIiIiCiAgICAgICAgbW9kZWxfZmlsZSwgXyA9IHNlbGYuZ2V0X21vZGVsKCcucHQnKQogICAgICAgIGRldmljZSA9IHRvcmNoLmRldmljZSgnY3VkYTowJykgaWYgdG9yY2guY3VkYS5pc19hdmFpbGFibGUoKSBlbHNlIHRvcmNoLmRldmljZSgnY3B1JykKICAgICAgICBtb2RlbCA9IEJlcnRTZW50aW1lbnRDbGFzc2lmaWVyKG5fY2xhc3Nlcz0zKQogICAgICAgIG1vZGVsLmxvYWRfc3RhdGVfZGljdCh0b3JjaC5sb2FkKG1vZGVsX2ZpbGUsIG1hcF9sb2NhdGlvbj1kZXZpY2UpKQogICAgICAgIG1vZGVsLmV2YWwoKQogICAgICAgIHNlbGYubW9kZWwgPSBtb2RlbAoKICAgIGRlZiBwcmVkaWN0KHNlbGYsIGJvZHkpOgogICAgICAgICIiIgogICAgICAgIHByZWRpY3QgZnVuY3Rpb24KICAgICAgICA6cGFyYW0gYm9keTogc2V0IG9mIGlucHV0cyBmb3IgYmVydCBtb2RlbCB0byBwcmVkaWN0IGZyb20KICAgICAgICAiIiIKICAgICAgICB0cnk6CiAgICAgICAgICAgIGluc3RhbmNlcyA9IGJvZHlbJ2lucHV0cyddCiAgICAgICAgICAgIGVuYyA9IHRva2VuaXplci5iYXRjaF9lbmNvZGVfcGx1cyhpbnN0YW5jZXMsIHJldHVybl90ZW5zb3JzPSdwdCcsIHBhZF90b19tYXhfbGVuZ3RoPVRydWUpCiAgICAgICAgICAgIG91dHB1dHMgPSBzZWxmLm1vZGVsKGlucHV0X2lkcz1lbmNbJ2lucHV0X2lkcyddLCBhdHRlbnRpb25fbWFzaz1lbmNbJ2F0dGVudGlvbl9tYXNrJ10pCiAgICAgICAgICAgIF8sIHByZWRpY3RzID0gdG9yY2gubWF4KG91dHB1dHMsIGRpbT0xKQogICAgICAgICAgICByZXR1cm4gcHJlZGljdHMuY3B1KCkudG9saXN0KCkKICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbigiRmFpbGVkIHRvIHByZWRpY3QgJXMiICUgZSkKCgpkZWYgaW5pdF9jb250ZXh0KGNvbnRleHQpOgogICAgbnVjbGlvX2luaXRfaG9vayhjb250ZXh0LCBnbG9iYWxzKCksICdzZXJ2aW5nX3YyJykKCgpkZWYgaGFuZGxlcihjb250ZXh0LCBldmVudCk6CiAgICByZXR1cm4gY29udGV4dC5tbHJ1bl9oYW5kbGVyKGNvbnRleHQsIGV2ZW50KQoKZnJvbSBtbHJ1bi5ydW50aW1lcyBpbXBvcnQgbnVjbGlvX2luaXRfaG9vawpkZWYgaW5pdF9jb250ZXh0KGNvbnRleHQpOgogICAgbnVjbGlvX2luaXRfaG9vayhjb250ZXh0LCBnbG9iYWxzKCksICdzZXJ2aW5nX3YyJykKCmRlZiBoYW5kbGVyKGNvbnRleHQsIGV2ZW50KToKICAgIHJldHVybiBjb250ZXh0Lm1scnVuX2hhbmRsZXIoY29udGV4dCwgZXZlbnQpCg==",
        "noBaseImagesPull": true,
        "baseImage": "mlrun/ml-models:0.6.5-rc12",
        "commands": [
          "python -m pip install transformers==3.0.2"
        ],
        "offline": true,
        "codeEntryType": "sourceCode",
        "timestamp": 1625661944
      },
      "platform": {},
      "readinessTimeoutSeconds": 500,
      "serviceType": "NodePort",
      "securityContext": {},
      "scaleToZero": {
        "scaleResources": [
          {
            "metricName": "nuclio_processor_handled_events_total",
            "windowSize": "10m",
            "threshold": 0
          }
        ]
      },
      "eventTimeout": ""
    },
    "status": {
      "state": "ready",
      "httpPort": 32089,
      "scaleToZero": {
        "lastScaleEvent": "resourceUpdated",
        "lastScaleEventTime": "2021-07-07T12:46:12.088835978Z"
      }
    }
  },
  "stocks-admin-stocks-reader": {
    "metadata": {
      "name": "stocks-admin-stocks-reader",
      "namespace": "default-tenant",
      "labels": {
        "mlrun/class": "remote",
        "nuclio.io/project-name": "stocks-admin"
      },
      "annotations": {
        "nuclio.io/generated_by": "function generated from /User/demos/stock-analysis/code/01-read-stocks.ipynb"
      },
      "resourceVersion": "37855249"
    },
    "spec": {
      "handler": "01-read-stocks:handler",
      "runtime": "python:3.6",
      "env": [
        {
          "name": "V3IO_ACCESS_KEY",
          "value": "b7242e47-a051-4ec3-8384-5f99a26c1451"
        },
        {
          "name": "V3IO_USERNAME",
          "value": "admin"
        },
        {
          "name": "V3IO_API",
          "value": "v3io-webapi.default-tenant.svc:8081"
        },
        {
          "name": "V3IO_FRAMESD",
          "value": "framesd:8081"
        },
        {
          "name": "STOCK_LIST",
          "value": "[\"GOOGL\", \"MSFT\", \"AMZN\", \"AAPL\", \"INTC\"]"
        },
        {
          "name": "V3IO_CONTAINER",
          "value": "users"
        },
        {
          "name": "STOCKS_TSDB_TABLE",
          "value": "admin/stocks/stocks_tsdb"
        },
        {
          "name": "STOCKS_KV_TABLE",
          "value": "admin/stocks/stocks_kv"
        },
        {
          "name": "EXPRESSION_TEMPLATE",
          "value": "symbol='{symbol}';price={price};volume={volume};last_updated='{last_updated}'"
        },
        {
          "name": "PROJECT_NAME",
          "value": "stocks-admin"
        },
        {
          "name": "MLRUN_DEFAULT_PROJECT",
          "value": "stocks-admin"
        },
        {
          "name": "MLRUN_DBPATH",
          "value": "http://mlrun-api:8080"
        },
        {
          "name": "MLRUN_NAMESPACE",
          "value": "default-tenant"
        }
      ],
      "resources": {},
      "imageHash": "1630301801994786835",
      "minReplicas": 1,
      "maxReplicas": 1,
      "triggers": {
        "cron": {
          "class": "",
          "kind": "cron",
          "name": "cron",
          "attributes": {
            "interval": "300s"
          }
        },
        "default-http": {
          "class": "",
          "kind": "http",
          "name": "default-http",
          "maxWorkers": 1,
          "attributes": {
            "serviceType": "NodePort"
          }
        }
      },
      "volumes": [
        {
          "volume": {
            "name": "v3io",
            "flexVolume": {
              "driver": "v3io/fuse",
              "options": {
                "accessKey": "b7242e47-a051-4ec3-8384-5f99a26c1451"
              }
            }
          },
          "volumeMount": {
            "name": "v3io",
            "mountPath": "/v3io"
          }
        },
        {
          "volume": {
            "name": "v3io",
            "flexVolume": {
              "driver": "v3io/fuse",
              "options": {
                "accessKey": "b7242e47-a051-4ec3-8384-5f99a26c1451"
              }
            }
          },
          "volumeMount": {
            "name": "v3io",
            "mountPath": "/User",
            "subPath": "users/admin"
          }
        }
      ],
      "version": -1,
      "alias": "latest",
      "build": {
        "functionSourceCode": "IyBHZW5lcmF0ZWQgYnkgbnVjbGlvLmV4cG9ydC5OdWNsaW9FeHBvcnRlcgoKaW1wb3J0IHlmaW5hbmNlIGFzIHlmCmltcG9ydCBvcwppbXBvcnQgcGFuZGFzIGFzIHBkCmltcG9ydCB2M2lvX2ZyYW1lcyBhcyB2M2YKaW1wb3J0IGFzdAppbXBvcnQgbWxydW4uZmVhdHVyZV9zdG9yZSBhcyBmcwppbXBvcnQgbWxydW4KCmRlZiBjb250cnVjdF9kYXRhZnJhbWUoYWxsX3JlY29yZHMpOgogICAgdGVtcF9kZiA9IHBkLkRhdGFGcmFtZShhbGxfcmVjb3JkcykKICAgIHRlbXBfZGYubGFzdF91cGRhdGVkID0gdGVtcF9kZi5sYXN0X3VwZGF0ZWQuYXN0eXBlKCJzdHIiKQogICAgcmV0dXJuIHRlbXBfZGYKCmRlZiB1cGRhdGVfdGlja2Vycyhjb250ZXh0LCBwZXJkaW9kLCBpbnRlcnZhbCk6CiAgICBhbGxfcmVjb3Jkcz1bXQogICAgc3RvY2tzX2RmID0gcGQuRGF0YUZyYW1lKCkKICAgIGZvciBzeW0gaW4gY29udGV4dC5zdG9ja19zeW1zOgogICAgICAgIGhpc3QgPSB5Zi5UaWNrZXIoc3ltKS5oaXN0b3J5KHBlcmlvZD1wZXJkaW9kLCBpbnRlcnZhbD0nMW0nKQogICAgICAgIHRpbWUgPSBoaXN0LmluZGV4W2xlbihoaXN0KSAtIDFdCiAgICAgICAgcmVjb3JkID0gaGlzdC5sb2NbdGltZV0KICAgICAgICBsYXN0ID0gY29udGV4dC5sYXN0X3RyYWRlX3RpbWVzLmdldChzeW0pCiAgICAgICAgY29udGV4dC5sb2dnZXIuaW5mbyhmJ1JlY2VpdmVkIHtzeW19IGRhdGEgZnJvbSB5ZmluYW5jZSwgaW5jbHVkaW5nIHtsZW4oaGlzdCl9IGNhbmRsZXMgZW5kaW5nIGF0IHtsYXN0fScpCiAgICAgICAgaWYgbm90IGxhc3Qgb3IgdGltZSA+IGxhc3Q6CiAgICAgICAgICAgIAogICAgICAgICAgICBzdG9jayA9IHsnc3ltYm9sJzogc3ltLCAncHJpY2UnOiByZWNvcmRbJ0Nsb3NlJ10sICd2b2x1bWUnOiByZWNvcmRbJ1ZvbHVtZSddLCAnbGFzdF91cGRhdGVkJzogdGltZX0KICAgICAgICAgICAgYWxsX3JlY29yZHMuYXBwZW5kKHN0b2NrKQogICAgICAgICAgICBleHByID0gY29udGV4dC5leHByX3RlbXBsYXRlLmZvcm1hdCgqKnN0b2NrKQogICAgICAgICAgICBjb250ZXh0LmxvZ2dlci5kZWJ1Z193aXRoKCd1cGRhdGUgZXhwcmVzc2lvbicsIHN5bWJvbD1zeW0sIGV4cHI9ZXhwcikKICAgICAgICAgICAgY29udGV4dC52M2MuZXhlY3V0ZSgna3YnLCBjb250ZXh0LnN0b2Nrc19rdl90YWJsZSwgJ3VwZGF0ZScsIGFyZ3M9eydrZXknOiBzeW0sICdleHByZXNzaW9uJzogZXhwcn0pCiAgICAgICAgIAogICAgICAgICAgICBjb250ZXh0LmxvZ2dlci5pbmZvKGYnVXBkYXRlZCByZWNvcmRzIGZyb20ge2xhc3R9IHRvIHt0aW1lfScpCiAgICAgICAgICAgIGNvbnRleHQubGFzdF90cmFkZV90aW1lc1tzeW1dID0gdGltZQogICAgICAgICAgICBoaXN0WydzeW1ib2wnXSA9IHN5bQogICAgICAgICAgICBoaXN0ID0gaGlzdC5yZXNldF9pbmRleCgpCiAgICAgICAgICAgIGhpc3QgPSBoaXN0LnNldF9pbmRleChbJ0RhdGV0aW1lJywgJ3N5bWJvbCddKQogICAgICAgICAgICBoaXN0ID0gaGlzdC5sb2NbOiwgWydDbG9zZScsICdWb2x1bWUnXV0KICAgICAgICAgICAgaGlzdCA9IGhpc3QucmVuYW1lKGNvbHVtbnM9eydDbG9zZSc6ICdwcmljZScsICdWb2x1bWUnOiAndm9sdW1lJ30pCiAgICAgICAgICAgIHN0b2Nrc19kZiA9IHN0b2Nrc19kZi5hcHBlbmQoaGlzdCkKICAgICAgICAgICAgY29udGV4dC5sb2dnZXIuaW5mbyhmJ0FkZGVkIHJlY29yZHMge2hpc3Quc2hhcGVbMF19IHJlY29yZHMgZm9yIHtzeW19IHRvIGhpc3RvcnknKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIGNvbnRleHQubG9nZ2VyLmluZm8oZidObyB1cGRhdGUgd2FzIG1hZGUsIGN1cnJlbnQgVFM6IHtsYXN0fSB2cy4gbmV3IGRhdGEge3RpbWV9JykKICAgIAogICAgY29udGV4dC52M2MuZXhlY3V0ZSgia3YiLHRhYmxlID0gY29udGV4dC5zdG9ja3Nfa3ZfdGFibGUsIGNvbW1hbmQgPSAiaW5mZXIiKQogICAgaWYobGVuKGFsbF9yZWNvcmRzKSAhPSAwKToKICAgICAgICBzdG9ja19pbmZvID0gY29udHJ1Y3RfZGF0YWZyYW1lKGFsbF9yZWNvcmRzKQogICAgICAgIGNvbnRleHQubG9nZ2VyLmluZm8oZiJXcml0aW5nIG5ldyBkYXRhZnJhbWUgd2l0aCBzaGFwZSB7c3RvY2tfaW5mby5zaGFwZX0gdG8gZmVhdHVyZSBzdG9yZSIpCiAgICAgICAgZnMuaW5nZXN0KGNvbnRleHQuc3RvY2tfaW5mb19mZWF0dXJlX3NldCwgc3RvY2tfaW5mbywgaW5mZXJfb3B0aW9ucz1mcy5JbmZlck9wdGlvbnMuZGVmYXVsdCgpKQogICAgICAgIAogICAgaWYgc3RvY2tzX2RmLnNoYXBlWzBdPjA6CiAgICAgICAgc3RvY2tzX2RmID0gc3RvY2tzX2RmLnNvcnRfaW5kZXgobGV2ZWw9MCkKICAgICAgICBjb250ZXh0LmxvZ2dlci5kZWJ1Z193aXRoKCd3cml0aW5nIGRhdGEgdG8gVFNEQicsIHN0b2Nrcz1zdG9ja3NfZGYpCiAgICAgICAgc3RvY2tzX2RmLnRvX2NzdignaGlzdG9yeS5jc3YnKQogICAgICAgIGNvbnRleHQudjNjLndyaXRlKGJhY2tlbmQ9J3RzZGInLCB0YWJsZT1jb250ZXh0LnN0b2Nrc190c2RiX3RhYmxlLCBkZnM9c3RvY2tzX2RmKQoKZGVmIGluaXRfY29udGV4dChjb250ZXh0KToKICAgIGNvbnRleHQubG9nZ2VyLmluZm8oImluaXQgc3RvY2tzIHJlYWRlciBjb250ZXh0IikKICAgIHNldGF0dHIoY29udGV4dCwgJ1BST0pFQ1RfTkFNRScsIG9zLmdldGVudignUFJPSkVDVF9OQU1FJywgJ3N0b2Nrcy0nICsgb3MuZ2V0ZW52KCdWM0lPX1VTRVJOQU1FJykpKQogICAgbWxydW4uc2V0X2Vudmlyb25tZW50KHByb2plY3QgPSBjb250ZXh0LlBST0pFQ1RfTkFNRSkKICAgIHNldGF0dHIoY29udGV4dCwiVjNJT19GUkFNRVNEIiwgb3MuZ2V0ZW52KCJWM0lPX0ZSQU1FU0QiLCdmcmFtZXNkOjgwODEnKSkKICAgIGNsaWVudCA9IHYzZi5DbGllbnQoY29udGV4dC5WM0lPX0ZSQU1FU0QsIGNvbnRhaW5lcj1vcy5nZXRlbnYoJ1YzSU9fQ09OVEFJTkVSJywgJ3VzZXJzJykpCiAgICBzZXRhdHRyKGNvbnRleHQsICd2M2MnLCBjbGllbnQpCiAgICAKICAgIHNldGF0dHIoY29udGV4dCwgJ3N0b2Nrc19rdl90YWJsZScsIG9zLmdldGVudignU1RPQ0tTX0tWX1RBQkxFJywgb3MuZ2V0ZW52KCdWM0lPX1VTRVJOQU1FJykgKyAnL3N0b2Nrcy9zdG9ja3Nfa3YnKSkKICAgIHNldGF0dHIoY29udGV4dCwgJ3N0b2Nrc190c2RiX3RhYmxlJywgb3MuZ2V0ZW52KCdTVE9DS1NfVFNEQl9UQUJMRScsIG9zLmdldGVudignVjNJT19VU0VSTkFNRScpICsgJy9zdG9ja3Mvc3RvY2tzX3RzZGInKSkKICAgIGNvbnRleHQudjNjLmNyZWF0ZShiYWNrZW5kPSd0c2RiJywgdGFibGU9Y29udGV4dC5zdG9ja3NfdHNkYl90YWJsZSwgcmF0ZT0nMS9tJywgaWZfZXhpc3RzPTEpCiAgICAKICAgIHN0b2Nrc19pbmZvX3NldCA9IGZzLkZlYXR1cmVTZXQoInN0b2NrcyIsIGVudGl0aWVzPVtmcy5FbnRpdHkoInN5bWJvbCIpXSkKICAgIHNldGF0dHIoY29udGV4dCwnc3RvY2tfaW5mb19mZWF0dXJlX3NldCcsc3RvY2tzX2luZm9fc2V0KQogICAgCiAgICBjb250ZXh0LnN0b2NrX2luZm9fZmVhdHVyZV9zZXQuYWRkX2FnZ3JlZ2F0aW9uKCJwcmljZXMiLCJwcmljZSIsWyJtaW4iLCJtYXgiXSxbIjFoIl0sIjEwbSIpCiAgICBjb250ZXh0LnN0b2NrX2luZm9fZmVhdHVyZV9zZXQuYWRkX2FnZ3JlZ2F0aW9uKCJ2b2x1bWVzIiwidm9sdW1lIixbIm1pbiIsIm1heCJdLFsiMWgiXSwiMTBtIikKICAgIAogICAgc3RvY2tfZHVtbXkgPSBwZC5EYXRhRnJhbWUoeyJzeW1ib2wiOlsnR09PR0wnLCdNU0ZUJywnQU1aTicsJ0FBUEwnLCdJTlRDJ10sInByaWNlIjpbMCwwLDAsMCwwXSwidm9sdW1lIjpbMCwwLDAsMCwwXSwibGFzdF91cGRhdGVkIjpbMCwwLDAsMCwwXX0pCiAgICBmcy5pbmdlc3QoY29udGV4dC5zdG9ja19pbmZvX2ZlYXR1cmVfc2V0LCBzdG9ja19kdW1teSwgaW5mZXJfb3B0aW9ucz1mcy5JbmZlck9wdGlvbnMuZGVmYXVsdCgpKQogICAgCiAgICBzdG9ja3MgPSBvcy5nZXRlbnYoJ1NUT0NLX0xJU1QnLCdHT09HTCxNU0ZULEFNWk4sQUFQTCxJTlRDJykKICAgIGlmIHN0b2Nrcy5zdGFydHN3aXRoKCdbJyk6CiAgICAgICAgc3RvY2tfc3ltcyA9IGFzdC5saXRlcmFsX2V2YWwoc3RvY2tzKQogICAgZWxzZTogCiAgICAgICAgc3RvY2tfc3ltcyA9IHN0b2Nrcy5zcGxpdCgnLCcpCiAgICBzZXRhdHRyKGNvbnRleHQsICdzdG9ja19zeW1zJywgc3RvY2tfc3ltcykKICAgIAoKICAgIGV4cHJfdGVtcGxhdGUgPSBvcy5nZXRlbnYoJ0VYUFJFU1NJT05fVEVNUExBVEUnLCAic3ltYm9sPSd7c3ltYm9sfSc7cHJpY2U9e3ByaWNlfTt2b2x1bWU9e3ZvbHVtZX07bGFzdF91cGRhdGVkPSd7bGFzdF91cGRhdGVkfSciKQogICAgc2V0YXR0cihjb250ZXh0LCAnZXhwcl90ZW1wbGF0ZScsIGV4cHJfdGVtcGxhdGUpCgogICAgbGFzdF90cmFkZV90aW1lcyA9IHt9CiAgICBzZXRhdHRyKGNvbnRleHQsICdsYXN0X3RyYWRlX3RpbWVzJywgbGFzdF90cmFkZV90aW1lcykKICAgIAogICAgdXBkYXRlX3RpY2tlcnMoY29udGV4dCwgJzdkJywgJzFtJykKICAgIAoKZGVmIGhhbmRsZXIoY29udGV4dCk6CiAgICB1cGRhdGVfdGlja2Vycyhjb250ZXh0LCAnNW0nLCAnMW0nKQogICAgcmV0dXJuICdkb25lJwoK",
        "noBaseImagesPull": true,
        "baseImage": "mlrun/ml-models:0.7.0-rc11",
        "commands": [
          "pip install lxml",
          "pip install yfinance",
          "pip install requests",
          "pip install v3io_frames"
        ],
        "offline": true,
        "codeEntryType": "sourceCode",
        "timestamp": 1630301832
      },
      "platform": {},
      "serviceType": "NodePort",
      "securityContext": {},
      "scaleToZero": {
        "scaleResources": [
          {
            "metricName": "nuclio_processor_handled_events_total",
            "windowSize": "10m",
            "threshold": 0
          }
        ]
      },
      "eventTimeout": ""
    },
    "status": {
      "state": "unhealthy",
      "message": "Function is not healthy",
      "httpPort": 31139,
      "scaleToZero": {
        "lastScaleEvent": "resourceUpdated",
        "lastScaleEventTime": "2021-08-30T05:37:30.169243165Z"
      }
    }
  },
  "stocks-admin-stream-viewer": {
    "metadata": {
      "name": "stocks-admin-stream-viewer",
      "namespace": "default-tenant",
      "labels": {
        "mlrun/class": "remote",
        "nuclio.io/project-name": "stocks-admin"
      },
      "annotations": {
        "nuclio.io/generated_by": "function generated from /User/demos/stock-analysis/code/03-stream-viewer.ipynb"
      },
      "resourceVersion": "37858329"
    },
    "spec": {
      "handler": "03-stream-viewer:handler",
      "runtime": "python:3.6",
      "env": [
        {
          "name": "V3IO_ACCESS_KEY",
          "value": "b7242e47-a051-4ec3-8384-5f99a26c1451"
        },
        {
          "name": "V3IO_USERNAME",
          "value": "admin"
        },
        {
          "name": "V3IO_API",
          "value": "v3io-webapi.default-tenant.svc:8081"
        },
        {
          "name": "V3IO_CONTAINER",
          "value": "users"
        },
        {
          "name": "STOCKS_STREAM",
          "value": "admin/stocks/stocks_stream"
        },
        {
          "name": "MLRUN_DEFAULT_PROJECT",
          "value": "stocks-admin"
        },
        {
          "name": "MLRUN_DBPATH",
          "value": "http://mlrun-api:8080"
        },
        {
          "name": "MLRUN_NAMESPACE",
          "value": "default-tenant"
        }
      ],
      "resources": {},
      "imageHash": "1625662025087925434",
      "minReplicas": 1,
      "maxReplicas": 4,
      "triggers": {
        "default-http": {
          "class": "",
          "kind": "http",
          "name": "default-http",
          "maxWorkers": 1,
          "attributes": {
            "serviceType": "NodePort"
          }
        }
      },
      "volumes": [
        {
          "volume": {
            "name": "v3io",
            "flexVolume": {
              "driver": "v3io/fuse",
              "options": {
                "accessKey": "b7242e47-a051-4ec3-8384-5f99a26c1451"
              }
            }
          },
          "volumeMount": {
            "name": "v3io",
            "mountPath": "/v3io"
          }
        },
        {
          "volume": {
            "name": "v3io",
            "flexVolume": {
              "driver": "v3io/fuse",
              "options": {
                "accessKey": "b7242e47-a051-4ec3-8384-5f99a26c1451"
              }
            }
          },
          "volumeMount": {
            "name": "v3io",
            "mountPath": "/User",
            "subPath": "users/admin"
          }
        }
      ],
      "version": -1,
      "alias": "latest",
      "build": {
        "functionSourceCode": "IyBHZW5lcmF0ZWQgYnkgbnVjbGlvLmV4cG9ydC5OdWNsaW9FeHBvcnRlcgoKaW1wb3J0IHYzaW8uZGF0YXBsYW5lCmltcG9ydCBqc29uCmltcG9ydCBvcwoKZGVmIGluaXRfY29udGV4dChjb250ZXh0KToKICAgIGFjY2Vzc19rZXkgPSBvcy5nZXRlbnYoJ1YzSU9fQUNDRVNTX0tFWScsIE5vbmUpCiAgICBzZXRhdHRyKGNvbnRleHQsICdjb250YWluZXInLCBvcy5nZXRlbnYoJ1YzSU9fQ09OVEFJTkVSJywgJ3VzZXJzJykpCiAgICBzZXRhdHRyKGNvbnRleHQsICdzdHJlYW1fcGF0aCcsIG9zLmdldGVudignU1RPQ0tTX1NUUkVBTScsb3MuZ2V0ZW52KCdWM0lPX1VTRVJOQU1FJykgKyAnL3N0b2Nrcy9zdG9ja3Nfc3RyZWFtJykpCiAgICAKICAgIHYzaW9fY2xpZW50ID0gdjNpby5kYXRhcGxhbmUuQ2xpZW50KGVuZHBvaW50PW9zLmdldGVudignVjNJT19BUEknLCBOb25lKSwgYWNjZXNzX2tleT1hY2Nlc3Nfa2V5KQogICAgc2V0YXR0cihjb250ZXh0LCAnZGF0YScsIFtdKQogICAgc2V0YXR0cihjb250ZXh0LCAndjNpb19jbGllbnQnLCB2M2lvX2NsaWVudCkgCiAgICBzZXRhdHRyKGNvbnRleHQsICdsaW1pdCcsIG9zLmdldGVudignTElNSVQnLCAxMCkpCiAgICAKCiAgICAKZGVmIGhhbmRsZXIoY29udGV4dCwgZXZlbnQpOgogICAgcmVzcCA9IGNvbnRleHQudjNpb19jbGllbnQuc2Vla19zaGFyZChjb250YWluZXI9Y29udGV4dC5jb250YWluZXIsIHBhdGg9Zid7Y29udGV4dC5zdHJlYW1fcGF0aH0vMCcsIHNlZWtfdHlwZT0nRUFSTElFU1QnKQogICAgc2V0YXR0cihjb250ZXh0LCAnbmV4dF9sb2NhdGlvbicsIHJlc3Aub3V0cHV0LmxvY2F0aW9uKQogICAgcmVzcCA9IGNvbnRleHQudjNpb19jbGllbnQuZ2V0X3JlY29yZHMoY29udGFpbmVyPWNvbnRleHQuY29udGFpbmVyLCBwYXRoPWYne2NvbnRleHQuc3RyZWFtX3BhdGh9LzAnLCBsb2NhdGlvbj1jb250ZXh0Lm5leHRfbG9jYXRpb24sIGxpbWl0PWNvbnRleHQubGltaXQpCiAgICBjb250ZXh0LmxvZ2dlci5pbmZvKCdsb2NhdGlvbjogJXMnLCBjb250ZXh0Lm5leHRfbG9jYXRpb24pCgogICAgZm9yIHJlYyBpbiByZXNwLm91dHB1dC5yZWNvcmRzOgogICAgICAgIHJlY19kYXRhID0gcmVjLmRhdGEuZGVjb2RlKCd1dGYtOCcpCiAgICAgICAgcmVjX2pzb24gPSBqc29uLmxvYWRzKHJlY19kYXRhKQogICAgICAgIGNvbnRleHQuZGF0YS5hcHBlbmQoeydUaW1lJzogcmVjX2pzb25bJ3RpbWUnXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnU3ltYm9sJzogcmVjX2pzb25bJ3N5bWJvbCddLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICdTZW50aW1lbnQnOiByZWNfanNvblsnc2VudGltZW50J10sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0xpbmsnOiByZWNfanNvblsnbGluayddLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICdDb250ZW50JzogcmVjX2pzb25bJ2NvbnRlbnQnXX0pCgogICAgY29udGV4dC5kYXRhID0gY29udGV4dC5kYXRhWy1jb250ZXh0LmxpbWl0Ol0KICAgIAogICAgY29sdW1ucyA9IFt7J3RleHQnOiBrZXksICd0eXBlJzogJ29iamVjdCd9IGZvciBrZXkgaW4gWydUaW1lJywgJ1N5bWJvbCcsICdTZW50aW1lbnQnLCAnTGluaycsICdDb250ZW50J11dCiAgICBkYXRhID0gW2xpc3QoaXRlbS52YWx1ZXMoKSkgZm9yIGl0ZW0gaW4gY29udGV4dC5kYXRhXQogICAgcmVzcG9uc2UgPSBbeydjb2x1bW5zJzogY29sdW1ucywKICAgICAgICAgICAgICAgICdyb3dzJzogZGF0YSwKICAgICAgICAgICAgICAgICd0eXBlJzogJ3RhYmxlJ31dCiAgICByZXR1cm4gcmVzcG9uc2UgICAgICAgICAgICAgIAoK",
        "noBaseImagesPull": true,
        "baseImage": "mlrun/mlrun:0.6.5-rc12",
        "commands": [
          "pip install v3io"
        ],
        "offline": true,
        "codeEntryType": "sourceCode",
        "timestamp": 1625662037
      },
      "platform": {},
      "serviceType": "NodePort",
      "securityContext": {},
      "scaleToZero": {
        "scaleResources": [
          {
            "metricName": "nuclio_processor_handled_events_total",
            "windowSize": "10m",
            "threshold": 0
          }
        ]
      },
      "eventTimeout": ""
    },
    "status": {
      "state": "ready"
    }
  },
  "stocks-admin-vector-reader": {
    "metadata": {
      "name": "stocks-admin-vector-reader",
      "namespace": "default-tenant",
      "labels": {
        "mlrun/class": "remote",
        "nuclio.io/project-name": "stocks-admin"
      },
      "annotations": {
        "nuclio.io/generated_by": "function generated from /User/demos/stock-analysis/code/06-read-vector.ipynb"
      },
      "resourceVersion": "37855238"
    },
    "spec": {
      "handler": "06-read-vector:handler",
      "runtime": "python:3.6",
      "env": [
        {
          "name": "V3IO_ACCESS_KEY",
          "value": "b7242e47-a051-4ec3-8384-5f99a26c1451"
        },
        {
          "name": "V3IO_USERNAME",
          "value": "admin"
        },
        {
          "name": "V3IO_API",
          "value": "v3io-webapi.default-tenant.svc:8081"
        },
        {
          "name": "PROJECT_NAME",
          "value": "stocks-admin"
        },
        {
          "name": "MLRUN_DEFAULT_PROJECT",
          "value": "stocks-admin"
        },
        {
          "name": "MLRUN_DBPATH",
          "value": "http://mlrun-api:8080"
        },
        {
          "name": "MLRUN_NAMESPACE",
          "value": "default-tenant"
        }
      ],
      "resources": {},
      "imageHash": "1625662024166097586",
      "minReplicas": 1,
      "maxReplicas": 4,
      "triggers": {
        "default-http": {
          "class": "",
          "kind": "http",
          "name": "default-http",
          "maxWorkers": 1,
          "attributes": {
            "serviceType": "NodePort"
          }
        }
      },
      "volumes": [
        {
          "volume": {
            "name": "v3io",
            "flexVolume": {
              "driver": "v3io/fuse",
              "options": {
                "accessKey": "b7242e47-a051-4ec3-8384-5f99a26c1451"
              }
            }
          },
          "volumeMount": {
            "name": "v3io",
            "mountPath": "/v3io"
          }
        },
        {
          "volume": {
            "name": "v3io",
            "flexVolume": {
              "driver": "v3io/fuse",
              "options": {
                "accessKey": "b7242e47-a051-4ec3-8384-5f99a26c1451"
              }
            }
          },
          "volumeMount": {
            "name": "v3io",
            "mountPath": "/User",
            "subPath": "users/admin"
          }
        }
      ],
      "version": -1,
      "alias": "latest",
      "build": {
        "functionSourceCode": "IyBHZW5lcmF0ZWQgYnkgbnVjbGlvLmV4cG9ydC5OdWNsaW9FeHBvcnRlcgoKaW1wb3J0IG1scnVuLmZlYXR1cmVfc3RvcmUgYXMgZnMKZnJvbSBtbHJ1bi5mZWF0dXJlX3N0b3JlLnN0ZXBzIGltcG9ydCAqCmltcG9ydCBtbHJ1bgppbXBvcnQgcGFuZGFzIGFzIHBkCmltcG9ydCBudW1weQppbXBvcnQgb3MKaW1wb3J0IG1hdGgKCmRlZiBybV9pbmYoZGF0YSk6CiAgICBwcmludChkYXRhKQogICAgZGF0YSA9IFswIGlmIGl0ZW0gPT0gbWF0aC5pbmYgb3IgaXRlbSA9PSAtbWF0aC5pbmYgZWxzZSBpdGVtIGZvciBpdGVtIGluIGRhdGEgXQogICAgcmV0dXJuIGRhdGEKCmRlZiBoYW5kbGVyKGNvbnRleHQsIGV2ZW50KToKICAgIGNvbnRleHQubG9nZ2VyLmluZm8oIlJlYWRpbmcgZmVhdHVyZXMgZnJvbSBmZWF0dXJlIHZlY3RvciIpCiAgICBzdG9ja19saXN0ID0gW10KICAgIHNlcnZpY2UgPSBmcy5nZXRfb25saW5lX2ZlYXR1cmVfc2VydmljZSgic3RvY2tzLXZlYyIpCiAgICBmb3Iga2V5LHZhbHVlIGluIGNvbnRleHQuc3ltX3RvX3VybC5pdGVtcygpOgogICAgICAgIGNvbnRleHQubG9nZ2VyLmluZm8oa2V5KQogICAgICAgIGRhdGEgPSBzZXJ2aWNlLmdldChbeyJzeW1ib2wiOiBrZXl9XSlbMF0KICAgICAgICBkYXRhWyJzeW1ib2wiXSA9IGtleQogICAgICAgIHN0b2NrX2xpc3QuYXBwZW5kKGRhdGEpCiAgICAKICAgIGRhdGEgPSBbcm1faW5mKGxpc3QoaXRlbS52YWx1ZXMoKSkpIGZvciBpdGVtIGluIHN0b2NrX2xpc3RdCiAgICAKICAgIGNvbHVtbnMgPSBbeyd0ZXh0Jzoga2V5LCAndHlwZSc6ICdvYmplY3QnfSBmb3Iga2V5IGluIHN0b2NrX2xpc3RbMF0ua2V5cygpXQogICAgCiAgICByZXNwb25zZSA9IFt7J2NvbHVtbnMnOiBjb2x1bW5zLAogICAgICAgICAgICAgICAgJ3Jvd3MnOiBkYXRhLAogICAgICAgICAgICAgICAgJ3R5cGUnOiAndGFibGUnfV0KICAgIHJldHVybiByZXNwb25zZQoKZGVmIGluaXRfY29udGV4dChjb250ZXh0KToKICAgIGNvbnRleHQubG9nZ2VyLmluZm8oIkluaXRhbGl6aW5nIGNvbnRleHQgJiBjb25zdHJ1Y3RpbmcgZmVhdHJ1cmUgdmVjdG9yIikKICAgIHNldGF0dHIoY29udGV4dCwgJ1BST0pFQ1RfTkFNRScsIG9zLmdldGVudignUFJPSkVDVF9OQU1FJywgJ3N0b2Nrcy0nICsgb3MuZ2V0ZW52KCdWM0lPX1VTRVJOQU1FJykpKQogICAgbWxydW4uc2V0X2Vudmlyb25tZW50KHByb2plY3Q9Y29udGV4dC5QUk9KRUNUX05BTUUpCiAgICAKICAgIHN5bV90b191cmwgPSB7J0dPT0dMJzogJ2dvb2dsZS1pbmMnLCAnTVNGVCc6ICdtaWNyb3NvZnQtY29ycCcsICdBTVpOJzogJ2FtYXpvbi1jb20taW5jJywKICAgICAgICAgICAgICAgICAgJ0FBUEwnOiAnYXBwbGUtY29tcHV0ZXItaW5jJywgJ0lOVEMnIDogJ2ludGVsLWNvcnAnfQogICAgc2V0YXR0cihjb250ZXh0LCAnc3ltX3RvX3VybCcsIHN5bV90b191cmwpCiAgICBzZXRhdHRyKGNvbnRleHQsICdzdG9ja3NfdmVjJywgInN0b2Nrcy12ZWMiKQogICAgCiAgICBmZWF0dXJlcyA9IFsic3RvY2tzLnByaWNlc19taW5fMWgiLAogICAgICAgICAgICAgICAgInN0b2Nrcy5wcmljZXNfbWF4XzFoIiwKICAgICAgICAgICAgICAgICJzdG9ja3Mudm9sdW1lc19taW5fMWgiLAogICAgICAgICAgICAgICAgInN0b2Nrcy52b2x1bWVzX21heF8xaCIsCiAgICAgICAgICAgICAgICAic3RvY2tzLnByaWNlIiwKICAgICAgICAgICAgICAgICJzdG9ja3Mudm9sdW1lIiwKICAgICAgICAgICAgICAgICJzdG9ja3MubGFzdF91cGRhdGVkIiwKICAgICAgICAgICAgICAgICJuZXdzLnNlbnRpbWVudHNfbWluXzFoIiwKICAgICAgICAgICAgICAgICJuZXdzLnNlbnRpbWVudHNfbWF4XzFoIiwKICAgICAgICAgICAgICAgICJuZXdzLnNlbnRpbWVudCIsCiAgICAgICAgICAgICAgICAibmV3cy5sYXN0X3JlYWN0aW9uIl0KICAgIAogICAgdmVjdG9yID0gZnMuRmVhdHVyZVZlY3Rvcihjb250ZXh0LnN0b2Nrc192ZWMsIGZlYXR1cmVzLCBkZXNjcmlwdGlvbj0ic3RvY2tzIGRlbW8gZmVhdHVyZSB2ZWN0b3IiKQogICAgdmVjdG9yLnNhdmUoKQoK",
        "noBaseImagesPull": true,
        "baseImage": "mlrun/ml-models:0.6.5-rc12",
        "commands": [
          "pip install beautifulsoup4",
          "pip install pandas",
          "pip install v3io_frames",
          "pip install v3io"
        ],
        "offline": true,
        "codeEntryType": "sourceCode",
        "timestamp": 1625662037
      },
      "platform": {},
      "serviceType": "NodePort",
      "securityContext": {},
      "scaleToZero": {
        "scaleResources": [
          {
            "metricName": "nuclio_processor_handled_events_total",
            "windowSize": "10m",
            "threshold": 0
          }
        ]
      },
      "eventTimeout": ""
    },
    "status": {
      "state": "unhealthy",
      "message": "Function is not healthy",
      "httpPort": 32041,
      "scaleToZero": {
        "lastScaleEvent": "resourceUpdated",
        "lastScaleEventTime": "2021-07-07T12:47:25.587341173Z"
      }
    }
  },
  "test": {
    "metadata": {
      "name": "test",
      "namespace": "default-tenant",
      "labels": {
        "nuclio.io/project-name": "cat-vs-dog-classification",
        "mlrun__type": "mlrun__model-monitoring-infra"
      },
      "resourceVersion": "37855264"
    },
    "spec": {
      "handler": "main:handler",
      "runtime": "python:3.6",
      "resources": {},
      "imageHash": "1635690605932249838",
      "triggers": {
        "default-http": {
          "class": "",
          "kind": "http",
          "name": "default-http",
          "maxWorkers": 1,
          "attributes": {
            "serviceType": "ClusterIP"
          }
        }
      },
      "version": -1,
      "alias": "latest",
      "build": {
        "functionSourceCode": "ZGVmIGhhbmRsZXIoY29udGV4dCwgZXZlbnQpOg0KICAgIHJldHVybiAiIg==",
        "noBaseImagesPull": true,
        "offline": true,
        "runtimeAttributes": {
          "repositories": []
        },
        "codeEntryType": "sourceCode",
        "timestamp": 1635690620
      },
      "loggerSinks": [
        {
          "level": "debug"
        }
      ],
      "platform": {},
      "securityContext": {},
      "scaleToZero": {
        "scaleResources": [
          {
            "metricName": "nuclio_processor_handled_events_total",
            "windowSize": "10m",
            "threshold": 0
          }
        ]
      },
      "eventTimeout": ""
    },
    "status": {
      "state": "ready"
    }
  },
  "test1": {
    "metadata": {
      "name": "test1",
      "namespace": "default-tenant",
      "labels": {
        "nuclio.io/project-name": "default",
        "mlrun__type": "mlrun__model-monitoring-infra"
      },
      "resourceVersion": "28276699"
    },
    "spec": {
      "description": "Showcases unstructured logging and a structured response.",
      "handler": "helloworld:handler",
      "runtime": "python:3.6",
      "resources": {},
      "imageHash": "1634198376984937952",
      "minReplicas": 1,
      "maxReplicas": 1,
      "triggers": {
        "default-http": {
          "class": "",
          "kind": "http",
          "name": "default-http",
          "maxWorkers": 1,
          "attributes": {
            "serviceType": "ClusterIP"
          }
        }
      },
      "version": -1,
      "alias": "latest",
      "build": {
        "functionSourceCode": "IyBDb3B5cmlnaHQgMjAxNyBUaGUgTnVjbGlvIEF1dGhvcnMuCiMKIyBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKIyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiMgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiMKIyAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKIwojIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKIyBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAojIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgojIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKIyBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCgpkZWYgaGFuZGxlcihjb250ZXh0LCBldmVudCk6CiAgICBjb250ZXh0LmxvZ2dlci5pbmZvKCdUaGlzIGlzIGFuIHVuc3RydWN0dXJlZCBsb2cnKQoKICAgIHJldHVybiBjb250ZXh0LlJlc3BvbnNlKGJvZHk9J0hlbGxvLCBmcm9tIG51Y2xpbyA6XScsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzPXt9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudF90eXBlPSd0ZXh0L3BsYWluJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1c19jb2RlPTIwMCkK",
        "noBaseImagesPull": true,
        "offline": true,
        "runtimeAttributes": {
          "repositories": []
        },
        "codeEntryType": "sourceCode",
        "timestamp": 1634198394
      },
      "platform": {},
      "securityContext": {},
      "scaleToZero": {
        "scaleResources": [
          {
            "metricName": "nuclio_processor_handled_events_total",
            "windowSize": "10m",
            "threshold": 0
          }
        ]
      },
      "eventTimeout": ""
    },
    "status": {
      "state": "ready",
      "scaleToZero": {
        "lastScaleEvent": "resourceUpdated",
        "lastScaleEventTime": "2021-10-14T07:59:58.121212599Z"
      }
    }
  },
  "test2": {
    "metadata": {
      "name": "test2",
      "namespace": "default-tenant",
      "labels": {
        "nuclio.io/project-name": "default",
        "mlrun__type": "mlrun__model-monitoring-infra"
      },
      "resourceVersion": "37855235"
    },
    "spec": {
      "description": "Showcases unstructured logging and a structured response.",
      "handler": "helloworld:handler",
      "runtime": "python:3.6",
      "resources": {},
      "imageHash": "1634198409457365027",
      "minReplicas": 1,
      "maxReplicas": 1,
      "triggers": {
        "default-http": {
          "class": "",
          "kind": "http",
          "name": "default-http",
          "maxWorkers": 1,
          "attributes": {
            "fetchDefault": 0,
            "intervalMs": 0,
            "jobBackoffLimit": 0,
            "maxBatchSize": 0,
            "maxBatchWaitMs": 0,
            "numContainerWorkers": 0,
            "pollingIntervalMs": 0,
            "port": 0,
            "protocolVersion": 0,
            "readBatchSize": 0,
            "serviceType": "ClusterIP"
          }
        }
      },
      "version": -1,
      "alias": "latest",
      "build": {
        "functionSourceCode": "IyBDb3B5cmlnaHQgMjAxNyBUaGUgTnVjbGlvIEF1dGhvcnMuCiMKIyBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKIyB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCiMgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CiMKIyAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKIwojIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKIyBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAojIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgojIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKIyBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCgpkZWYgaGFuZGxlcihjb250ZXh0LCBldmVudCk6CiAgICBjb250ZXh0LmxvZ2dlci5pbmZvKCdUaGlzIGlzIGFuIHVuc3RydWN0dXJlZCBsb2cnKQoKICAgIHJldHVybiBjb250ZXh0LlJlc3BvbnNlKGJvZHk9J0hlbGxvLCBmcm9tIG51Y2xpbyA6XScsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzPXt9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudF90eXBlPSd0ZXh0L3BsYWluJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1c19jb2RlPTIwMCkK",
        "noBaseImagesPull": true,
        "offline": true,
        "runtimeAttributes": {
          "repositories": []
        },
        "codeEntryType": "sourceCode",
        "timestamp": 1634198412
      },
      "platform": {},
      "securityContext": {},
      "scaleToZero": {
        "scaleResources": [
          {
            "metricName": "nuclio_processor_handled_events_total",
            "windowSize": "10m",
            "threshold": 0
          }
        ]
      },
      "eventTimeout": ""
    },
    "status": {
      "state": "ready"
    }
  }
}
